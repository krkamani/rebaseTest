<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2020-11-17 23:05:21"><sys_remote_update_set action="INSERT_OR_UPDATE"><application display_value="Approval Central">ca26b59bdb612b0094c2f7731d9619b1</application><application_name>Approval Central</application_name><application_scope>x_snc_approval_cen</application_scope><application_version>1.0.1</application_version><collisions/><commit_date/><deleted/><description>Automatically created by the system</description><inserted/><name>System Administrator</name><origin_sys_id/><parent/><release_date/><remote_base_update_set/><remote_parent_id/><remote_sys_id>e6347ff81bb380942b58ec67bc4bcb2c</remote_sys_id><state>loaded</state><summary/><sys_class_name>sys_remote_update_set</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5735eda91b20e4d42b58ec67bc4bcb74</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><update_set/><update_source/><updated/></sys_remote_update_set><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_4acd7bb3db5a8780a0885e77dc9619a8</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="request_a_demoeval_detail_template"&gt;b8ad685ddb2a97004ed56be3ca9619a3&lt;/card_template&gt;&lt;description&gt;Request a Demo / Evaluation Instance&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001016&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sc_req_item^sysapproval.ref_sc_req_item.cat_item.name=Request a Demo / Evaluation Instance^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item.name" goto="false" newquery="false" operator="=" or="false" value="Request a Demo / Evaluation Instance"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var approvaltype = current.document_id.getDisplayValue().split(':');
var dtFormat = gs.getDateTimeFormat();
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getValue('sys_created_on'));

var requested_date = {
	display_value : gdt.getLocalDate().toString(),
	value : gdt.getNumericValue()
};

answer = {
	number:{
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString()
	},
	approval_type: approvaltype[0],
	requester: current.sysapproval.opened_by.getDisplayValue(),
	requested_date: requested_date,
	short_description:current.sysapproval.short_description.getDisplayValue(),
	document_id:current.document_id.toString(),
	document_table:current.source_table.toString(),
	name: current.document_id.cat_item.name,
	requested_for: current.document_id.u_requested_for.getDisplayValue(),
	request_type: current.document_id.variable_pool.requestType.getDisplayValue(),
	requested_instance_name: current.document_id.variable_pool.preferredname.toString(),
	assigned_to: current.document_id.variable_pool.assigned_to.getDisplayValue(),
	region: current.document_id.variable_pool.region.getDisplayValue(),
	instance_edition: current.document_id.variable_pool.Instance.getDisplayValue(),
	for_opportunity: current.document_id.variable_pool.foropportunity.getDisplayValue(),
	account: current.document_id.variable_pool.account.getDisplayValue(),
	account_legal_name: current.document_id.variable_pool.acctLegalName.toString(),
	account_address1: current.document_id.variable_pool.addr1.toString(),
	account_address2: current.document_id.variable_pool.addr2.toString(),
	account_city: current.document_id.variable_pool.city.toString(),
	account_country: current.document_id.variable_pool.country.toString(),
	account_state: current.document_id.variable_pool.state.toString(),
	account_zip: current.document_id.variable_pool.zip.toString(),
	signatory_contact: current.document_id.variable_pool.signatoryContact.getDisplayValue(),
	signatory_name: current.document_id.variable_pool.firstName +" "+ current.document_id.variable_pool.lastName,
	signatory_email: current.document_id.variable_pool.userName.toString(),
	signatory_title: current.document_id.variable_pool.designation.toString(),
	signatory_primary_phone: current.document_id.variable_pool.phone.toString(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : current.sysapproval.getDisplayValue(),
	title : current.document_id.u_requested_for.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state
};]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;farahnaj.inamdar&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-11-15 08:41:07&lt;/sys_created_on&gt;&lt;sys_id&gt;4acd7bb3db5a8780a0885e77dc9619a8&lt;/sys_id&gt;&lt;sys_mod_count&gt;95&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sc_req_item&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requested_for", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="request_a_demoeval_list_template"&gt;09fda85ddb2a97004ed56be3ca961939&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the request a demo / evaluation instance for request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Request a Demo / Evaluation Instance"&gt;56f4c7e71312bf00a77d34228144b0f5&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_requested_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-369930045</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1335eda91b20e4d42b58ec67bc4bcbc2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eaba600000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Request a Demo / Evaluation Instance</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>41c206616db384d422f451a9f2a25fe3</update_guid><update_guid_history>41c206616db384d422f451a9f2a25fe3:-369930045</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_c4037f05dbaf5300426ec170ba96196a</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="srvc_acc_non_prod_details_template"&gt;3d8568d1db639300426ec170ba961946&lt;/card_template&gt;&lt;description&gt;Service account for Sub-Prod&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001012&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sc_req_item^sysapproval.ref_sc_req_item.cat_item=6846242adb5bdb004ed56be3ca96196d^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="=" or="false" value="6846242adb5bdb004ed56be3ca96196d"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var ritm_var = new global.GetVariablePool().getCatalogVariables(current.sysapproval);

var ritm = new GlideRecord('sc_req_item');
ritm.get(current.sysapproval);

var ritm_notes = ritm.comments.getJournalEntry(-1); 
var notes_arr = ritm_notes.split("\n\n"); 

var notes = [];
var obj = { };

var numOfComments = notes_arr.length - 1;

for (var i = 0; i &lt; numOfComments; i++){
	obj = { };
	var notestr = notes_arr[i].toString();
	
	noteDate = notestr.split(" - ")[0];
	obj.date = noteDate.toString();
	
	notetemp = notestr.split(' - ')[1];
	notetemp = notetemp.toString();

	noteUser = notetemp.split(" (")[0];
	obj.user = noteUser.toString();
	
	noteComment = notetemp.split("\n")[1];
	obj.comment = noteComment.toString();

	notes.push(obj);
}

var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());

var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};
answer = {
				user_notes: notes,
				numOfComments: numOfComments,
			     number:{
					 display_value: current.document_id.getDisplayValue(),
					 value: current.document_id.toString()
				 },
	            approval_group:false,
	            approval_type: approvaltype[0],
	            requester: current.sysapproval.u_requested_for.getDisplayValue(),
	            photo: current.sysapproval.u_task_for.photo.getDisplayValue(),
	            requested_date: requested_date,
	            request_reason: current.u_request_reason.getDisplayValue(),
	            source_table: current.source_table.toString(),
	            document:current.document_id.toString(),
				variables: ritm_var
				
	            
	  };
if (current.group)
	{
		answer.approval_group = {
			display_value: current.group.assignment_group.getDisplayValue(),
			value: current.group.assignment_group.toString()
		};
	}
answer;

]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;probir.das&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-25 18:25:37&lt;/sys_created_on&gt;&lt;sys_id&gt;c4037f05dbaf5300426ec170ba96196a&lt;/sys_id&gt;&lt;sys_mod_count&gt;64&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sc_req_item&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Requested For", "field_name": "requester", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="default_list_template"&gt;72bffc4edb4d93c03d7958a8dc9619e7&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Service account for Sub-Prod"&gt;a0f483e71312bf00a77d34228144b003&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_requested_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-984293952</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1335eda91b20e4d42b58ec67bc4bcbc5</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eaba340000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Service account for Sub-Prod</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>45c20661bcb384d4de377cfa18e131e1</update_guid><update_guid_history>45c20661bcb384d4de377cfa18e131e1:-984293952</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_37d253eddbd17740c8491bfa4b96191b</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;true&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value=""&gt;0adbc056db91bb40c8491bfa4b961910&lt;/card_template&gt;&lt;description&gt;Work Order&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;false&lt;/no_request_field&gt;&lt;number&gt;UBOX0001011&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_work_order^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_work_order"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval.opened_by&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var getFormatedDate = function(field_value) {
	gdt = new GlideDate();
	gdt.setValue(field_value);
	return  gdt.getByFormat("MM-dd-yyyy");
};

answer = {
	document_table: current.getTableName(),
	document: current.getUniqueValue(),
	number: {
		value: current.document_id.u_number.toString(),
		display_value: current.document_id.u_number.getDisplayValue()
	},
	requester: {
		value: current.document_id.u_requester.toString(),
		display_value: current.document_id.u_requester.getDisplayValue()
	},
	estimated_total_hours: {
		value: current.document_id.u_estimated_total_hours.toString(),
		display_value: current.document_id.u_estimated_total_hours.getDisplayValue()
	},
	deployment: {
		value: current.document_id.u_deployment.number.toString(),
		display_value: current.document_id.u_deployment.number.getDisplayValue()
	},
	partner: {
		value: current.document_id.u_partner.name.toString(),
		display_value: current.document_id.u_partner.name.getDisplayValue()
	},
	deployment_account: {
		value: current.document_id.u_deployment.u_account.toString(),
		display_value: current.document_id.u_deployment.u_account.getDisplayValue()
	},
	deployment_opportunity: {
		value: current.document_id.u_deployment.u_opportunity.name.toString(),
		display_value: current.document_id.u_deployment.u_opportunity.name.getDisplayValue()
	},
	opportunity_forecast_category: {
		value: current.document_id.u_deployment.u_opportunity.pipeline_status.toString(),
		display_value: current.document_id.u_deployment.u_opportunity.pipeline_status.getDisplayValue()
	},
	company_entity: {
		value: current.document_id.u_selling_entity.toString(),
		display_value: current.document_id.u_selling_entity.getDisplayValue()
	},
	billing_type: {
		value: current.document_id.u_billing_type.toString(),
		display_value: current.document_id.u_billing_type.getDisplayValue()
	},
	expenses_paid: {
		value: current.document_id.u_expenses_paid.toString(),
		display_value: current.document_id.u_expenses_paid.getDisplayValue()
	},
	war: {
		value: current.document_id.u_war.toString(),
		display_value: current.document_id.u_war.getDisplayValue()
	},
	wo_extension: {
		value: current.document_id.u_work_order_extension.toString(),
		display_value: current.document_id.u_work_order_extension.getDisplayValue()
	},
	requester: {
		value: current.document_id.u_requester.toString(),
		display_value: current.document_id.u_requester.getDisplayValue()
	},
	work_order: {
		value: current.document_id.u_work_order_number.toString(),
		display_value: current.document_id.u_work_order_number.getDisplayValue()
	},
	sales_order: {
		value: current.document_id.u_sales_order.toString(),
		display_value: current.document_id.u_sales_order.getDisplayValue()
	},
	ppa: {
		value: current.document_id.u_ppa_number.toString(),
		display_value: current.document_id.u_ppa_number.getDisplayValue()
	},
	estimated_start_date: {
		value: getFormatedDate(current.document_id.u_estimated_start_date),
		display_value: getFormatedDate(current.document_id.u_estimated_start_date)
	},
	estimated_end_date: {
		value: getFormatedDate(current.document_id.u_estimated_end_date),
		display_value: getFormatedDate(current.document_id.u_estimated_end_date)
	},
	estimated_total_hours: {
		value: current.document_id.u_estimated_total_hours.toString(),
		display_value: current.document_id.u_estimated_total_hours.getDisplayValue()
	},
	estimated_total: {
		value: current.document_id.u_est_total.toString(),
		display_value: current.document_id.u_est_total.getDisplayValue()
	},
	estimated_travel_expenses: {
		value: current.document_id.u_est_travel_expenses.toString(),
		display_value: current.document_id.u_est_travel_expenses.getDisplayValue()
	},
	status: {
		value: current.document_id.u_status.toString(),
		display_value: current.document_id.u_status.getDisplayValue()
	}
};]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;lucas.schirm&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-05-09 01:23:11&lt;/sys_created_on&gt;&lt;sys_id&gt;37d253eddbd17740c8491bfa4b96191b&lt;/sys_id&gt;&lt;sys_mod_count&gt;88&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject) {

    //Changing the approval state here to trigger the work order workflow to move to the next activity and capturing the details for approval history


    oldValue.state = 'requested';
    if (updateObject.state.toLowerCase() == "approved") {
        newValue.state = 'accepted_state';
    } else {
        newValue.state = 'rejected_state';
    }
    current[updateObject.state_field] = updateObject.state.toLowerCase();
    current.update();


})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID","field_name":"number","default_filter":false},{"display":"Partner","field_name":"partner","default_filter":true,"sort_by_value":false},{"display":"Deployment Account","field_name":"deployment_account","default_filter":true},{"display":"Deployment Opportunity Forecast","field_name":"opportunity_forecast_category","default_filter":false},{"display":"Billing Type","field_name":"billing_type","default_filter":false},{"display":"Estimated Total Hours","field_name":"estimated_total_hours","default_filter":false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value=""&gt;d6febffddb913b40c8491bfa4b96199e&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the Work Order {number} for {requester}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Work Order"&gt;abe4cfa71312bf00a77d34228144b031&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>881557575</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1735eda91b20e4d42b58ec67bc4bcbc1</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab9da0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Work Order</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>c9c2066161b384d4c731a40f2e13efb8</update_guid><update_guid_history>c9c2066161b384d4c731a40f2e13efb8:881557575</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_99d08da5db87f60004cef6c5ae9619da</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="purchase_request_details_template"&gt;85604e67dbc1d7000d0e540adc961965&lt;/card_template&gt;&lt;description&gt;Purchase Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001008&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_purchase_request^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_purchase_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value:gdt.getLocalDate().getDisplayValue(),
	value:gdt.getNumericValue()
}
answer = {
	number:{
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString()
	},
	approval_type: approvaltype[0],
	requested_date: requested_date,
	request_type: current.sysapproval.u_pr_type.getDisplayValue(),
	short_description: current.sysapproval.pr_description.getDisplayValue(),
	sap_po_number: current.sysapproval.u_sap_po_number.getDisplayValue(),
	company_code: current.sysapproval.u_company_code.getDisplayValue(),
	priority: current.sysapproval.u_priority.getDisplayValue(),
	submitter: current.sysapproval.u_submitter.getDisplayValue(),
	requester: current.sysapproval.u_task_for.getDisplayValue(),
	cost_center: current.sysapproval.u_cost_center.getDisplayValue(),
	vendor: current.sysapproval.u_vendor_no_and_name.getDisplayValue(),
	total_amount_lc: current.sysapproval.u_total_amount.getDisplayValue(),
	total_amount_usd: current.sysapproval.u_amount.getDisplayValue(),
	revision_amount_lc: current.sysapproval.u_revision_amount.getDisplayValue(),
	revision_amount_usd: current.sysapproval.u_revision_amount_usd.getDisplayValue(),
	document: current.document_id.toString(),
	project_name: current.sysapproval.u_project_name.getDisplayValue(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : current.sysapproval.getDisplayValue(),
	title : 'Type: ' + current.sysapproval.u_pr_type.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state
};

answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-30 05:45:13&lt;/sys_created_on&gt;&lt;sys_id&gt;99d08da5db87f60004cef6c5ae9619da&lt;/sys_id&gt;&lt;sys_mod_count&gt;40&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;u_purchase_request&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Created By", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="purchase_request_list_template"&gt;a8392372dbc193043d7958a8dc961964&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the purchase request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Purchase Request"&gt;56f4c7e71312bf00a77d34228144b0b9&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_task_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-1712351139</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1735eda91b20e4d42b58ec67bc4bcbc4</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab92c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Purchase Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>0dc20661edb384d45ac9d73763cc44b2</update_guid><update_guid_history>0dc20661edb384d45ac9d73763cc44b2:-1712351139</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_10abc325db517740c8491bfa4b9619f4</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;u_approver&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value=""&gt;d3ea17e5db557740c8491bfa4b961991&lt;/card_template&gt;&lt;description&gt;CSAT&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;u_comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;false&lt;/no_request_field&gt;&lt;number&gt;UBOX0001006&lt;/number&gt;&lt;query table="u_csat_approvals"&gt;u_state=Requested^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field&gt;u_requested_by&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};

var expected_start = {
	value: current.u_csat_request.u_estimated_start.getDisplayValue()
};

gdt = new GlideDate();
gdt.setValue(expected_start.value);
expected_start.display_value = gdt.getByFormat("MM-dd-yyyy");

var expected_end = {
	value: current.u_csat_request.u_estimated_start.getDisplayValue()
};
gdt = new GlideDate();
gdt.setValue(expected_end.value);
expected_end.display_value = gdt.getByFormat("MM-dd-yyyy");

answer = {
	document_table: current.getTableName(),
	document: current.getUniqueValue(),
	number: {
		display_value: current.u_csat_request.number.toString(),
		value: current.u_csat_request.number.getDisplayValue()
	},
	requester: {
		display_value: current.u_requested_by.getDisplayValue(),
		value: current.u_requested_by.getDisplayValue()
	},
	account: {
		display_value: current.u_csat_request.u_account.name.toString(),
		value: current.u_csat_request.u_account.name.getDisplayValue()
	},
	account_territory: {
		display_value: current.u_csat_request.u_account.u_account_territory.u_name.toString(),
		value: current.u_csat_request.u_account.u_account_territory.u_name.getDisplayValue()
	},
	deployment: {
		display_value: current.u_csat_request.u_deployment.number.toString(),
		value: current.u_csat_request.u_deployment.number.getDisplayValue()
	},
	reason_type: {
		display_value: current.u_csat_request.u_reason_type.toString(),
		value: current.u_csat_request.u_reason_type.getDisplayValue()
	},
	justification: {
		display_value: current.u_csat_request.u_justification.toString(),
		value: current.u_csat_request.u_justification.getDisplayValue()
	},
	description_of_work: {
		display_value: current.u_csat_request.description.toString(),
		value: current.u_csat_request.description.getDisplayValue()
	},
	hours_requested: {
		display_value: current.u_csat_request.u_hours_requested.toString(),
		value: current.u_csat_request.u_hours_requested.getDisplayValue()
	},
	expected_start: expected_start,
	expected_end: expected_end,
	requested_date: requested_date
};]]&gt;&lt;/script&gt;&lt;state_field&gt;u_state&lt;/state_field&gt;&lt;sys_created_by&gt;lucas.schirm&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-05-09 00:53:23&lt;/sys_created_on&gt;&lt;sys_id&gt;10abc325db517740c8491bfa4b9619f4&lt;/sys_id&gt;&lt;sys_mod_count&gt;67&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;u_csat_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID","field_name":"number","default_filter":false},{"display":"Account","field_name":"account","default_filter":true},{"display":"CSat request Reason type","field_name":"reason_type","default_filter":false},{"display":"Justification","field_name":"justification","default_filter":false},{"display":"Hours requested","field_name":"hours_requested","default_filter":false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value=""&gt;f3595ba1db557740c8491bfa4b961941&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the WAR {number} for {requester}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="CSAT"&gt;ecf443e71312bf00a77d34228144b0cf&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-1538219661</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1b35eda91b20e4d42b58ec67bc4bcbc0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab78f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>u_csat_approvals</table><target_name>CSAT</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>4dc2066181b384d47a0fc52f51bb7f80</update_guid><update_guid_history>4dc2066181b384d47a0fc52f51bb7f80:-1538219661</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_81fe281cdbcf3a0404cef6c5ae9619d4</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="change_details_template"&gt;bd6f3030db515300300b575e5e96194c&lt;/card_template&gt;&lt;description&gt;Change Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001005&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=change_request^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="change_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
//var answer = false;
//var GApp = new GlideRecord(current.source_table);
//GApp.addQuery('assignment_group', '8a5055c9c61122780043563ef53438e3');
//GApp.addQuery('sys_id',current.document_id.toString());
//GApp.query();
var approvaltype = current.document_id.getDisplayValue().split(':');
var dtFormat = gs.getDateTimeFormat();
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),dtFormat);

var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};
var startGDT = new GlideDateTime();
startGDT.setDisplayValue(current.sysapproval.start_date.getDisplayValue(),dtFormat);
var start_date = {
	display_value : startGDT.getDisplayValue(),
	value : startGDT.getNumericValue()
};

var endGDT = new GlideDateTime();
endGDT.setDisplayValue(current.sysapproval.end_date.getDisplayValue(),dtFormat);
var end_date = {
	display_value : endGDT.getDisplayValue(),
	value : endGDT.getNumericValue()
};

var userGR = new GlideRecord("sys_user");
userGR.get("user_name",current.sys_created_by.toString());

answer = {
	number:{
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString()
	},
	approval_group:false,
	approval_type: approvaltype[0],
	created_by: current.sysapproval.u_task_for.getDisplayValue(),
	photo: current.sysapproval.u_task_for.photo.getDisplayValue(),
	requested_date: requested_date,
	request_reason: current.u_request_reason.getDisplayValue(),
	category:current.sysapproval.category.getDisplayValue(),
	type:current.sysapproval.type.getDisplayValue(),
	risk_value:current.sysapproval.risk_value.getDisplayValue(),
	priority:current.sysapproval.priority.getDisplayValue(),
	requester:current.sysapproval.requested_by.getDisplayValue(),
	assigned_to:current.sysapproval.assigned_to.getDisplayValue(),
	comment:current.comments,
	short_description:current.sysapproval.short_description.getDisplayValue(),
	description: getMultilineText(current.sysapproval.description.getDisplayValue()),
	start_date : start_date.display_value,
	end_date : end_date.display_value,
	imp_plan : getMultilineText(current.sysapproval.change_plan.getDisplayValue()),
	test_plan : getMultilineText(current.sysapproval.test_plan.getDisplayValue()),
	recovery_plan : getMultilineText(current.sysapproval.backout_plan.getDisplayValue()),
	change_test_plan:getMultilineText(current.sysapproval.change_test_plan.getDisplayValue()),
	change_impact:getMultilineText(current.sysapproval.change_impact.getDisplayValue()),
	document: current.document_id.toString(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : current.sysapproval.getDisplayValue(),
	title : 'Created By: ' + current.sysapproval.u_task_for.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state,
	assignment_group: current.sysapproval.assignment_group.getDisplayValue(),
	cmdb_ci: current.sysapproval.cmdb_ci.getDisplayValue(),
	risk_asmt: getRiskAssesment(current.sysapproval),
	approvers: getApprovers(current.sysapproval),
	task_cis: getAffectedCIs(current.sysapproval)
	
};
if (current.group)
{
	answer.approval_group = {
		display_value: current.group.assignment_group.getDisplayValue(),
		value: current.group.assignment_group.toString()
	};
}

function getMultilineText(text){
	var textMultiline = text.replace(/\n/g,'&lt;br&gt;');
	return textMultiline;
}


function getRiskAssesment(changeId){
	var asmtId;
	var riskAsmt = [];
	var taskAsmt = new GlideRecord("task_assessment");
    taskAsmt.addQuery('task',changeId);
    taskAsmt.query();
    if(taskAsmt.next()){
        asmtId = taskAsmt.getValue('instance');
    }
	
	var survey = new GlideRecord('survey_response');
	survey.addEncodedQuery('instance.sys_id='+asmtId+'^ORDERBYquestion');
	survey.query();
	while(survey.next()){
		var qnas = {};
		qnas.question = survey.getDisplayValue('question');
		qnas.response = survey.getValue('response');
		riskAsmt.push(qnas);
	}
	return riskAsmt;
}

function getApprovers(changeId){
	var approvalStatus = [];
	var appr = new GlideRecord('sysapproval_approver');
	appr.addEncodedQuery( 'sysapproval=' + changeId +'^state!=not_required^state!=not requested^state!=cancelled^ORDERBYDESCsys_updated_on');
	appr.query();
	while(appr.next()){
		var approver = {};
		approver.approver = appr.getDisplayValue('approver');
		approver.state = appr.getDisplayValue('state');
		approver.reason_for_request = appr.getValue('u_request_reason');
		approver.assignment_group = appr.group.assignment_group.getDisplayValue();
		approver.comments = appr.getValue('comments');
		approvalStatus.push(approver);
	}
	return approvalStatus;
}

function getAffectedCIs(changeId){
	var ciAffected = [];
	var ci = new GlideRecord('task_ci');
	ci.addEncodedQuery('task='+changeId);
	ci.query();
	while(ci.next()){
		var cmdb = new GlideRecord('cmdb_ci');
		cmdb.get(ci.getValue('ci_item'));
		var ciObj = {};
		ciObj.cmdb_ci = ci.getDisplayValue('ci_item');
		ciObj.ci_url = cmdb.getLink();
		ciObj.asset_tag = cmdb.asset_tag.getDisplayValue();
		ciObj.class_name = cmdb.sys_class_name.getDisplayValue();
		ciAffected.push(ciObj);
	}
	return ciAffected;
}

answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-26 07:14:41&lt;/sys_created_on&gt;&lt;sys_id&gt;81fe281cdbcf3a0404cef6c5ae9619d4&lt;/sys_id&gt;&lt;sys_mod_count&gt;89&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:48&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;change_request&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[
    {
        "display": "ID",
        "field_name": "number",
        "default_filter": false
    },
    {
        "display": "Submitted",
        "field_name": "requested_date",
        "default_filter": false
    },
    {
        "display": "Created By",
        "field_name": "requester",
        "default_filter": false
    },
    {
        "display": "Planned Start",
        "field_name": "start_date",
        "default_filter": true,
        "sort_by_value": true
    }
]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="change_list_template"&gt;e75ff8fcdb115300300b575e5e96191a&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the change {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Change Request"&gt;e7e4cfa71312bf00a77d34228144b0ae&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;requested_by&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-912306996</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1b35eda91b20e4d42b58ec67bc4bcbc3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab69f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Change Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>b4c20661bfb384d4302e549e99732a79</update_guid><update_guid_history>b4c20661bfb384d4302e549e99732a79:-912306996</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_fbe2c5f8dbf232006542d730cf96193f</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="default_detail_template"&gt;4326f6aedb091fc03d7958a8dc96193b&lt;/card_template&gt;&lt;description&gt;Default Approval&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001007&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table!=change_request^source_table!=sales_quote^source_table!=u_purchase_request^source_table!=kb_knowledge^source_table!=u_ap_invoice^source_table!=sn_compliance_policy^source_table!=sn_compliance_control^source_table!=sn_hr_core_case_total_rewards^source_table!=u_cl_task^source_table!=u_plan_marketing_event^source_table!=x_snc_my_travel_travel_request^source_table!=project_change_request^source_table!=sc_req_item^source_table!=sn_hr_core_case^source_table!=sn_hr_core_case_relations^source_table!=sn_hr_core_case_workforce_admin^source_table!=sn_hr_core_case_operations^source_table!=sn_hr_core_case_talent_management^source_table!=sn_hr_le_case^source_table!=u_work_order^source_table!=sn_lg_ops_request^source_table!=u_prm_deal_registration^source_table!=u_investment_request^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="change_request"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sales_quote"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_purchase_request"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="kb_knowledge"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_ap_invoice"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_compliance_policy"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_compliance_control"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_core_case_total_rewards"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_cl_task"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_plan_marketing_event"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="x_snc_my_travel_travel_request"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="project_change_request"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_core_case"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_core_case_relations"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_core_case_workforce_admin"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_core_case_operations"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_core_case_talent_management"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_hr_le_case"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_work_order"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="sn_lg_ops_request"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_prm_deal_registration"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="!=" or="false" value="u_investment_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
//var answer = false;
//var GApp = new GlideRecord(current.source_table);
//GApp.addQuery('assignment_group', '8a5055c9c61122780043563ef53438e3');
//GApp.addQuery('sys_id',current.document_id.toString());
//GApp.query();
var approvaltype = current.document_id.getDisplayValue().split(':');
var requested_date = current.sys_created_on.getDisplayValue().split(' ');
var title = '';
var due_date = new GlideDateTime();

due_date.setDisplayValue(current.sys_created_on.getDisplayValue(),gs.getDateFormat());
if(current.sysapproval.u_task_for.getDisplayValue()){
	 title = 'Requested For: ' + current.sysapproval.u_task_for.getDisplayValue();
}

answer = {
			     number:{
					 display_value: current.document_id.getDisplayValue(),
					 value: current.document_id.toString()
				 },
	            approval_group:false,
	            approval_type: approvaltype[0],
	            requester: current.sysapproval.u_task_for.getDisplayValue(),
	            photo: current.sysapproval.u_task_for.photo.getDisplayValue(),
	            requested_date: requested_date[0],
	            request_reason: current.u_request_reason.getDisplayValue(),
	            source_table: current.source_table.toString(),
	            document:current.document_id.toString(),
				due_date:due_date.getDate().getByFormat("MM/dd/YYYY"),
				task_type : approvaltype[0],
				display_field : current.document_id.getDisplayValue(),
				title : title,
				notActionable: current[inbox.state_field] != inbox.pending_state
	            
	  };
if (current.group)
	{
		answer.approval_group = {
			display_value: current.group.assignment_group.getDisplayValue(),
			value: current.group.assignment_group.toString()
		};
	}
answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-15 11:55:42&lt;/sys_created_on&gt;&lt;sys_id&gt;fbe2c5f8dbf232006542d730cf96193f&lt;/sys_id&gt;&lt;sys_mod_count&gt;79&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;priyarajan.nayak&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-03-04 19:29:35&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields/&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="default_list_template"&gt;72bffc4edb4d93c03d7958a8dc9619e7&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message/&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Default Approval"&gt;eaf40be71312bf00a77d34228144b069&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>1176942180</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1b35eda91b20e4d42b58ec67bc4bcbc6</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab8280000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Default Approval</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>45c2066121b384d4e690b69534e49186</update_guid><update_guid_history>45c2066121b384d4e690b69534e49186:1176942180</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>DELETE</action><application display_value="Approval Central">ca26b59bdb612b0094c2f7731d9619b1</application><category>customer</category><comments/><name>sys_atf_schedule_2ec87e6f1b734010f0f077f58d4bcbae</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_atf_schedule"&gt;&lt;sys_atf_schedule action="DELETE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;business_calendar/&gt;&lt;condition/&gt;&lt;conditional&gt;false&lt;/conditional&gt;&lt;description&gt;This schedule will perform the following actions:

Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&lt;/description&gt;&lt;entered_time/&gt;&lt;name&gt;CICD adhoc schedule&lt;/name&gt;&lt;run_as display_value="System Administrator"&gt;6816f79cc0a8016401c5a33be04be441&lt;/run_as&gt;&lt;run_as_tz/&gt;&lt;run_dayofmonth&gt;1&lt;/run_dayofmonth&gt;&lt;run_dayofweek/&gt;&lt;run_period/&gt;&lt;run_start&gt;2020-04-02 07:20:01&lt;/run_start&gt;&lt;run_time/&gt;&lt;run_type&gt;on_demand&lt;/run_type&gt;&lt;script&gt;&lt;![CDATA[new global.ScheduledTestProcessor().executeScheduledSuites('2ec87e6f1b734010f0f077f58d4bcbae');]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_atf_schedule&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_id&gt;2ec87e6f1b734010f0f077f58d4bcbae&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;CICD adhoc schedule&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_atf_schedule_2ec87e6f1b734010f0f077f58d4bcbae&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;time_zone/&gt;&lt;upgrade_safe&gt;false&lt;/upgrade_safe&gt;&lt;/sys_atf_schedule&gt;&lt;sys_update_version action="INSERT_OR_UPDATE"&gt;&lt;action&gt;INSERT_OR_UPDATE&lt;/action&gt;&lt;application display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/application&gt;&lt;file_path/&gt;&lt;instance_id&gt;098c0d52db194cd02f68c59705961960&lt;/instance_id&gt;&lt;instance_name&gt;surfgitdev1&lt;/instance_name&gt;&lt;name&gt;sys_atf_schedule_2ec87e6f1b734010f0f077f58d4bcbae&lt;/name&gt;&lt;payload&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;&amp;lt;record_update table="sys_atf_schedule"&amp;gt;&amp;lt;sys_atf_schedule action="INSERT_OR_UPDATE"&amp;gt;&amp;lt;active&amp;gt;true&amp;lt;/active&amp;gt;&amp;lt;business_calendar/&amp;gt;&amp;lt;condition/&amp;gt;&amp;lt;conditional&amp;gt;false&amp;lt;/conditional&amp;gt;&amp;lt;description&amp;gt;This schedule will perform the following actions:

Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&amp;lt;/description&amp;gt;&amp;lt;entered_time/&amp;gt;&amp;lt;name&amp;gt;CICD adhoc schedule&amp;lt;/name&amp;gt;&amp;lt;run_as display_value="System Administrator"&amp;gt;6816f79cc0a8016401c5a33be04be441&amp;lt;/run_as&amp;gt;&amp;lt;run_as_tz/&amp;gt;&amp;lt;run_dayofmonth&amp;gt;1&amp;lt;/run_dayofmonth&amp;gt;&amp;lt;run_dayofweek/&amp;gt;&amp;lt;run_period/&amp;gt;&amp;lt;run_start&amp;gt;2020-04-02 07:20:01&amp;lt;/run_start&amp;gt;&amp;lt;run_time/&amp;gt;&amp;lt;run_type&amp;gt;on_demand&amp;lt;/run_type&amp;gt;&amp;lt;script&amp;gt;&amp;lt;![CDATA[new global.ScheduledTestProcessor().executeScheduledSuites('2ec87e6f1b734010f0f077f58d4bcbae');]]&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;sys_class_name&amp;gt;sys_atf_schedule&amp;lt;/sys_class_name&amp;gt;&amp;lt;sys_created_by&amp;gt;admin&amp;lt;/sys_created_by&amp;gt;&amp;lt;sys_created_on&amp;gt;2020-04-02 07:20:01&amp;lt;/sys_created_on&amp;gt;&amp;lt;sys_id&amp;gt;2ec87e6f1b734010f0f077f58d4bcbae&amp;lt;/sys_id&amp;gt;&amp;lt;sys_mod_count&amp;gt;1&amp;lt;/sys_mod_count&amp;gt;&amp;lt;sys_name&amp;gt;CICD adhoc schedule&amp;lt;/sys_name&amp;gt;&amp;lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&amp;gt;ca26b59bdb612b0094c2f7731d9619b1&amp;lt;/sys_package&amp;gt;&amp;lt;sys_policy/&amp;gt;&amp;lt;sys_scope display_value="Approval Central"&amp;gt;ca26b59bdb612b0094c2f7731d9619b1&amp;lt;/sys_scope&amp;gt;&amp;lt;sys_update_name&amp;gt;sys_atf_schedule_2ec87e6f1b734010f0f077f58d4bcbae&amp;lt;/sys_update_name&amp;gt;&amp;lt;sys_updated_by&amp;gt;admin&amp;lt;/sys_updated_by&amp;gt;&amp;lt;sys_updated_on&amp;gt;2020-04-02 07:20:01&amp;lt;/sys_updated_on&amp;gt;&amp;lt;time_zone/&amp;gt;&amp;lt;upgrade_safe&amp;gt;false&amp;lt;/upgrade_safe&amp;gt;&amp;lt;/sys_atf_schedule&amp;gt;&amp;lt;/record_update&amp;gt;&lt;/payload&gt;&lt;payload_hash&gt;-1199068240&lt;/payload_hash&gt;&lt;record_name&gt;CICD adhoc schedule&lt;/record_name&gt;&lt;reverted_from/&gt;&lt;source&gt;e6347ff81bb380942b58ec67bc4bcb2c&lt;/source&gt;&lt;source_table&gt;sys_update_set&lt;/source_table&gt;&lt;state&gt;current&lt;/state&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_id&gt;eac83aa71bb34010f0f077f58d4bcb5c&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_recorded_at&gt;17139c2d25c0000001&lt;/sys_recorded_at&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;type&gt;Suite Schedule&lt;/type&gt;&lt;update_guid&gt;e2c83aa7b7b34010b863c49936e48b5c&lt;/update_guid&gt;&lt;update_guid_history&gt;e2c83aa7b7b34010b863c49936e48b5c:-1199068240,aec87e6fd5734010ababa9d9dbb4daaf:-979621354&lt;/update_guid_history&gt;&lt;/sys_update_version&gt;&lt;sys_metadata_delete action="INSERT_OR_UPDATE"&gt;&lt;sys_audit_delete/&gt;&lt;sys_class_name&gt;sys_metadata_delete&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_db_object display_value="" name="sys_atf_schedule"&gt;sys_atf_schedule&lt;/sys_db_object&gt;&lt;sys_id&gt;12f412a688864ba887bcafbd577bef10&lt;/sys_id&gt;&lt;sys_metadata&gt;2ec87e6f1b734010f0f077f58d4bcbae&lt;/sys_metadata&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;CICD adhoc schedule&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_parent/&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_scope_delete display_value=""&gt;c2527724e6664664b3ecf0c7a3924710&lt;/sys_scope_delete&gt;&lt;sys_update_name&gt;sys_atf_schedule_2ec87e6f1b734010f0f077f58d4bcbae&lt;/sys_update_name&gt;&lt;sys_update_version display_value="sys_atf_schedule_2ec87e6f1b734010f0f077f58d4bcbae"&gt;eac83aa71bb34010f0f077f58d4bcb5c&lt;/sys_update_version&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;/sys_metadata_delete&gt;&lt;/record_update&gt;</payload><payload_hash>682474954</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1f35eda91b20e4d42b58ec67bc4bcb74</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17139c2d4de0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table/><target_name>CICD adhoc schedule</target_name><type>Suite Schedule</type><update_domain>global</update_domain><update_guid>36c83aa7b2b3401026ba199e19e3b172</update_guid><update_guid_history>36c83aa7b2b3401026ba199e19e3b172:682474954,e2c83aa7b7b34010b863c49936e48b5c:-1199068240,aec87e6fd5734010ababa9d9dbb4daaf:-979621354</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_6f109fe1dbd17740c8491bfa4b961933</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;u_approver&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value=""&gt;8af9c092db91bb40c8491bfa4b9619a6&lt;/card_template&gt;&lt;description&gt;WAR&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;u_comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;false&lt;/no_request_field&gt;&lt;number&gt;UBOX0001010&lt;/number&gt;&lt;query table="u_war_approvals"&gt;u_state=Requested^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field&gt;u_requested_by&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var getFormatedDate = function(field_value) {
	gdt = new GlideDate();
	gdt.setValue(field_value);
	return  {
	   name: field_value,
	   display_value: gdt.getByFormat("MM-dd-yyyy")
	};
};

answer = {
	document_table: current.getTableName(),
	document: current.getUniqueValue(),
	number: {
		display_value: current.u_war_authorization.u_number.getDisplayValue(),
		value: current.u_war_authorization.u_number.toString()
	},
	approval: [],
	requester: {
	    display_value: current.u_requested_by.getDisplayValue(),
		value: current.u_requested_by.toString()
	},
	account:{
		display_value: current.u_war_authorization.u_account.name.getDisplayValue(),
		value: current.u_war_authorization.u_account.name.toString()
	},
	opportunity:{
		display_value: current.u_war_authorization.u_opportunity.name.getDisplayValue(),
		value: current.u_war_authorization.u_opportunity.name.toString()
	},
	opportunity_forecast_stage: {
		display_value: current.u_war_authorization.u_opportunity.stage.getDisplayValue(),
		value: current.u_war_authorization.u_opportunity.stage.toString()
	},
	opportunity_forecast_category: {
		display_value: current.u_war_authorization.u_opportunity.pipeline_status.getDisplayValue(),
		value: current.u_war_authorization.u_opportunity.pipeline_status.toString()
	},
	line_item: {
		display_value: current.u_war_authorization.u_line_item.getDisplayValue(),
		value: current.u_war_authorization.u_line_item.toString()
	},
	deployment: {
		display_value: current.u_war_authorization.u_deployment.number.getDisplayValue(),
		value: current.u_war_authorization.u_deployment.number.toString()
	},
	statement_of_work: {
		display_value: current.u_war_authorization.u_services_sales_approval.u_number.getDisplayValue(),
		value: current.u_war_authorization.u_services_sales_approval.u_number.toString()
	},
	total_value:{
		display_value: current.u_war_authorization.u_total_value_usd.getDisplayValue(),
		value: current.u_war_authorization.u_total_value_usd.toString()
	},
	total_hours:{
		display_value: current.u_war_authorization.u_total_hours.getDisplayValue(),
		value: current.u_war_authorization.u_total_hours.toString()
	},
	expected_close_date: getFormatedDate(current.u_war_authorization.u_expected_close_date),
	work_start_date: getFormatedDate(current.u_war_authorization.u_work_start_date),
	partner_will_be_used: {
		display_value: current.u_war_authorization.u_partner_will_be_used.getDisplayValue(),
		value: current.u_war_authorization.u_partner_will_be_used.toString()
	},
	approval_description: [],
	business_justification: {
		display_value: current.u_war_authorization.u_business_justification.getDisplayValue(),
		value: current.u_war_authorization.u_business_justification.toString()
	},
	approvers_required: [],
	state: {
		display_value: current.u_state.getDisplayValue(),
		value: current.u_state.toString()
	}
};

var grTC = new GlideRecord('u_war_approvals');
grTC.addQuery('u_war_authorization',current.u_war_authorization.sys_id);
grTC.query();
while (grTC.next()) {
	answer.approval.push(grTC.u_approver.getDisplayValue());
}

var grTC = new GlideRecord('u_war_approvals_required');
grTC.addQuery('u_war_authorization',current.u_war_authorization.sys_id);
grTC.query();
while (grTC.next()) {
	answer.approval_description.push(grTC.u_approval_description.getDisplayValue());
}

var grTC = new GlideRecord('u_war_approver_list');
grTC.addQuery('u_war_authorization',current.u_war_authorization.sys_id);
grTC.query();
while (grTC.next()) {
	answer.approvers_required.push(grTC.u_approver.getDisplayValue());
}]]&gt;&lt;/script&gt;&lt;state_field&gt;u_state&lt;/state_field&gt;&lt;sys_created_by&gt;lucas.schirm&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-05-09 01:08:34&lt;/sys_created_on&gt;&lt;sys_id&gt;6f109fe1dbd17740c8491bfa4b961933&lt;/sys_id&gt;&lt;sys_mod_count&gt;36&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;u_war_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID","field_name":"number","default_filter":false},{"display":"Account","field_name":"account","default_filter":true},{"display":"Opportunity Forecast Stage","field_name":"opportunity_forecast_stage","default_filter":false},{"display":"Total Value (USD)","field_name":"total_value","default_filter":false},{"display":"Total Hours","field_name":"total_hours","default_filter":false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value=""&gt;4915937ddb9df740c8491bfa4b961910&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the WAR {number} for {requester}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="WAR"&gt;0df407e71312bf00a77d34228144b031&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-1404163004</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1f35eda91b20e4d42b58ec67bc4bcbc2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab9a30000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>u_war_approvals</table><target_name>WAR</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>4dc20661a7b384d4b8cdcad2dcb495b6</update_guid><update_guid_history>4dc20661a7b384d4b8cdcad2dcb495b6:-1404163004</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_dce07cdddb3e1700ae4cdda5ca9619f3</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;true&lt;/advanced_update_script&gt;&lt;assigned_field&gt;manager&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value="default_detail_timeoff_template"&gt;478708ecdbd0a740300b575e5e961950&lt;/card_template&gt;&lt;description&gt;Time Off Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001007&lt;/number&gt;&lt;query table="x_snc_time_off_request"&gt;state=Requested^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field&gt;requester&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example

answer = {
    document_table: current.getTableName(),
    document_id: current.sys_id.toString(),
    number: {
        display_value: current.number.getDisplayValue(),
        value: current.number.toString(),
    },
    requester: {
        display_value: current.requester.getDisplayValue(),
        value: current.requester.toString()
    },
    start_date: {
        display_value: current.start_date.getDisplayValue(),
        value: current.start_date.toString()
    },
    end_date: {
        display_value: current.end_date.getDisplayValue(),
        value: current.end_date.toString()
    },
    days_off: {
        display_value: current.days_off.getDisplayValue(),
        value: current.days_off.toString()
    },
    reason: {
        display_value: current.reason.getDisplayValue(),
        value: current.reason.toString()
    },
    due_date: '',
    task_type: 'Request for ' + current.type.getDisplayValue(),
    display_field: current.requester.getDisplayValue(),
    title: current.start_date.display_value + ' - ' + current.end_date.display_value,
    notActionable: current[inbox.state_field] != inbox.pending_state
};
answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;nicholas.yang&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-06-18 16:07:55&lt;/sys_created_on&gt;&lt;sys_id&gt;dce07cdddb3e1700ae4cdda5ca9619f3&lt;/sys_id&gt;&lt;sys_mod_count&gt;24&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;x_snc_time_off_request&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){
	var stateValue = updateObject[updateObject['state_field']];
	if (stateValue == 'Approved') {
		newValue.state = 'Approved';
		oldValue.state = 'Requested';
		current.setValue('state','Approved');
	}
	if (stateValue =='Rejected') {
		newValue.state = 'Rejected';
		oldValue.state = 'Requested';
		current.setValue('state','Rejected');
	}
	current.comments = updateObject.comments;
	current.update();
})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;x_snc_time_off_request&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"Requester", "field_name": "requester", "default_filter" : true},{"display":"Time Off start", "field_name": "start_date", "default_filter" : false},{"display":"Time Off end", "field_name": "end_date", "default_filter" : false},{"display":"Total Days", "field_name": "days_off", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="timeoff_list_template"&gt;a027b3a91b272b40dce686e8cd4bcbf1&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the time off for {requester} &lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Time Off Request"&gt;0fe48fa71312bf00a77d34228144b0a5&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;requester&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>496849874</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>1f35eda91b20e4d42b58ec67bc4bcbc5</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab7d50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>x_snc_time_off_request</table><target_name>Time Off Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>01c2066133b384d4af7a799dd1ab5f83</update_guid><update_guid_history>01c2066133b384d4af7a799dd1ab5f83:496849874</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_344570c7db1048d080d479fdae9619e4</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="stock_preappr_detail_template"&gt;7bbcf88fdb5048d080d479fdae961973&lt;/card_template&gt;&lt;description&gt;Stock Pre-approval Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001004&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sn_lg_ops_request^sysapproval.ref_sn_lg_ops_request.lg_category=8a320d28b7603300a75124f8de11a9c4^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sn_lg_ops_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var transactionType = '';
var lReq = new GlideRecord('sn_lg_ops_request');
lReq.get(current.sysapproval);
if (lReq.isValid())
    transactionType = lReq.variable_pool['transaction_type'].getDisplayValue();



var approvaltype = current.document_id.getDisplayValue().split(':');
var requested_date = current.sys_created_on.getDisplayValue().split(' ');
var title = '';
var due_date = new GlideDateTime();
due_date.setDisplayValue(current.sys_created_on.getDisplayValue(), gs.getDateFormat());
if (current.sysapproval.u_task_for.getDisplayValue()) {
    title = 'Requested For: ' + current.sysapproval.u_task_for.getDisplayValue();
}

answer = {
    number: {
        display_value: current.document_id.getDisplayValue(),
        value: current.document_id.toString()
    },
    approval_group: false,
    approval_type: approvaltype[0],
    requester: current.sysapproval.u_task_for.getDisplayValue(),
    transaction_type: transactionType,
    photo: current.sysapproval.u_task_for.photo.getDisplayValue(),
    requested_date: requested_date[0],
    request_reason: current.u_request_reason.getDisplayValue(),
    source_table: current.source_table.toString(),
    document: current.document_id.toString(),
    due_date: due_date.getDate().getByFormat("MM/dd/YYYY"),
    task_type: approvaltype[0],
    display_field: current.document_id.getDisplayValue(),
    title: title,
    notActionable: current[inbox.state_field] != inbox.pending_state

};
if (current.group) {
    answer.approval_group = {
        display_value: current.group.assignment_group.getDisplayValue(),
        value: current.group.assignment_group.toString()
    };
}
answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;thameem.mohammad&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-10-09 08:48:38&lt;/sys_created_on&gt;&lt;sys_id&gt;344570c7db1048d080d479fdae9619e4&lt;/sys_id&gt;&lt;sys_mod_count&gt;11&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;thameem.mohammad&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-11 08:31:12&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Created By", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="stock_preappr_list_template"&gt;69cb704fdb5048d080d479fdae9619f9&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the Legal request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Stock Pre-approval Request"&gt;b35a094bdb1448d080d479fdae9619e7&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>2116667532</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5335eda91b20e4d42b58ec67bc4bcbc1</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab60f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Stock Pre-approval Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>f4c2066195b384d4ea0529862b1d8172</update_guid><update_guid_history>f4c2066195b384d4ea0529862b1d8172:2116667532</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_8ff3a6f7dbe34340a0885e77dc96195f</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="project_change_details_template"&gt;cdbe3127dbc1d7000d0e540adc961929&lt;/card_template&gt;&lt;description&gt;Project Change Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001021&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=project_change_request^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="project_change_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
try{
	var approvaltype = current.document_id.getDisplayValue().split(':');
	var reqGDT = new GlideDateTime();
	reqGDT.setDisplayValue(current.getDisplayValue("sys_created_on"),gs.getDateTimeFormat());
	
	var ddGDT = new GlideDateTime();
	if(!current.sysapproval.due_date.nil()){
		ddGDT.setDisplayValue(current.sysapproval.due_date.getDisplayValue(),gs.getDateFormat());
	}

	var desc = current.sysapproval.description.getDisplayValue();
	var description;
	var desc_str = desc.toString();
	var desc_len = desc_str.length;
	var desc_length = parseInt(desc_len);
	if(desc_length &lt;= 200)
	{
		description = current.sysapproval.description.getDisplayValue();
	}
	else
	{
		description = desc_str.substring(0,199)+"...";
	}

	var BJ = current.document_id.business_justification.getDisplayValue();

	var business_justification;
	var BJ_str = BJ.toString();
	var BJ_len = BJ_str.length;
	var BJ_length = parseInt(BJ_len);
	if(BJ_length &lt;= 100)
	{
		business_justification = current.sysapproval.business_justification.getDisplayValue();
	}
	else
	{
		business_justification = BJ_str.substring(0,99)+"...";
	}

	var proj_name = current.sysapproval.parent.short_description.getDisplayValue();

	answer = {
		number:{
			display_value: current.sysapproval.parent.getDisplayValue(),
			value: current.sysapproval.parent.toString()
		},
		requested_date: {
			display_value : reqGDT.getLocalDate().getDisplayValue(),
			value : reqGDT.getNumericValue()
		},
		due_date:current.sysapproval.due_date.nil() ? false : {
			display_value : ddGDT.getLocalDate().getDisplayValue(),
			value : ddGDT.getNumericValue()
		},
		category:current.sysapproval.category.getDisplayValue(),
		impact:current.sysapproval.impact.getDisplayValue(),
		priority:current.sysapproval.priority.getDisplayValue(),
		short_description:current.sysapproval.short_description.getDisplayValue(),
		description:description,
		business_justification:business_justification,
		project_name:proj_name,
		document:current.document_id.sys_id.getDisplayValue(),		
		task_type : approvaltype[0],
		display_field : current.sysapproval.parent.getDisplayValue(),
		title : proj_name,
		notActionable: current[inbox.state_field] != inbox.pending_state

	};
}
catch(e)
{
	//gs.addInfoMessage(e);
}

answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;balamuru.balamurugan&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-01-16 05:27:17&lt;/sys_created_on&gt;&lt;sys_id&gt;8ff3a6f7dbe34340a0885e77dc96195f&lt;/sys_id&gt;&lt;sys_mod_count&gt;68&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Project Name", "field_name": "project_name", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="project_change_list_template"&gt;bc9d7776db4593043d7958a8dc9619e9&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the project change request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Project Change Request"&gt;19f447e71312bf00a77d34228144b02d&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-389439866</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5335eda91b20e4d42b58ec67bc4bcbc4</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eabaea0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Project Change Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>09c2066179b384d4e149426d800706e8</update_guid><update_guid_history>09c2066179b384d4e149426d800706e8:-389439866</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_014465e0db694010beb14408059619cc</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="chase_details_template"&gt;1c307924db2d4010beb1440805961969&lt;/card_template&gt;&lt;description&gt;Chase Center Suite Approval&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;false&lt;/no_request_field&gt;&lt;number&gt;UBOX0001007&lt;/number&gt;&lt;query table="x_snc_chase_surf_event_approvals"&gt;state=requested^reservationISNOTEMPTY^reservation.statusINlevel_1_approval,level_2_approval^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;reservation.requestor&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[try {
	
	var due_date = new GlideDateTime();
    due_date.setDisplayValue(current.sys_created_on.getDisplayValue(), gs.getDateFormat());
	
    var answer = {
        document_table: current.getTableName(),
        document_id: current.getUniqueValue(),
        number: {
            display_value: current.reservation.number.getDisplayValue(),
            value: current.reservation.number.getDisplayValue()
        }
    };

    answer.name = {
        display_value: current.reservation.event.title.getDisplayValue(),
        value: current.reservation.event.title.getDisplayValue()
    };

    answer.status = {
        display_value: current.reservation.status.getDisplayValue(),
        value: current.reservation.status.getDisplayValue()
    };

    answer.event_title = {
        display_value: current.reservation.event.title.getDisplayValue(),
        value: current.reservation.event.title.getDisplayValue()
    };

    answer.event_date_time = {
        display_value: current.reservation.event.event_date_time.getDisplayValue(),
        value: current.reservation.event.event_date_time.getDisplayValue()
    };

    answer.ticket_cost = {
        display_value: current.reservation.event.ticket_cost.getDisplayValue(),
        value: current.reservation.event.ticket_cost.getDisplayValue()
    };

    answer.tickets_requested = {
        display_value: current.reservation.tickets_requested.getDisplayValue(),
        value: current.reservation.tickets_requested.getDisplayValue()
    };

    answer.event_host = {
        display_value: current.reservation.event_host.getDisplayValue(),
        value: current.reservation.event_host.getDisplayValue()
    };

    answer.requestor = {
        display_value: current.reservation.requestor.getDisplayValue(),
        value: current.reservation.requestor.getDisplayValue()
    };

    answer.event_details = {
        display_value: current.reservation.event.event_details.getDisplayValue(),
        value: current.reservation.event.event_details.getDisplayValue()
    };

    answer.event_location = {
        display_value: current.reservation.event.event_location.getDisplayValue(),
        value: current.reservation.event.event_location.getDisplayValue()
    };
	
    answer.requested_date = {
        display_value: due_date.getDisplayValue(),
        value: due_date.getDisplayValue()
    };
	
	answer.attendees = [];
	answer.approvers = [];
	
	var gr = new GlideRecord('x_snc_chase_surf_event_attendees');
	gr.addQuery('reservation', current.reservation.sys_id);
	gr.query();
	
	while(gr.next()) {
		answer.attendees.push({
			attendee_type: {
				display_value: gr.attendee_type.getDisplayValue(),
				value: gr.attendee_type.getDisplayValue()
			},
			name:  {
				display_value: gr.name.getDisplayValue(),
				value: gr.name.getDisplayValue()
			},
			email:  {
				display_value: gr.email.getDisplayValue(),
				value: gr.email.getDisplayValue()
			},
			company:  {
				display_value: gr.company.getDisplayValue(),
				value: gr.company.getDisplayValue()
			}
		});
	}
	
	var grApprovals = new GlideRecord('x_snc_chase_surf_event_approvals');
	var qrQuery = grApprovals.addQuery('reservation', current.reservation.sys_id);
	qrQuery.addOrCondition('reservation', current.reservation.sys_id);
	grApprovals.query();
	
	while(grApprovals.next()) {
		answer.approvers.push({
			state: {
				display_value: grApprovals.state.getDisplayValue(),
				value: grApprovals.state.getDisplayValue()
			},
			approver:  {
				display_value: grApprovals.approver.getDisplayValue(),
				value: grApprovals.approver.getDisplayValue()
			},
			approval_type:  {
				display_value: grApprovals.approval_type.getDisplayValue(),
				value: grApprovals.approval_type.getDisplayValue()
			}
		});
	}
	
} catch (e) {
    //gs.addInfoMessage(e.toString());
}]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;lucas.schirm&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-12-02 21:18:19&lt;/sys_created_on&gt;&lt;sys_id&gt;014465e0db694010beb14408059619cc&lt;/sys_id&gt;&lt;sys_mod_count&gt;37&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;x_snc_chase_surf_event_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,4fff9fc5db654010beb14408059619c8,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID","field_name":"number","default_filter":true},{"display":"Event Title","field_name":"event_title","default_filter":false},{"display":"When","field_name":"event_date_time","default_filter":false},{"display":"Ticket Cost","field_name":"ticket_cost","default_filter":false},{"display":"Tickets Requested","field_name":"tickets_requested","default_filter":false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="chase_template"&gt;cbefa5e0db2d4010beb1440805961966&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the Chase Center Suite Approval {number} for {requestor}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value=""&gt;5ecebde31bb40c503d2f65b82d4bcb3c&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-2006568606</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5735eda91b20e4d42b58ec67bc4bcb75</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab8b80000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>x_snc_chase_surf_event_approvals</table><target_name>Chase Center Suite Approval</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>85c20661d2b384d4cad75c8fa17911af</update_guid><update_guid_history>85c20661d2b384d4cad75c8fa17911af:-2006568606</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_0eb30b6cdb221340b454f33eae9619d1</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;false&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="catalog_firefighter_detail_template"&gt;954d101fdb0993000d0e540adc961985&lt;/card_template&gt;&lt;description&gt;Request Systems Access for New Hire&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001007&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sc_req_item^sysapproval.ref_sc_req_item.cat_item=c95758d4db75078023f75e77dc96192b^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="=" or="false" value="c95758d4db75078023f75e77dc96192b"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var temp = new global.GetVariablePool();
var pr = temp.getVarPool(current.sysapproval);
var vpool= JSON.parse(pr);
var approvaltype = current.document_id.getDisplayValue().split(':');
var dtFormat = gs.getDateTimeFormat();
var gdt = new GlideDateTime();
var startGDT = new GlideDateTime();
var endGDT = new GlideDateTime();

gdt.setDisplayValue(current.getValue('sys_created_on'),dtFormat);
startGDT.setDisplayValue(vpool.StartDate,dtFormat);
endGDT.setDisplayValue(vpool.EndDate,dtFormat);

var requested_date = {
	display_value : gdt.getLocalDate().UTCValue,
	value : gdt.getNumericValue()
};
var startDate = {
	display_value : startGDT.getLocalDate().UTCValue,
	value : startGDT.getNumericValue()
};
var endDate = {
	display_value : endGDT.getLocalDate().UTCValue,
	value : endGDT.getNumericValue()
};

answer = {
	number:{
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString(),	
	},
	requested_date: requested_date,
	short_description:current.sysapproval.short_description.getDisplayValue(),
	document_id:current.document_id.toString(),
	document_table:current.source_table.toString(),
	name: current.document_id.cat_item.name.toString(),
	requested_for: current.document_id.u_requested_for.getDisplayValue(),
	StartDate: startDate,
	EndDate: endDate,
	requested_role: vpool.requested_role,
	ReasonForRequest: vpool.ReasonForRequest,
	task_number: vpool.task_number,
	reason: vpool.reason,
	confirmation: vpool.confirmation,
	requester: current.sysapproval.opened_by.getDisplayValue(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : current.sysapproval.getDisplayValue(),
	title : 'Submitted For:  ' + current.sysapproval.opened_by.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state
};



answer;



]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;himanshu.sharma&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-06-04 08:34:02&lt;/sys_created_on&gt;&lt;sys_id&gt;0eb30b6cdb221340b454f33eae9619d1&lt;/sys_id&gt;&lt;sys_mod_count&gt;11&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;lucas.schirm&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-12-02 20:01:53&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true},{"display":"Requested For", "field_name": "requested_for", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="catalog_firefighter_list_template"&gt;e47d3bf2db4593043d7958a8dc961985&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the surf firefighter access for request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen/&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>17261593</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5735eda91b20e4d42b58ec67bc4bcbc0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab8fb0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Request Systems Access for New Hire</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>01c2066191b384d43da551f832b3d1b1</update_guid><update_guid_history>01c2066191b384d43da551f832b3d1b1:17261593</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_76a88514db4ed3407f6cf4b5ae961944</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="concur_expense_detail_template"&gt;82c85697db6e57407f6cf4b5ae96191d&lt;/card_template&gt;&lt;description&gt;Concur Expense Manager Approval&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001005&lt;/number&gt;&lt;query table="x_snc_uni_inbox_universal_box_external_approvals"&gt;universal_inbox=76a88514db4ed3407f6cf4b5ae961944^state=requested^EQ&lt;item display_table="universal_inbox" display_value="Concur Expense Manager Approval" endquery="false" field="universal_inbox" goto="false" newquery="false" operator="=" or="false" value="76a88514db4ed3407f6cf4b5ae961944"/&gt;&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
	
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[/**
 * Author : Milap Shah 03/09
 * Description : template to handle external integrations
 * Use the payload field which is already a JSON payload received from concur
 * Use this field to build the answer for the template to use
**/

var payload = current.payload;
var payloadObj = new global.JSON().decode(payload);

//Update Total Claimedamount to 2 decimal
payloadObj.TotalClaimedAmount = parseFloat(payloadObj.TotalClaimedAmount).toFixed(2);

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'), gs.getDateTimeFormat());
var requested_date = {
    display_value: gdt.getLocalDate().getDisplayValue(),
    value: gdt.getNumericValue()
};

var expenseEntries = [];
//In case of single reciept
if (undefined == payloadObj.ExpenseEntriesList.ExpenseEntry.length)
	expenseEntries.push(payloadObj.ExpenseEntriesList.ExpenseEntry);
//In case of multiple reciept
else {
	expenseEntries = payloadObj.ExpenseEntriesList.ExpenseEntry;
}

//Get Transaction Date and Receipt Attachment URL
var receiptCounter = 1;
expenseEntries = expenseEntries.map(function(f) {
	
	//Calculate transaction date
	var tranGdt = new GlideDateTime();
	tranGdt.setDisplayValue(f.TransactionDate.split('T')[0]);
	f.TransactionDate = tranGdt.getLocalDate().getDisplayValue();
	
	//Update Total Claimedamount to 2 decimal
	f.PostedAmount = parseFloat(f.PostedAmount).toFixed(2);
	
	//Get Attachment URL for each expense entry
	var attachmentObj = getAttachment(current.getValue('external_case_number') + '_' + f.ReportEntryID); //V1.1 RpeKey
	f.attachment = {
		url : "/sys_attachment.do?sysparm_referring_url=tear_off&amp;view=true&amp;sys_id=" + attachmentObj.getValue('sys_id'),
		name : 'LINK'
	};
	return f;
});

answer = {
	approver: {
		display_value : current.getDisplayValue('approver'),
		value : current.getValue('approver')
	},
	requested_date:requested_date,
	external_case_number:current.getValue('external_case_number'),
	approvalType : "Concur Expense",
	state: current.getValue('state'),
	requester: current.getDisplayValue('requestor'),
	photo: current.requestor.photo.getDisplayValue(),
	comment:current.comments,
	document: current.document_id.toString(),
	payload: payloadObj,
	expenseEntries: expenseEntries
	
};


function getAttachment(name) {
	var attachmentGr = new GlideRecord('sys_attachment');
	attachmentGr.addEncodedQuery('table_sys_id=' + current.getValue('sys_id') + '^file_name=' + name);
	attachmentGr.query();
	attachmentGr.next();
	return attachmentGr;
}

answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;milap.shah&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-05-09 08:28:45&lt;/sys_created_on&gt;&lt;sys_id&gt;76a88514db4ed3407f6cf4b5ae961944&lt;/sys_id&gt;&lt;sys_mod_count&gt;1458&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;x_snc_uni_inbox_universal_box_external_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;x_snc_uni_inbox_universal_box_external_approvals&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;true&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"Requestor", "field_name": "requester", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;![CDATA[(function (eventGr, logUtil) {
	/**
 	* Usage of variables:
 	* eventGr - created event record to use from
 	* logUtil.debug - Debugging
 	* logUtil.info - Information
 	* logUtil.warn - Warning
 	* logUtil.error - Error
 	* result - Set result variable to the state and response you want to display on the event record
 	**/

    /*var reportSummary = JSON.parse(eventGr.payload);
    var reportDetail = JSON.parse(eventGr.input_payload);
    var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
    var userGr = new GlideRecord('sys_user');
    userGr.get('email', reportSummary.ReportDetails.UserLoginID);

    var appGr = new GlideRecord('sys_user');
    appGr.get('email', reportDetail.ApproverLoginID);

    approvalGr.initialize();
    approvalGr.requestor = userGr.getValue('sys_id');
    approvalGr.universal_inbox = eventGr.universal_inbox;
    approvalGr.external_case_number = reportSummary.ReportDetails.ReportID;
    approvalGr.state = 'requested';
    approvalGr.payload = eventGr.payload;
    approvalGr.approver = appGr.getValue('sys_id');
    approvalGr.custom_field_1 = 'Milap Test';
    approvalGr.insert();
    result = 'processed';
    resultRecord = approvalGr.getValue('sys_id');*/



	/* Author : Milap 03/07
 	** Use eventGr object to access the event record associated
 	*
 	* Concur API has several steps and it is quite different than other APis.Here are the steps
 	* Step 1: Surf Gets initial notification saying there is an expense report with the Object URI
 	* Step 2: Take the Object URI from the first call and use it to get the next Action URL (Remember this URL will be used everytime you want to get next action.We have to store it somewhere).
 	* Step 3: Take the WorkflowAction URL from the call response from Step 2 and use post to complete "External validation stage"
 	* Step 4: Use the same Object URI to get the next workflow action URL
 	* Step 5: Create external approval record
 	*/

	//Start Parsing and store it in the Universal Inbox - Events table


	var xmlDoc = new XMLDocument2();
	xmlDoc.parseXML(eventGr.input_payload);
	result = 'error';
	var reportId;
	var responseBody;

	//Step 1: Handling the initial event coming from concur - Start
	try {
		if ("Report Entered Expense Report Workflow Step - EXTERNAL VALIDATION - SUBMIT" == eventGr.event_type) {

			//Step 2 - Get Object URI
			var requestUri = xmlDoc.getNodeText('Notification/ObjectURI');
			responseBody = _getNextWorkflowAction(requestUri);
			if (global.JSUtil.notNil(responseBody)) {
				xmlDoc = new XMLDocument2();
				xmlDoc.parseXML(responseBody);

				//Step 3 : Take the Workflow action URL and pass the external validation stage of expense report
				var actionUri = xmlDoc.getNodeText('ReportDetails/WorkflowActionURL');
				reportId = xmlDoc.getNodeText('ReportDetails/ReportId');
				responseBody = _executeWorkflowAction(actionUri, 'Approve', 'External Validation Successful'); // Status and comments

				//Update Request URI to V2.0 API for better response
				var host = requestUri.match(/https:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
				requestUri = host[0] + '/api/expense/expensereport/v2.0/report/' + reportId;

				if (global.JSUtil.notNil(responseBody)) {

					//Step 4: Get the same ObjectURL to get the next workflow Action URL
					responseBody = _getNextWorkflowAction(requestUri);
					if (global.JSUtil.notNil(responseBody)) {

						xmlDoc = new XMLDocument2();
						xmlDoc.parseXML(responseBody);

						//Step 5: Create external approval record - Start
						var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
						var userGr = new GlideRecord('u_employee');
						userGr.addEncodedQuery('active=true^email=' + xmlDoc.getNodeText('ReportDetails/UserLoginID'));
						userGr.query();
						if (userGr.next()) {
							//Mark Any duplicate approval as no londer required record in case of recall
							deactivateDuplicate(xmlDoc.getNodeText('ReportDetails/ReportID'));

							approvalGr.initialize();
							approvalGr.requestor = userGr.getValue('sys_id');
							approvalGr.universal_inbox = eventGr.universal_inbox;
							approvalGr.external_case_number = xmlDoc.getNodeText('ReportDetails/ReportID'); // Need to change with V1.1 ReportId
							approvalGr.state = 'requested';
							approvalGr.payload = universalBoxExternalUtil.xmlToJSON(xmlDoc.toString());
							approvalGr.response_error = responseBody;

							//Add Custom fields to display on the reports
							approvalGr.custom_field_1 = xmlDoc.getNodeText('ReportDetails/ReportName');
							approvalGr.custom_field_2 = userGr.getValue('name');
							approvalGr.custom_field_3 = xmlDoc.getNodeText('ReportDetails/Purpose');
							approvalGr.custom_field_4 = formatDate(xmlDoc.getNodeText('ReportDetails/CreationDate'));
							approvalGr.custom_field_5 = parseFloat(xmlDoc.getNodeText('ReportDetails/TotalClaimedAmount')).toFixed(2) + ' ' + xmlDoc.getNodeText('ReportDetails/CurrencyCode');
							approvalGr.approver = userGr.getValue('manager');
							approvalGr.insert();

							//Attach Receipts
							// 1.1 _attachEntryReceipts(approvalGr); // This method will consolidate all the receipts and attach one PDF with all receipts
							_attachEntryReceipts_2(approvalGr); //2.0

							//set event to Processed
							result = 'processed';
							resultRecord = approvalGr.getValue('sys_id');
						}
						else {
							result = 'ignored';
							logUtil.info('Event is ignored as no approver is found in Surf');
						}

						//var imageURL = xmlDoc.getNodeText('ReportDetails/ReceiptImageUrl'); // This gives the image URL for expense report


					}
				}

			}
		}

		else if ("Report Entered Expense Report Workflow Step - MANAGER APPROVAL" == eventGr.event_type) {

			//In case where report is approved from Concur directly this case will mark the approval as no longer required.
			//Step 2 - Get Object URI
			var requestUri = xmlDoc.getNodeText('Notification/ObjectURI');
			responseBody = _getNextWorkflowAction(requestUri);

			xmlDoc = new XMLDocument2();
			xmlDoc.parseXML(responseBody);
			var external_case_number = xmlDoc.getNodeText('ReportDetails/ReportId'); // Need to change with V1.1 ReportId

			var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
			approvalGr.addEncodedQuery('state=requested^external_case_number=' + external_case_number);
			approvalGr.query();
			if (approvalGr.next()) {
				if (_checkForOutboundEvent(approvalGr)) {
					result = 'ignored';
					logUtil.info('Event is ignored as approval is done from surf');
				}
				else {
					approvalGr.state = 'not_required';
					approvalGr.comments = 'Either Approved/Rejected/Recalled in Concur';
					approvalGr.update();
					result = 'processed';
					resultRecord = approvalGr.getValue('sys_id');
					logUtil.info(approvalGr.comments);
				}

			} else {
				result = 'ignored';
				logUtil.info('Event is ignored as approval is done from surf');
			}
		}

		else {
			result = 'ignored';
			logUtil.error('Event Type Not Supported and Ignored');
		}
		//Send Notification on failure
		if ('error' == result)
			gs.eventQueue("x_snc_uni_inbox.concur.event.failure", eventGr);
		
	} catch (err) {
		logUtil.error('Exception:' + err.getMessage());
	}
	//Step 1: Handling the initial event coming from concur - End


	function _buildWorkflowActionBody(action, comments) {

		var requestBody = "&lt;WorkflowAction xmlns=\"http://www.concursolutions.com/api/expense/expensereport/2011/03\"&gt;";
		requestBody += "&lt;Action&gt;" + action + "&lt;/Action&gt;";
		requestBody += "&lt;Comment&gt;" + comments + "&lt;/Comment&gt;";
		requestBody += "&lt;/WorkflowAction&gt;";

		return requestBody;
	}


	function _executeWorkflowAction(workflowURI, action, comment) {

		//Setup the request
		var r = new sn_ws.RESTMessageV2(universalBoxExternalUtil.CONCUR_REST, 'executeWorkflowAction');
		r.setRequestHeader('User-Agent', '');
		r.setEndpoint(workflowURI);
		r.setAuthenticationProfile('oauth2', '7f17f348dbf01704d255f6c5ae9619c9');
		r.setRequestBody(_buildWorkflowActionBody(action, comment));

		//Prepare the response
		var response = r.execute();
		var responseBody = response.getBody();
		var httpStatus = response.getStatusCode();

		if (httpStatus == 200) {
			logUtil.info('_executeWorkflowAction:' + responseBody);
			return responseBody;
		}
		else {
			logUtil.warn('_executeWorkflowAction:' + responseBody);
			return null;
		}
	}

	function _checkForOutboundEvent(approvalGr) {
		var externalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
		externalGr.addEncodedQuery("type=outbound^state=processed^approval_record=" + approvalGr.getValue('sys_id'));
		externalGr.query();
		if (externalGr.next())
			return true;
		return false;
	}

	function _getNextWorkflowAction(objectURI) {

		//Setup the request
		var r = new sn_ws.RESTMessageV2(universalBoxExternalUtil.CONCUR_REST, 'getWorkflowAction');
		r.setRequestHeader('User-Agent', '');
		r.setEndpoint(objectURI);
		r.setAuthenticationProfile('oauth2', '7f17f348dbf01704d255f6c5ae9619c9');

		//Prepare the response
		var response = r.execute();
		var responseBody = response.getBody();
		var httpStatus = response.getStatusCode();

		if (httpStatus == 200) {
			logUtil.info('_getNextWorkflowAction:' + responseBody);
			return responseBody;
		}
		else {
			logUtil.warn('_getNextWorkflowAction:' + responseBody);
			return null;
		}

	}

	function _attachEntryReceipts_2(approvalGr) {

		var requestDetails = approvalGr.getValue('payload');
		var parser = new global.JSONParser();
		var reportPayload = parser.parse(requestDetails);
		var expenseEntries = [];
		var expenseEntryGr;

		//In case of single reciept
		if (undefined == reportPayload.ExpenseEntriesList.ExpenseEntry.length)
			expenseEntries.push(reportPayload.ExpenseEntriesList.ExpenseEntry);
		//In case of multiple reciept
		else {
			expenseEntries = reportPayload.ExpenseEntriesList.ExpenseEntry;
		}

		//Get image for all expense Entries
		var xmlDoc1 = new XMLDocument2();
		for (var key in expenseEntries) {

			//get each expense entry
			var entryId = expenseEntries[key].ReportEntryID;
			var fileName = approvalGr.external_case_number + '_' + entryId;

			//Create expense entries
			expenseEntryGr = new GlideRecord('x_snc_uni_inbox_expense_line_items');
			expenseEntryGr.initialize();
			expenseEntryGr.custom_field_1 = expenseEntries[key].ExpenseTypeName;
			expenseEntryGr.custom_field_2 = parseFloat(expenseEntries[key].PostedAmount).toFixed(2) + ' ' + reportPayload.CurrencyCode;
			expenseEntryGr.custom_field_3 = expenseEntries[key].VendorDescription;
			expenseEntryGr.custom_field_4 = expenseEntries[key].LocationName;
			expenseEntryGr.custom_field_5 = formatDate(expenseEntries[key].TransactionDate);
			expenseEntryGr.custom_field_6 = expenseEntries[key].SpendCategory;
			expenseEntryGr.external_approval_record = approvalGr.getValue('sys_id');
			expenseEntryGr.insert();

			//Prepare request
			var r = new sn_ws.RESTMessageV2(universalBoxExternalUtil.CONCUR_REST, 'getExpenseEntryReceipts');
			r.setRequestHeader('User-Agent', '');
			r.setAuthenticationProfile('oauth2', '7f17f348dbf01704d255f6c5ae9619c9');
			r.setEndpoint(r.getEndpoint() + entryId);

			//Prepare the response
			var response = r.execute();
			var responseBody = response.getBody();
			var httpStatus = response.getStatusCode();

			if (httpStatus == 200) {
				xmlDoc1.parseXML(responseBody);
				_attachReceipts(approvalGr, xmlDoc1.getNodeText('Image/Url'), fileName);
				_attachReceipts(expenseEntryGr, xmlDoc1.getNodeText('Image/Url'), fileName);
				continue;
			}
			else {
				logUtil.warn('_attachEntryReceipts:' + responseBody);
			}
		}
	}

	function _attachEntryReceipts(approvalGr) {

		var requestDetails = approvalGr.getValue('payload');
		var parser = new global.JSONParser();
		var reportPayload = parser.parse(requestDetails);
		var expenseEntries = [];
		var expenseEntryGr;

		if (reportPayload.Entries['@Count'] == '1') {
			expenseEntries.push(reportPayload.Entries['ExpenseEntry']);
		}
		else {
			expenseEntries = reportPayload.Entries['ExpenseEntry'];
			expenseEntries = expenseEntries.map(function (f) {
				return f;
			});
		}

		//Get image for all expense Entries
		var xmlDoc1 = new XMLDocument2();
		for (var key in expenseEntries) {

			//get each expense entry
			var entryId = expenseEntries[key].RpeKey;
			var fileName = approvalGr.external_case_number + '_' + entryId;

			//Create expense entries
			expenseEntryGr = new GlideRecord('x_snc_uni_inbox_expense_line_items');
			expenseEntryGr.initialize();
			expenseEntryGr.custom_field_1 = expenseEntries[key].ExpName;
			expenseEntryGr.custom_field_2 = expenseEntries[key].PostedAmount;
			expenseEntryGr.custom_field_3 = expenseEntries[key].VendorDescription;
			expenseEntryGr.custom_field_4 = expenseEntries[key].LocationName;
			expenseEntryGr.custom_field_5 = formatDate(expenseEntries[key].TransactionDate);
			expenseEntryGr.custom_field_6 = expenseEntries[key].SpendCategory;
			expenseEntryGr.external_approval_record = approvalGr.getValue('sys_id');
			expenseEntryGr.insert();

			//Prepare request
			var r = new sn_ws.RESTMessageV2(universalBoxExternalUtil.CONCUR_REST, 'getExpenseEntryReceipts');
			r.setRequestHeader('User-Agent', '');
			r.setAuthenticationProfile('oauth2', '7f17f348dbf01704d255f6c5ae9619c9');
			r.setEndpoint(r.getEndpoint() + entryId);

			//Prepare the response
			var response = r.execute();
			var responseBody = response.getBody();
			var httpStatus = response.getStatusCode();

			if (httpStatus == 200) {
				xmlDoc1.parseXML(responseBody);
				_attachReceipts(approvalGr, xmlDoc1.getNodeText('Image/Url'), fileName);
				continue;
			}
			else {
				logUtil.warn('_attachEntryReceipts:' + responseBody);
			}
		}
	}

	function _getFullReportDetails(reportId) {
		//Setup the request
		var r = new sn_ws.RESTMessageV2(universalBoxExternalUtil.CONCUR_REST, 'getReportFullDetails');
		r.setRequestHeader('User-Agent', '');
		r.setStringParameter('ReportID', reportId);
		r.setAuthenticationProfile('oauth2', '7f17f348dbf01704d255f6c5ae9619c9');

		//Prepare the response
		var response = r.execute();
		var responseBody = response.getBody();
		var httpStatus = response.getStatusCode();

		if (httpStatus == 200) {
			logUtil.info('getFullReportDetails:' + responseBody);
			return responseBody;
		}
		else {
			logUtil.warn('getFullReportDetails:' + responseBody);
			return null;
		}

	}

	function _attachReceipts(approvalGr, imageURL, fileName) {

		var request = new sn_ws.RESTMessageV2();
		request.setHttpMethod('get');

		//endpoint - ServiceNow REST Attachment API
		request.setEndpoint(imageURL);
		request.saveResponseBodyAsAttachment(approvalGr.getTableName(), approvalGr.getValue('sys_id'), fileName);
		response = request.execute();

	}

	function formatDate(dt) {
		dt = dt.replace(/[TZ]/g, ' ');
		var gdt = new GlideDateTime();
		gdt.setDisplayValue(dt);

		return gdt.getLocalDate().getDisplayValue() + ' ' + gdt.getLocalTime().getDisplayValue();
	}

	//In case report is recalled and resubmitted
	function deactivateDuplicate(externalCaseNumber) {
		var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
		approvalGr.addEncodedQuery('state=requested^external_case_number=' + externalCaseNumber);
		approvalGr.query();
		while (approvalGr.next()) {
			approvalGr.state = 'not_required';
			approvalGr.comments = 'Approval is recalled from Concur.';
			approvalGr.update();
		}
	}

})(eventGr, logUtil);]]&gt;&lt;/x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="concur_expense_list_template"&gt;e7b0d2dfdb2e57407f6cf4b5ae96198a&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries&gt;3&lt;/x_snc_uni_inbox_maximum_retries&gt;&lt;x_snc_uni_inbox_modal_response_message/&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;![CDATA[(function (eventGr, logUtil) {
	/**
 	* Usage of variables:
 	* eventGr - created event record to use from
 	* logUtil.debug - Debugging
 	* logUtil.info - Information
 	* logUtil.warn - Warning
 	* logUtil.error - Error
 	* result - Set result variable to the state and response you want to display on the event record
 	**/
	result = 'error';
	var payloadObj = JSON.parse(eventGr.getValue('input_payload'));
	var responseBody = '';
	var employeeGr = new GlideRecord('u_employee');
	employeeGr.get('user_name', eventGr.approval_record.sys_updated_by);

	try {

		var r = new sn_ws.RESTMessageV2('x_snc_uni_inbox.Concur - Expense Report V1.0', 'executeWorkflowAction');
		r.setRequestHeader('Content-Type', "application/xml");
		r.setRequestHeader('User-Agent', '');
		r.setEndpoint(payloadObj.WorkflowActionURL); // V1.1 Change removed ReportDetails
		r.setAuthenticationProfile('oauth2', '7f17f348dbf01704d255f6c5ae9619c9');

		var typeToState = {
			'approved': "Approve",
			"rejected": "Send Back to Employee"
		};
		var typeToComment = {
			'approved':"Approved in Surf : By " + employeeGr.getValue('name'),
			'rejected':"Rejected in Surf : By " + employeeGr.getValue('name')
		};
			
		var comment = global.JSUtil.notNil(eventGr.approval_record.comments) ? typeToComment[eventGr.getValue('event_type')] + '\n Reason : ' + eventGr.approval_record.comments : typeToComment[eventGr.getValue('event_type')];
		
		var requestBody = "&lt;WorkflowAction xmlns=\"http://www.concursolutions.com/api/expense/expensereport/2011/03\"&gt;";
		requestBody += "&lt;Action&gt;" + typeToState[eventGr.getValue('event_type')] + "&lt;/Action&gt;";
		requestBody += "&lt;Comment&gt;" + comment + "&lt;/Comment&gt;";
		requestBody += "&lt;event&gt;" + eventGr.getValue('sys_id') + "&lt;/event&gt;";
		requestBody += "&lt;/WorkflowAction&gt;";
		logUtil.info(requestBody);
		r.setRequestBody(requestBody);
		var response = r.executeAsync();

		responseBody = response.getBody();
		var httpStatus = response.getStatusCode();

		if (httpStatus == 200) {
			logUtil.info('_executeWorkflowAction:' + responseBody);
			result = 'processed';
			if (global.JSUtil.notNil(responseBody.match(/&lt;Status&gt;FAILURE&lt;\/Status&gt;/)))
				//gs.eventQueue("x_snc_uni_inbox.concur.event.failure", eventGr);
			logUtil.error('_executeWorkflowAction:' + responseBody);
			
		}
		else {
			logUtil.error('_executeWorkflowAction:' + responseBody);
			result = 'error';
			//gs.eventQueue("x_snc_uni_inbox.concur.event.failure", eventGr);
		}

	} catch (err) {
		logUtil.error('Exception:' + err.getMessage());
	}

})(eventGr, logUtil);]]&gt;&lt;/x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Concur Expense"&gt;5df407e71312bf00a77d34228144b093&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;requestor&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-989408701</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5735eda91b20e4d42b58ec67bc4bcbc3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab7050000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>x_snc_uni_inbox_universal_box_external_approvals</table><target_name>Concur Expense Manager Approval</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>3cc2066146b384d4b493447698b55b7c</update_guid><update_guid_history>3cc2066146b384d4b493447698b55b7c:-989408701</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_ee7ce39adba14380a3ab56a8dc961938</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;true&lt;/advanced_update_script&gt;&lt;assigned_field&gt;u_approver&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value="timecard_detail_template"&gt;5cb016badb4113043d7958a8dc9619ee&lt;/card_template&gt;&lt;description&gt;Professional Services Timecard&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001002&lt;/number&gt;&lt;query table="u_ps_time_card"&gt;state=Submitted^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var cat_subcat_tot = current.category.getDisplayValue() + "-&gt;" + current.u_subcategory.getDisplayValue() + " : " + current.total.getDisplayValue();
var cat_subcat = current.category.getDisplayValue() + "-&gt;" + current.u_subcategory.getDisplayValue();
var week_starts_on = new GlideDateTime();
week_starts_on.setDisplayValue(current.getDisplayValue("week_starts_on"), gs.getDateFormat());

answer = {
    week_starts_on: {
        display_value: week_starts_on.getDate().getByFormat("MM/dd/YYYY"),
        value: week_starts_on.getNumericValue()
    },
    user: {
        display_value: current.user.getDisplayValue(),
        value: current.user.toString()
    },
    cat_subcat_tot: {
        display_value: cat_subcat_tot,
        value: cat_subcat_tot
    },
    cat_subcat: {
        display_value: cat_subcat,
        value: cat_subcat
    },
    u_work_location: {
        display_value: current.u_work_location.getDisplayValue(),
        value: current.u_work_location.toString()
    },
    u_month: {
        display_value: current.u_month.getDisplayValue(),
        value: current.u_month.toString()
    },
    u_work_country: {
        display_value: current.u_work_country.getDisplayValue(),
        value: current.u_work_country.toString()
    },
    u_account: {
        display_value: current.u_account.getDisplayValue(),
        value: current.u_account.toString()
    },
    total: {
        display_value: current.total.getDisplayValue(),
        value: current.total.toString()
    },
    task: {
        display_value: current.task.getDisplayValue(),
        value: current.task.toString()
    },
    u_all_notes: {
        display_value: '&lt;br /&gt;' + current.u_all_notes.getDisplayValue().replace(/\n/g, "&lt;br /&gt;"),
        value: current.u_all_notes.toString()
    },
    category: {
        display_value: current.category.getDisplayValue(),
        value: current.category.toString()
    },
    u_subcategory: {
        display_value: current.u_subcategory.getDisplayValue(),
        value: current.u_subcategory.toString()
    },
    sunday: {
        display_value: current.sunday.getDisplayValue(),
        value: current.sunday.toString()
    },
    monday: {
        display_value: current.monday.getDisplayValue(),
        value: current.monday.toString()
    },
    tuesday: {
        display_value: current.tuesday.getDisplayValue(),
        value: current.tuesday.toString()
    },
    wednesday: {
        display_value: current.wednesday.getDisplayValue(),
        value: current.wednesday.toString()
    },
    thursday: {
        display_value: current.thursday.getDisplayValue(),
        value: current.thursday.toString()
    },
    friday: {
        display_value: current.friday.getDisplayValue(),
        value: current.friday.toString()
    },
    saturday: {
        display_value: current.saturday.getDisplayValue(),
        value: current.saturday.toString()
    },
    document: current.getUniqueValue(),
    due_date: '',
    task_type: 'Professional Timecard',
    display_field: current.user.getDisplayValue(),
};
week_starts_on.addWeeksLocalTime(1);
answer.week_ends_on = {
    display_value: week_starts_on.getDate().getByFormat("MM/dd/YYYY"),
    value: week_starts_on.getNumericValue()
};
answer.week = {
    display_value: answer.week_starts_on.display_value + " - " + answer.week_ends_on.display_value,
    value: answer.week_starts_on.value + " - " + answer.week_ends_on.value
};
answer.title = 'Week: ' + answer.week.display_value;
var timecards;
var i = 0;
var grTC = new GlideRecord('u_ps_time_card');
grTC.addQuery('sys_id', current.sys_id);
grTC.query();
while (grTC.next()) {
    //Add &lt;br/&gt; to notes to keep them on a different lines
    var time_card = {
        user: grTC.user.getDisplayValue(),
        category: grTC.category.getDisplayValue(),
        u_subcategory: grTC.u_subcategory.getDisplayValue(),
        u_work_location: grTC.u_work_location.getDisplayValue(),
        u_month: grTC.u_month.getDisplayValue(),
        u_work_country: grTC.u_work_country.getDisplayValue(),
        u_account: grTC.u_account.getDisplayValue(),
        total: grTC.total.getDisplayValue(),
        task: grTC.task.getDisplayValue(),
        u_all_notes: '&lt;br /&gt;' + grTC.u_all_notes.getDisplayValue().replace(/\n/g, "&lt;br /&gt;"),
        sunday: grTC.sunday.getDisplayValue(),
        monday: grTC.monday.getDisplayValue(),
        tuesday: grTC.tuesday.getDisplayValue(),
        wednesday: grTC.wednesday.getDisplayValue(),
        thursday: grTC.thursday.getDisplayValue(),
        friday: grTC.friday.getDisplayValue(),
        saturday: grTC.saturday.getDisplayValue()
    };
    timecards = time_card;

}
answer.time_cards = timecards;




answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;balamuru.balamurugan&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-10-04 08:47:32&lt;/sys_created_on&gt;&lt;sys_id&gt;ee7ce39adba14380a3ab56a8dc961938&lt;/sys_id&gt;&lt;sys_mod_count&gt;116&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;u_ps_time_card&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){
	
	var stateValue = updateObject[updateObject['state_field']];
	var rej_comments = updateObject.comments;
	//gs.addInfoMessage(stateValue +  "   " +rej_comments);
	if (stateValue =='Approved')
		{
		//	gs.addInfoMessage(' inside Approved');
		if (current.u_war_authorization != '') {
			var war = new GlideRecord('u_war_authorization');
			if (war.get(current.u_war_authorization)) {
				if (war.u_state != 'Approved') {
					gs.addErrorMessage("Cannot approve this Timecard as the WAR Authorization has not been Approved yet.");
				}
				else
					{
					newValue.state = 'accepted_state';
					oldValue.state = 'Submitted';
					var psTC = new global.PSTimeCard(current);
					var message = psTC.approve();
					//gs.addInfoMessage(message);
					
					function getMessage(response) {
						var message = response.responseXML.documentElement.getAttribute("answer");
					}
				}
			}
		}
		
		
		if (current.u_war_authorization == '')
			{
			newValue.state = 'accepted_state';
			oldValue.state = 'Submitted';
			var psTC = new global.PSTimeCard(current);
			var message2 = psTC.approve();
			//gs.addInfoMessage(message2);
			
			function getMessage(response) {
				var message = response.responseXML.documentElement.getAttribute("answer");
			}
		}
	}

	if(stateValue == 'Rejected')
		{
			
			//gs.addInfoMessage(' inside Rejeected');
		newValue.state = 'rejected_state';
		oldValue.state = 'Submitted';
		var RTC = new global.RejectPSTimecard();
		message1 = RTC.rejectPSTimecardFunc(current.sys_id,rej_comments);
		gs.addInfoMessage(message1);
	}
	
})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"User", "field_name": "user", "default_filter" : false},{"display":"Week", "field_name": "week", "default_filter" : true},{"display":"Category", "field_name": "cat_subcat", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="timecard_list_template"&gt;80e2098edb4d93c03d7958a8dc961913&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the timecard from {user} for the week {week_starts_on} - {week_ends_on}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Submitted&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen/&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>1993355016</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5735eda91b20e4d42b58ec67bc4bcbc6</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab4e70000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>u_ps_time_card</table><target_name>Professional Services Timecard</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>f8c2066178b384d4877a580f5ed2e268</update_guid><update_guid_history>f8c2066178b384d4877a580f5ed2e268:1993355016</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>DELETE</action><application display_value="Approval Central">ca26b59bdb612b0094c2f7731d9619b1</application><category>customer</category><comments/><name>sys_atf_schedule_1ad376ab1b734010f0f077f58d4bcb1c</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_atf_schedule"&gt;&lt;sys_atf_schedule action="DELETE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;business_calendar/&gt;&lt;condition/&gt;&lt;conditional&gt;false&lt;/conditional&gt;&lt;description&gt;This schedule will perform the following actions:

Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&lt;/description&gt;&lt;entered_time/&gt;&lt;name&gt;CICD adhoc schedule&lt;/name&gt;&lt;run_as display_value="System Administrator"&gt;6816f79cc0a8016401c5a33be04be441&lt;/run_as&gt;&lt;run_as_tz/&gt;&lt;run_dayofmonth&gt;1&lt;/run_dayofmonth&gt;&lt;run_dayofweek/&gt;&lt;run_period/&gt;&lt;run_start&gt;2020-04-02 06:58:25&lt;/run_start&gt;&lt;run_time/&gt;&lt;run_type&gt;on_demand&lt;/run_type&gt;&lt;script&gt;&lt;![CDATA[new global.ScheduledTestProcessor().executeScheduledSuites('1ad376ab1b734010f0f077f58d4bcb1c');]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_atf_schedule&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:25&lt;/sys_created_on&gt;&lt;sys_id&gt;1ad376ab1b734010f0f077f58d4bcb1c&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;CICD adhoc schedule&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_atf_schedule_1ad376ab1b734010f0f077f58d4bcb1c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:25&lt;/sys_updated_on&gt;&lt;time_zone/&gt;&lt;upgrade_safe&gt;false&lt;/upgrade_safe&gt;&lt;/sys_atf_schedule&gt;&lt;sys_update_version action="INSERT_OR_UPDATE"&gt;&lt;action&gt;INSERT_OR_UPDATE&lt;/action&gt;&lt;application display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/application&gt;&lt;file_path/&gt;&lt;instance_id&gt;098c0d52db194cd02f68c59705961960&lt;/instance_id&gt;&lt;instance_name&gt;surfgitdev1&lt;/instance_name&gt;&lt;name&gt;sys_atf_schedule_1ad376ab1b734010f0f077f58d4bcb1c&lt;/name&gt;&lt;payload&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;&amp;lt;record_update table="sys_atf_schedule"&amp;gt;&amp;lt;sys_atf_schedule action="INSERT_OR_UPDATE"&amp;gt;&amp;lt;active&amp;gt;true&amp;lt;/active&amp;gt;&amp;lt;business_calendar/&amp;gt;&amp;lt;condition/&amp;gt;&amp;lt;conditional&amp;gt;false&amp;lt;/conditional&amp;gt;&amp;lt;description&amp;gt;This schedule will perform the following actions:

Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&amp;lt;/description&amp;gt;&amp;lt;entered_time/&amp;gt;&amp;lt;name&amp;gt;CICD adhoc schedule&amp;lt;/name&amp;gt;&amp;lt;run_as display_value="System Administrator"&amp;gt;6816f79cc0a8016401c5a33be04be441&amp;lt;/run_as&amp;gt;&amp;lt;run_as_tz/&amp;gt;&amp;lt;run_dayofmonth&amp;gt;1&amp;lt;/run_dayofmonth&amp;gt;&amp;lt;run_dayofweek/&amp;gt;&amp;lt;run_period/&amp;gt;&amp;lt;run_start&amp;gt;2020-04-02 06:58:25&amp;lt;/run_start&amp;gt;&amp;lt;run_time/&amp;gt;&amp;lt;run_type&amp;gt;on_demand&amp;lt;/run_type&amp;gt;&amp;lt;script&amp;gt;&amp;lt;![CDATA[new global.ScheduledTestProcessor().executeScheduledSuites('1ad376ab1b734010f0f077f58d4bcb1c');]]&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;sys_class_name&amp;gt;sys_atf_schedule&amp;lt;/sys_class_name&amp;gt;&amp;lt;sys_created_by&amp;gt;admin&amp;lt;/sys_created_by&amp;gt;&amp;lt;sys_created_on&amp;gt;2020-04-02 06:58:25&amp;lt;/sys_created_on&amp;gt;&amp;lt;sys_id&amp;gt;1ad376ab1b734010f0f077f58d4bcb1c&amp;lt;/sys_id&amp;gt;&amp;lt;sys_mod_count&amp;gt;1&amp;lt;/sys_mod_count&amp;gt;&amp;lt;sys_name&amp;gt;CICD adhoc schedule&amp;lt;/sys_name&amp;gt;&amp;lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&amp;gt;ca26b59bdb612b0094c2f7731d9619b1&amp;lt;/sys_package&amp;gt;&amp;lt;sys_policy/&amp;gt;&amp;lt;sys_scope display_value="Approval Central"&amp;gt;ca26b59bdb612b0094c2f7731d9619b1&amp;lt;/sys_scope&amp;gt;&amp;lt;sys_update_name&amp;gt;sys_atf_schedule_1ad376ab1b734010f0f077f58d4bcb1c&amp;lt;/sys_update_name&amp;gt;&amp;lt;sys_updated_by&amp;gt;admin&amp;lt;/sys_updated_by&amp;gt;&amp;lt;sys_updated_on&amp;gt;2020-04-02 06:58:25&amp;lt;/sys_updated_on&amp;gt;&amp;lt;time_zone/&amp;gt;&amp;lt;upgrade_safe&amp;gt;false&amp;lt;/upgrade_safe&amp;gt;&amp;lt;/sys_atf_schedule&amp;gt;&amp;lt;/record_update&amp;gt;&lt;/payload&gt;&lt;payload_hash&gt;1290574099&lt;/payload_hash&gt;&lt;record_name&gt;CICD adhoc schedule&lt;/record_name&gt;&lt;reverted_from/&gt;&lt;source&gt;e6347ff81bb380942b58ec67bc4bcb2c&lt;/source&gt;&lt;source_table&gt;sys_update_set&lt;/source_table&gt;&lt;state&gt;current&lt;/state&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:25&lt;/sys_created_on&gt;&lt;sys_id&gt;ded376ab1b734010f0f077f58d4bcb24&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_recorded_at&gt;17139af0e210000001&lt;/sys_recorded_at&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:25&lt;/sys_updated_on&gt;&lt;type&gt;Suite Schedule&lt;/type&gt;&lt;update_guid&gt;96d376ab7d7340100806d9cf0f0b7d24&lt;/update_guid&gt;&lt;update_guid_history&gt;96d376ab7d7340100806d9cf0f0b7d24:1290574099,5ad376abb673401023ca90e2a936361e:1510020985&lt;/update_guid_history&gt;&lt;/sys_update_version&gt;&lt;sys_metadata_delete action="INSERT_OR_UPDATE"&gt;&lt;sys_audit_delete/&gt;&lt;sys_class_name&gt;sys_metadata_delete&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:27&lt;/sys_created_on&gt;&lt;sys_db_object display_value="" name="sys_atf_schedule"&gt;sys_atf_schedule&lt;/sys_db_object&gt;&lt;sys_id&gt;52a1b963735f4f168b0cf0a8a060ba44&lt;/sys_id&gt;&lt;sys_metadata&gt;1ad376ab1b734010f0f077f58d4bcb1c&lt;/sys_metadata&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;CICD adhoc schedule&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_parent/&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_scope_delete display_value=""&gt;c2527724e6664664b3ecf0c7a3924710&lt;/sys_scope_delete&gt;&lt;sys_update_name&gt;sys_atf_schedule_1ad376ab1b734010f0f077f58d4bcb1c&lt;/sys_update_name&gt;&lt;sys_update_version display_value="sys_atf_schedule_1ad376ab1b734010f0f077f58d4bcb1c"&gt;ded376ab1b734010f0f077f58d4bcb24&lt;/sys_update_version&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:27&lt;/sys_updated_on&gt;&lt;/sys_metadata_delete&gt;&lt;/record_update&gt;</payload><payload_hash>1926338728</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5b35eda91b20e4d42b58ec67bc4bcb74</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17139af12c70000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table/><target_name>CICD adhoc schedule</target_name><type>Suite Schedule</type><update_domain>global</update_domain><update_guid>a2d37e6f267340109b8e4fec74da4bd6</update_guid><update_guid_history>a2d37e6f267340109b8e4fec74da4bd6:1926338728,96d376ab7d7340100806d9cf0f0b7d24:1290574099,5ad376abb673401023ca90e2a936361e:1510020985</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_568cfd8adb5f8f80a3ab56a8dc961991</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="catalog_firefighter_detail_template"&gt;954d101fdb0993000d0e540adc961985&lt;/card_template&gt;&lt;description&gt;Surf Firefighter Access&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001020&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sc_req_item^sysapproval.ref_sc_req_item.cat_item=9bee8c0ddb9d6e8004ea750aaf96191a^sysapproval.ref_sc_req_item.u_requested_forNSAMEASapprover^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="=" or="false" value="9bee8c0ddb9d6e8004ea750aaf96191a"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var temp = new global.GetVariablePool();
var pr = temp.getVarPool(current.sysapproval);
var vpool = JSON.parse(pr);
var approvaltype = current.document_id.getDisplayValue().split(':');
var dtFormat = gs.getDateTimeFormat();
var gdt = new GlideDateTime();
var startGDT = new GlideDateTime();
var endGDT = new GlideDateTime();

gdt.setDisplayValue(current.getValue('sys_created_on'), dtFormat);
startGDT.setDisplayValue(vpool.StartDate, dtFormat);
endGDT.setDisplayValue(vpool.EndDate, dtFormat);
var requested_date = {
    display_value: gdt.getLocalDate().UTCValue,
    value: gdt.getNumericValue()
};
var startDate = {
    display_value: startGDT.getLocalDate().UTCValue,
    value: startGDT.getNumericValue()
};
var endDate = {
    display_value: endGDT.getLocalDate().UTCValue,
    value: endGDT.getNumericValue()
};





answer = {
    number: {
        display_value: current.sysapproval.getDisplayValue(),
        value: current.sysapproval.toString(),
    },
    requested_date: requested_date,
    short_description: current.sysapproval.short_description.getDisplayValue(),
    document_id: current.document_id.toString(),
    document_table: current.source_table.toString(),
    name: current.document_id.cat_item.name.toString(),
    requested_for: current.document_id.u_requested_for.getDisplayValue(),
    StartDate: startDate,
    EndDate: endDate,
    requested_role: vpool.requested_role,
    ReasonForRequest: vpool.ReasonForRequest,
    task_number: vpool.task_number,
    reason: vpool.reason,
    confirmation: vpool.confirmation,
    requester: current.sysapproval.opened_by.getDisplayValue(),
    due_date: requested_date,
    task_type: 'Surf Firefighter Access',
    display_field: current.sysapproval.getDisplayValue(),
    title: 'Requested For:  ' + current.document_id.u_requested_for.getDisplayValue(),
    notActionable: current[inbox.state_field] != inbox.pending_state
};



answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;balamuru.balamurugan&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-12-29 05:49:51&lt;/sys_created_on&gt;&lt;sys_id&gt;568cfd8adb5f8f80a3ab56a8dc961991&lt;/sys_id&gt;&lt;sys_mod_count&gt;107&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sc_req_item&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true
},{"display":"Requested For", "field_name": "requested_for", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="catalog_firefighter_list_template"&gt;e47d3bf2db4593043d7958a8dc961985&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the surf firefighter access for request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Surf Firefighter Access"&gt;74f4c3e71312bf00a77d34228144b043&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_requested_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>945728963</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5b35eda91b20e4d42b58ec67bc4bcbc2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eababc0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Surf Firefighter Access</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>0dc20661f6b384d447550cd6f0cc50e6</update_guid><update_guid_history>0dc20661f6b384d447550cd6f0cc50e6:945728963</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_d5460b4edbcf4410e76ddb85ca961948</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="legal_request_details_template"&gt;6b7667c2db0b8410e76ddb85ca961908&lt;/card_template&gt;&lt;description&gt;Legal Requests&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001007&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sn_lg_ops_request^sysapproval.ref_sn_lg_ops_request.lg_category!=8a320d28b7603300a75124f8de11a9c4^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sn_lg_ops_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;approver&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example
var grLGR = new GlideRecord('sn_lg_ops_request');
grLGR.get(current.sysapproval.toString());

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'), gs.getDateTimeFormat());
var requested_date = {
	display_value: gdt.getLocalDate().getDisplayValue(),
	value: gdt.getNumericValue()
};

var ourUser = new GlideRecord('sys_user');
ourUser.get(grLGR.opened_by.toString());

answer = {
	number : {
		display_value: grLGR.number.getDisplayValue(),
		value: grLGR.number.toString()
	},	
	requested_date: requested_date,
	requester: ourUser.getDisplayValue(),
	
	short_desc: {
		display_value: grLGR.short_description.getDisplayValue(),
		value: grLGR.short_description.toString()
	},
	
	category: {
		display_value: grLGR.lg_category.category.getDisplayValue(),
		value: grLGR.lg_category.toString()
	},
	
	sub_category: {
		display_value: grLGR.lg_subcategory.sub_category.getDisplayValue(),
		value: grLGR.lg_subcategory.toString()
	},
	
	assignment_group: {
		display_value: grLGR.assignment_group.getDisplayValue(),
		value: grLGR.assignment_group.toString()
	},
	
	assigned_to: {
		display_value: grLGR.assigned_to.getDisplayValue(),
		value: grLGR.assigned_to.toString()
	},
	
	priority: {
		display_value: grLGR.priority.getDisplayValue(),
		value: grLGR.priority.toString()
	},
	
	u_comments_and_work_notes: {
		display_value: grLGR.u_comments_and_work_notes.getDisplayValue(),
		value: grLGR.u_comments_and_work_notes.toString()
	},

};

answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;durgaprasad.kusuma&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-02-20 10:12:16&lt;/sys_created_on&gt;&lt;sys_id&gt;d5460b4edbcf4410e76ddb85ca961948&lt;/sys_id&gt;&lt;sys_mod_count&gt;33&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;durgaprasad.kusuma&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-03-09 13:24:18&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;12b610b2db8140101e4d5ad3ca9619ce,ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sn_lg_ops_request&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields/&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="legal_request_list_template"&gt;b8631bcedb438410e76ddb85ca96192f&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message/&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen/&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;requested_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-808441561</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5b35eda91b20e4d42b58ec67bc4bcbc5</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab7fd0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Legal Requests</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>49c206616cb384d4b9c0bab38f702184</update_guid><update_guid_history>49c206616cb384d4b9c0bab38f702184:-808441561</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_47f934c0dbfdc340a3ab56a8dc9619e0</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="control_tasks_details_template"&gt;bff974efdb8597000d0e540adc96191f&lt;/card_template&gt;&lt;description&gt;Control Tasks&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001006&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_cl_task^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_cl_task"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
//var answer = false;
//var GApp = new GlideRecord(current.source_table);
//GApp.addQuery('assignment_group', '8a5055c9c61122780043563ef53438e3');
//GApp.addQuery('sys_id',current.document_id.toString());
//GApp.query();
var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value:gdt.getLocalDate().getDisplayValue(),
	value:gdt.getNumericValue()
};

var task_rec = new GlideRecord('u_cl_task');
task_rec.get('sys_id',current.sysapproval);

var u_functional_check_list = task_rec.u_functional_check_list.getDisplayValue();
var func = "CL TASK : "+u_functional_check_list;
var u_task_type = task_rec.u_task_type.getDisplayValue();
var assigned_to = task_rec.assigned_to.getDisplayValue();
var u_parent_cl_task = task_rec.u_parent_cl_task.getDisplayValue();
var u_close_day = task_rec.u_close_day.getDisplayValue();
var u_company_codes = task_rec.u_company_codes.getDisplayValue();
var ddGDT = new GlideDateTime();
ddGDT.setDisplayValue(task_rec.u_due_date.getDisplayValue(),gs.getDateFormat());
var u_due_date = {
	display_value : ddGDT.getLocalDate().getDisplayValue(),
	value : ddGDT.getNumericValue()
};

var u_frequency = task_rec.u_frequency.getDisplayValue();
var u_function = task_rec.u_function.getDisplayValue();
var u_close_automatically = task_rec.u_close_automatically.getDisplayValue();
var u_controlling_area = task_rec.u_controlling_area.getDisplayValue();
var u_one_time_je = task_rec.u_one_time_je.getDisplayValue();
var u_display_on_corporate_calendar = task_rec.u_display_on_corporate_calendar.getDisplayValue();
var u_final_task_for_close_status = task_rec.u_final_task_for_close_status.getDisplayValue();
var u_display_on_corporate_calendar = task_rec.u_display_on_corporate_calendar.getDisplayValue();
var u_milestone_task = task_rec.u_milestone_task.getDisplayValue();
var short_description = task_rec.short_description.getDisplayValue();
var description = task_rec.description.getDisplayValue();
var ass_to = "Assigned to: "+assigned_to;
var task_number = task_rec.number.getDisplayValue();



var answer = {
	number:{
		display_value: task_number,
		value: task_rec.sys_id.toString()
	},
	approval_group:false,
	approval_type: approvaltype[0],
	requester: task_rec.u_task_for.getDisplayValue(),
	photo: task_rec.u_task_for.photo.getDisplayValue(),
	requested_date: requested_date,
	request_reason: current.u_request_reason.getDisplayValue(),
	source_table: current.source_table,
	document:current.document_id.toString(),
	u_functional_check_list:u_functional_check_list,
	func:func,
	u_task_type:u_task_type,
	assigned_to:assigned_to,
	u_parent_cl_task:u_parent_cl_task,
	u_close_day:u_close_day,
	u_company_codes:u_company_codes,
	u_due_date:u_due_date,
	u_frequency:u_frequency,
	u_function:u_function,
	u_close_automatically:u_close_automatically,
	u_controlling_area:u_controlling_area,
	u_one_time_je:u_one_time_je,
	u_display_on_corporate_calendar:u_display_on_corporate_calendar,
	u_milestone_task:u_milestone_task,
	short_description:short_description,
	description:description,
	ass_to:ass_to,
	task_number:task_number,
	u_final_task_for_close_status:u_final_task_for_close_status,
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : task_number,
	title : 'Assigned To: ' + assigned_to,
	notActionable: current[inbox.state_field] != inbox.pending_state
	
};
if (current.group)
	{
	answer.approval_group = {
		display_value: current.group.assignment_group.getDisplayValue(),
		value: current.group.assignment_group.toString()
	};
}
answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;balamuru.balamurugan&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-10-09 06:17:04&lt;/sys_created_on&gt;&lt;sys_id&gt;47f934c0dbfdc340a3ab56a8dc9619e0&lt;/sys_id&gt;&lt;sys_mod_count&gt;39&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:48&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true
},{"display":"Assigned to", "field_name": "assigned_to", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="control_tasks_list_template"&gt;8ffc33f2db4593043d7958a8dc96196e&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the control tasks {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Control Tasks"&gt;21f447e71312bf00a77d34228144b076&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-1915580913</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5f35eda91b20e4d42b58ec67bc4bcbc1</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab7440000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Control Tasks</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>09c206611bb384d40af8ea5d3bb9387e</update_guid><update_guid_history>09c206611bb384d40af8ea5d3bb9387e:-1915580913</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_b2a4fa31dbb48744a3ab56a8dc961928</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="account_payable_detail_template"&gt;768eb34bdb4193000d0e540adc9619fc&lt;/card_template&gt;&lt;description&gt;Account Payable Invoice&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001001&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_ap_invoice^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_ap_invoice"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var dtFormat = gs.getDateTimeFormat();
var approvaltype = current.document_id.getDisplayValue().split(':');
var reqGDT = new GlideDateTime();
reqGDT.setDisplayValue(current.getDisplayValue('sys_created_on'),dtFormat);

var requested_date = {
	display_value : reqGDT.getLocalDate().getDisplayValue(),
	value : reqGDT.getNumericValue()
};

answer = {
	number:{
		display_value: current.sysapproval.number.getDisplayValue(),
		value:current.sysapproval.number.getDisplayValue()
	},
	approval_group:false,
	approval_type: approvaltype[0],
	short_description: current.sysapproval.short_description.getDisplayValue(),
	requested_date: requested_date,
	request_reason: current.u_request_reason.getDisplayValue(),
	document_id:current.document_id.toString(),
	document_table:current.source_table.toString(),
	due_date:requested_date,
	display_field : current.sysapproval.getDisplayValue(),
	task_type : approvaltype[0],
	title : current.sysapproval.short_description.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state
};
var recordGR = new GlideRecord(current.source_table.toString());
if(recordGR.get(current.sysapproval.sys_id.toString())){
	var invGDT = new GlideDateTime();
	invGDT.setDisplayValue(recordGR.getDisplayValue('u_inv_date'),gs.getDateFormat());
	var inv_date = {
		display_value : invGDT.getLocalDate().getDisplayValue(),
		value : invGDT.getNumericValue()
	};
	var userGR = new GlideRecord("sys_user");
	if(userGR.get("user_name",recordGR.u_invoice_first_approver.toString())){
		answer.requester = userGR.getDisplayValue();
	}else{
		answer.requester = recordGR.u_invoice_first_approver.toString();
	}
	answer.vendor_name = recordGR.getDisplayValue("u_vendor_name");
	answer.vim_dp_doc_num = recordGR.getDisplayValue("u_vim_dp_account_number");
	answer.vendor_inv_num = recordGR.getDisplayValue("u_vendor_invoice_number");
	answer.vendor_code = recordGR.u_vendor_code.u_vendor.toString();
	answer.company = recordGR.getDisplayValue("u_company_code");
	answer.apr_amt_lc = recordGR.u_document_amount.getCurrencyDisplayValue();
	answer.inv_amt_lc = recordGR.getDisplayValue("u_invoice_amount_in_lc");
	answer.apr_amt_usd = recordGR.getDisplayValue("u_approval_amount_in_usd");
	answer.inv_amt_usd = recordGR.getDisplayValue("u_invoice_amount_in_usd");
	answer.amt_paid_ap = recordGR.getDisplayValue("u_amount_paid_by_ap");
	answer.tax_amt = recordGR.getDisplayValue("u_tax_amount");
	answer.inv_date = inv_date;
}
if (current.group)
{
	answer.approval_group = {
		display_value: current.group.assignment_group.getDisplayValue(),
		value: current.group.assignment_group.toString()
	};
}
answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-26 08:39:40&lt;/sys_created_on&gt;&lt;sys_id&gt;b2a4fa31dbb48744a3ab56a8dc961928&lt;/sys_id&gt;&lt;sys_mod_count&gt;74&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:48&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;u_ap_invoice&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Short Description", "field_name": "short_description", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="account_payable_list_template"&gt;d9dcb3f2db4593043d7958a8dc961998&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the Account Payable {number} created on {requested_date}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Account Payable Invoice"&gt;77e403e71312bf00a77d34228144b05c&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;true&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_invoice_first_approver&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>2138856907</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>5f35eda91b20e4d42b58ec67bc4bcbc4</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab3460000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Account Payable Invoice</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>78c2c26181b384d45c4e81543f94a963</update_guid><update_guid_history>78c2c26181b384d45c4e81543f94a963:2138856907</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>DELETE</action><application display_value="Approval Central">ca26b59bdb612b0094c2f7731d9619b1</application><category>customer</category><comments/><name>sys_atf_schedule_run_a2c87e6f1b734010f0f077f58d4bcbb1</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_atf_schedule_run"&gt;&lt;sys_atf_schedule_run action="DELETE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;browser_name&gt;any&lt;/browser_name&gt;&lt;browser_version/&gt;&lt;description&gt;Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&lt;/description&gt;&lt;order&gt;100&lt;/order&gt;&lt;os_name&gt;any&lt;/os_name&gt;&lt;os_version/&gt;&lt;schedule display_value=""&gt;2ec87e6f1b734010f0f077f58d4bcbae&lt;/schedule&gt;&lt;sys_class_name&gt;sys_atf_schedule_run&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_id&gt;a2c87e6f1b734010f0f077f58d4bcbb1&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;100&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_atf_schedule_run_a2c87e6f1b734010f0f077f58d4bcbb1&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;test_suite display_value="ARCommunication Suite"&gt;94488a49db278410e76ddb85ca961990&lt;/test_suite&gt;&lt;watch_list/&gt;&lt;/sys_atf_schedule_run&gt;&lt;sys_update_version action="INSERT_OR_UPDATE"&gt;&lt;action&gt;INSERT_OR_UPDATE&lt;/action&gt;&lt;application display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/application&gt;&lt;file_path/&gt;&lt;instance_id&gt;098c0d52db194cd02f68c59705961960&lt;/instance_id&gt;&lt;instance_name&gt;surfgitdev1&lt;/instance_name&gt;&lt;name&gt;sys_atf_schedule_run_a2c87e6f1b734010f0f077f58d4bcbb1&lt;/name&gt;&lt;payload&gt;&lt;![CDATA[&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_atf_schedule_run"&gt;&lt;sys_atf_schedule_run action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;browser_name&gt;any&lt;/browser_name&gt;&lt;browser_version/&gt;&lt;description&gt;Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&lt;/description&gt;&lt;order&gt;100&lt;/order&gt;&lt;os_name&gt;any&lt;/os_name&gt;&lt;os_version/&gt;&lt;schedule display_value="CICD adhoc schedule"&gt;2ec87e6f1b734010f0f077f58d4bcbae&lt;/schedule&gt;&lt;sys_class_name&gt;sys_atf_schedule_run&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_id&gt;a2c87e6f1b734010f0f077f58d4bcbb1&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;100&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_atf_schedule_run_a2c87e6f1b734010f0f077f58d4bcbb1&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;test_suite display_value="ARCommunication Suite"&gt;94488a49db278410e76ddb85ca961990&lt;/test_suite&gt;&lt;watch_list/&gt;&lt;/sys_atf_schedule_run&gt;&lt;/record_update&gt;]]&gt;&lt;/payload&gt;&lt;payload_hash&gt;168396965&lt;/payload_hash&gt;&lt;record_name&gt;100&lt;/record_name&gt;&lt;reverted_from/&gt;&lt;source&gt;e6347ff81bb380942b58ec67bc4bcb2c&lt;/source&gt;&lt;source_table&gt;sys_update_set&lt;/source_table&gt;&lt;state&gt;current&lt;/state&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_id&gt;e6c83aa71bb34010f0f077f58d4bcb5e&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_recorded_at&gt;17139c2d2aa0000001&lt;/sys_recorded_at&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;type&gt;Scheduled Suite Run&lt;/type&gt;&lt;update_guid&gt;22c83aa781b3401074d0a1a149b1b05e&lt;/update_guid&gt;&lt;update_guid_history&gt;22c83aa781b3401074d0a1a149b1b05e:168396965&lt;/update_guid_history&gt;&lt;/sys_update_version&gt;&lt;sys_metadata_delete action="INSERT_OR_UPDATE"&gt;&lt;sys_audit_delete/&gt;&lt;sys_class_name&gt;sys_metadata_delete&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 07:20:01&lt;/sys_created_on&gt;&lt;sys_db_object display_value="" name="sys_atf_schedule_run"&gt;sys_atf_schedule_run&lt;/sys_db_object&gt;&lt;sys_id&gt;075ba2cb86844a308319a64175a34100&lt;/sys_id&gt;&lt;sys_metadata&gt;a2c87e6f1b734010f0f077f58d4bcbb1&lt;/sys_metadata&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;100&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_parent/&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_scope_delete display_value=""&gt;c2527724e6664664b3ecf0c7a3924710&lt;/sys_scope_delete&gt;&lt;sys_update_name&gt;sys_atf_schedule_run_a2c87e6f1b734010f0f077f58d4bcbb1&lt;/sys_update_name&gt;&lt;sys_update_version display_value="sys_atf_schedule_run_a2c87e6f1b734010f0f077f58d4bcbb1"&gt;e6c83aa71bb34010f0f077f58d4bcb5e&lt;/sys_update_version&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 07:20:01&lt;/sys_updated_on&gt;&lt;/sys_metadata_delete&gt;&lt;/record_update&gt;</payload><payload_hash>-591288571</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9335eda91b20e4d42b58ec67bc4bcb75</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17139c2d47f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table/><target_name>100</target_name><type>Scheduled Suite Run</type><update_domain>global</update_domain><update_guid>7ac83aa7f5b340104c4706fec71a616e</update_guid><update_guid_history>7ac83aa7f5b340104c4706fec71a616e:-591288571,22c83aa781b3401074d0a1a149b1b05e:168396965</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_0ba23480db1dbb002f554672399619ec</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;u_approver&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value=""&gt;45080812db91bb40c8491bfa4b96192d&lt;/card_template&gt;&lt;description&gt;SOW&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;u_comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;false&lt;/no_request_field&gt;&lt;number&gt;UBOX0001003&lt;/number&gt;&lt;query table="u_pricing_approvals"&gt;u_state=Requested^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field&gt;u_requested_by&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var answer = {
	document_table: current.getTableName(),
	document: current.getUniqueValue(),
	number:{
		display_value: current.u_sow_request.u_number.getDisplayValue(),
		value: current.u_sow_request.u_number.toString()
	},
	requester: {
	    display_value: current.u_requested_by.getDisplayValue(),
	    value: current.u_requested_by.toString()
	},
	account: {
		display_value: current.u_sow_request.u_account.getDisplayValue(),
		value: current.u_sow_request.u_account.toString()
	},
	opportunity: {
		display_value: current.u_sow_request.u_opportunity.getDisplayValue(),
		value: current.u_sow_request.u_opportunity.toString
	},
	line_item: {
		display_value: current.u_sow_request.u_line_item.number.getDisplayValue(),
		value: current.u_sow_request.u_line_item.number.toString
	},
	product_description: {
		display_value: current.u_sow_request.u_line_item.u_product_price.getDisplayValue(),
		value: current.u_sow_request.u_line_item.u_product_price.toString()
	},
	product_type: {
		display_value: current.u_sow_request.u_product_type.getDisplayValue(),
		value: current.u_sow_request.u_product_type.toString()
	},
	approval_description: {
		display_value: current.u_approval_description.getDisplayValue(),
		value: current.u_approval_description.toString()
		
	},
	product_hour: {
		display_value: current.u_sow_request.u_line_item.u_product_hours.getDisplayValue(),
		value: current.u_sow_request.u_line_item.u_product_hours.toString()
	},
	tm_margin: {
		display_value: current.u_sow_request.u_margin.getDisplayValue(),
		value: current.u_sow_request.u_margin.toString()
	},
	total_list_price: {
		display_value: current.u_sow_request.u_total_tm_list_price_usd.getDisplayValue(),
		value: current.u_sow_request.u_total_tm_list_price_usd.toString()
	},
	total_sales_price: {
		display_value: current.u_sow_request.u_line_item.u_sales_amount.getDisplayValue(),
		value: current.u_sow_request.u_line_item.u_sales_amount.toString()
	},
	discount_base_rate: {
		display_value: current.u_sow_request.u_discount_from_base_rate.getDisplayValue(),
		value: current.u_sow_request.u_discount_from_base_rate.toString()
	},
	travel_expenses: {
		display_value: current.u_sow_request.u_travel_and_expenses.getDisplayValue(),
		value: current.u_sow_request.u_travel_and_expenses.toString()
	},
	milestone: {
		display_value: current.u_sow_request.u_invoicing_milestones.getDisplayValue(),
		value: current.u_sow_request.u_invoicing_milestones.toString()
	},
	non_standard_legal_terms: {
		display_value: current.u_sow_request.u_non_legal_terms.getDisplayValue(),
		value: current.u_sow_request.u_non_legal_terms.toString()
	}, 
	non_standard_comercial_terms: {
		display_value: current.u_sow_request.u_non_standard_terms.getDisplayValue(),
		value: current.u_sow_request.u_non_standard_terms.toString()
	},
	line_item_total_value: {
		display_value: current.u_sow_request.u_line_item.u_total_value_amount.getDisplayValue(),
		value: current.u_sow_request.u_line_item.u_total_value_amount.toString()
	},
	rate_notes: {
		display_value: current.u_sow_request.u_rate_notes.getDisplayValue(),
		value: current.u_sow_request.u_rate_notes.toString()
	},
	sow_comments: {
		display_value: current.u_comments.getDisplayValue(),
		value:  current.u_comments.toString()
	},
	rules_affected: [],
	approvals_required: [],
	documents: []
};

var grTC = new GlideRecord('u_sow_approver_list');
grTC.addQuery('u_statement_of_work',current.u_sow_request.sys_id);
grTC.query();
while (grTC.next()) {
	if(answer.rules_affected.indexOf(grTC.u_approval_rules.getDisplayValue())===-1) {
	    answer.rules_affected.push(grTC.u_approval_rules.getDisplayValue());
	}
	answer.approvals_required.push(grTC.u_approver.getDisplayValue());
}

grTC = new GlideRecord('u_sow_documents');
grTC.addQuery('u_sow',current.u_sow_request.sys_id);
grTC.query();
while (grTC.next()) {
	if(grTC.u_attached_document.getDisplayValue()!== "") {
		answer.documents.push({
			display_value: grTC.u_attached_document.getDisplayValue(),
			sys_id: grTC.u_attached_document.sys_id.toString()
		});
	}
}


]]&gt;&lt;/script&gt;&lt;state_field&gt;u_state&lt;/state_field&gt;&lt;sys_created_by&gt;probir.das&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-05-03 21:54:39&lt;/sys_created_on&gt;&lt;sys_id&gt;0ba23480db1dbb002f554672399619ec&lt;/sys_id&gt;&lt;sys_mod_count&gt;104&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;u_pricing_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID","field_name":"number","default_filter":false},{"display":"Account","field_name":"account","default_filter":true},{"display":"Product Description","field_name":"product_description","default_filter":false},{"display":"Product Hours","field_name":"product_hour","default_filter":false},{"display":"T&amp;amp;M Margin","field_name":"tm_margin","default_filter":false},{"display":"Total List Price USD","field_name":"total_list_price","default_filter":false},{"display":"Discount from Base Rate","field_name":"discount_base_rate","default_filter":false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value=""&gt;2b7cc8c2db153b40c8491bfa4b961927&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the SOW {number} for {requester}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="SOW"&gt;90f443e71312bf00a77d34228144b07c&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-998551685</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9335eda91b20e4d42b58ec67bc4bcbc0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab52c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>u_pricing_approvals</table><target_name>SOW</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>30c20661f2b384d4666087e9cf91d16b</update_guid><update_guid_history>30c20661f2b384d4666087e9cf91d16b:-998551685</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_753cc243db254b00a0885e77dc961915</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;false&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="human_resources_rewards_details_template"&gt;a73b2967db01d7000d0e540adc961967&lt;/card_template&gt;&lt;description&gt;Human Resource Total Rewards&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001005&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sn_hr_core_case_total_rewards^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sn_hr_core_case_total_rewards"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// Task type are mandatory fields for My Work
var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());

var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};

var dodGDT = new GlideDateTime();
dodGDT.setDisplayValue(current.sysapproval.getDisplayValue("u_date_of_donation"),gs.getDateFormat());
var dateOfDonation = {
	display_value : dodGDT.getLocalDate().getDisplayValue(),
	value : dodGDT.getNumericValue()
};

answer = {
	number:{
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString()
	},
	approval_type: approvaltype[0],
	requester: current.sysapproval.opened_by.getDisplayValue(),
	requested_for: current.sysapproval.opened_for.getDisplayValue(),
	requested_date: requested_date,
	short_description:current.sysapproval.short_description.getDisplayValue(),
	document: current.document_id.toString(),
	hr_service:current.sysapproval.hr_service.getDisplayValue(),
	opened_for:current.sysapproval.opened_for.getDisplayValue(),
	location:current.sysapproval.location.getDisplayValue(),
	u_organization_name:current.sysapproval.u_cost_center.getDisplayValue(),
	u_organization_category:current.sysapproval.u_organization_category.getDisplayValue(),
	u_organization_tax_id:current.sysapproval.u_organization_tax_id.getDisplayValue(),
	u_organization_city:current.sysapproval.u_organization_city.getDisplayValue(),
	u_organization_state:current.sysapproval.u_organization_state.getDisplayValue(),
	u_organization_zip_code:current.sysapproval.u_organization_zip_code.getDisplayValue(),
	u_organization_country:current.sysapproval.u_organization_country.getDisplayValue(),
	u_organization_contact_phone:current.sysapproval.u_organization_contact_phone.getDisplayValue(),
	u_donation_amount:current.sysapproval.u_donation_amount.getDisplayValue(),
	u_currency_of_donation:current.sysapproval.u_currency_of_donation.getDisplayValue(),
	u_date_of_donation:dateOfDonation,
	u_bank_country:current.sysapproval.u_bank_country.getDisplayValue(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : current.sysapproval.getDisplayValue(),
	title : 'Name: ' + current.sysapproval.opened_by.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state
};
answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;farahnaj.inamdar&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-10-06 09:42:24&lt;/sys_created_on&gt;&lt;sys_id&gt;753cc243db254b00a0885e77dc961915&lt;/sys_id&gt;&lt;sys_mod_count&gt;32&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;lucas.schirm&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-12-02 19:57:22&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Name", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="human_resources_rewards_list_template"&gt;9aec73b2db4593043d7958a8dc961998&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the HR total rewards {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen/&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>1074345602</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9335eda91b20e4d42b58ec67bc4bcbc3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab6c80000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Human Resource Total Rewards</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>fcc206619bb384d46babe7ccd141f57a</update_guid><update_guid_history>fcc206619bb384d46babe7ccd141f57a:1074345602</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_edd245d2db308b44a3ab56a8dc96193e</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="policy_details_template"&gt;fc0cf9e7db81d7000d0e540adc9619ae&lt;/card_template&gt;&lt;description&gt;Policy&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001003&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sn_compliance_policy^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sn_compliance_policy"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var answer = false;
var GApp = new GlideRecord(current.source_table);
GApp.get(current.document_id.toString());
var approvaltype = current.document_id.getDisplayValue().split(':');

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'), gs.getDateTimeFormat());
var requested_date = {
    display_value: gdt.getLocalDate().getDisplayValue(),
    value: gdt.getNumericValue()
};

answer = {
    number: {
        display_value: GApp.number.getDisplayValue(),
        value: GApp.number.getDisplayValue(),
    },
    approval_group: false,
    approval_type: approvaltype[0],
    name: GApp.name.getDisplayValue(),
    department: GApp.u_department.getDisplayValue(),
    valid_to: GApp.valid_to.getDisplayValue(),
    category: GApp.category.getDisplayValue(),
    reviewers: GApp.reviewers.getDisplayValue(),
    type: GApp.type.getDisplayValue(),
    publish_kb: GApp.u_publish_to_kb.toString() == "true" ? "Yes" : "No",
    owner: GApp.owner.getDisplayValue(),
    k_base: GApp.u_knowledge_base.getDisplayValue(),
    classification: GApp.classification.getDisplayValue(),
    audience: GApp.u_audience.getDisplayValue(),
    description: GApp.description.getDisplayValue(),
    article_template: GApp.article_template.getDisplayValue(),
    kb_article: GApp.kb_article.getDisplayValue(),
    requested_date: requested_date,
    request_reason: current.u_request_reason.getDisplayValue(),
    source_table: current.source_table,
    document: current.document_id.toString(),
    due_date: requested_date,
    task_type: approvaltype[0],
    display_field: GApp.name.getDisplayValue(),
    title: 'Owner: ' + GApp.owner.getDisplayValue(),
    notActionable: current[inbox.state_field] != inbox.pending_state
};
if (current.group) {
    answer.approval_group = {
        display_value: current.group.assignment_group.getDisplayValue(),
        value: current.group.assignment_group.toString()
    };
}
answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-27 13:39:17&lt;/sys_created_on&gt;&lt;sys_id&gt;edd245d2db308b44a3ab56a8dc96193e&lt;/sys_id&gt;&lt;sys_mod_count&gt;44&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"Policy Type", "field_name": "name", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Owner", "field_name": "owner", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="policy_list_template"&gt;8029af32dbc193043d7958a8dc961900&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the policy {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Policy"&gt;3ef40be71312bf00a77d34228144b0d1&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-1421103891</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9335eda91b20e4d42b58ec67bc4bcbc6</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab56b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Policy</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>3cc20661dfb384d4081225c83693026c</update_guid><update_guid_history>3cc20661dfb384d4081225c83693026c:-1421103891</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_518585d0dbae8f80a0885e77dc9619d9</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="default_ritm_details_template"&gt;d5220dafdbc597000d0e540adc9619f6&lt;/card_template&gt;&lt;description&gt;Default Requested Item&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001017&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sc_req_item^sysapproval.ref_sc_req_item.cat_item!=1f868a630a0a3cba015c05b89a0f4fd0^sysapproval.ref_sc_req_item.cat_item!=9bee8c0ddb9d6e8004ea750aaf96191a^sysapproval.ref_sc_req_item.cat_item!=c95758d4db75078023f75e77dc96192b^sysapproval.ref_sc_req_item.u_requested_forNSAMEASapprover^sysapproval.ref_sc_req_item.cat_item!=6846242adb5bdb004ed56be3ca96196d^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="!=" or="false" value="1f868a630a0a3cba015c05b89a0f4fd0"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="!=" or="false" value="9bee8c0ddb9d6e8004ea750aaf96191a"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="!=" or="false" value="c95758d4db75078023f75e77dc96192b"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="!=" or="false" value="6846242adb5bdb004ed56be3ca96196d"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var approvaltype = current.document_id.getDisplayValue().split(':');

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};

var variables = [];
var recordGR = new GlideRecord(current.source_table.toString());
recordGR.get(current.document_id.toString());
var catItem = recordGR.getValue("cat_item");

var varSet = [];
var varSetGR = new GlideRecord("io_set_item");
varSetGR.addQuery("sc_cat_item",catItem);
varSetGR.query();
while(varSetGR.next()){
	varSet.push(varSetGR.variable_set.sys_id.toString());
}

var variableGR = new GlideRecord("item_option_new");
variableGR.orderBy("order");
variableGR.addNotNullQuery("question_text");
var orQuery = variableGR.addQuery("cat_item",catItem);
if(varSet.length != 0){
	orQuery.addOrCondition("variable_set","IN",varSet.toString());
}
variableGR.query();
while(variableGR.next()){
	var varName = variableGR.name.toString();
	if(recordGR.variable_pool[varName] &amp;&amp; recordGR.variables[varName]){
//Including the below Regex Check in the If Condition to filterOut display values having sys_id
		var variable_value = recordGR.variables[varName].getDisplayValue();
		if(!variable_value.match(/\b[0-9a-f]{32}\b/)){
			variables.push({
				label : variableGR.question_text.toString(),
				value : recordGR.variable_pool[varName].toString(),
				display_value : recordGR.variables[varName].getDisplayValue()
			});
		}
	}
}

answer = {
	number:{
		display_value: recordGR.number.toString(),
		value: recordGR.sys_id.toString()
	},
	approval_group:false,
	requester: recordGR.getDisplayValue("u_requested_for"),
	photo: recordGR.u_task_for.getDisplayValue("photo"),
	request_type : recordGR.getDisplayValue("cat_item"),
	short_description : recordGR.short_description.toString(),
	variables : variables,
	requested_date: requested_date,
	request_reason: current.getDisplayValue("u_request_reason"),
	source_table: current.source_table.toString(),
	document:current.document_id.toString(),
	due_date:requested_date,
	task_type : recordGR.getDisplayValue("cat_item"),
	display_field : recordGR.number.toString(),
	title : 'Requested For: ' + recordGR.getDisplayValue("u_requested_for"),
	notActionable: current[inbox.state_field] != inbox.pending_state
};
if (current.group)
{

	answer.approval_group = {
		display_value: current.group.assignment_group.getDisplayValue(),
		value: current.group.assignment_group.toString()
	};
}
answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-11-16 08:33:02&lt;/sys_created_on&gt;&lt;sys_id&gt;518585d0dbae8f80a0885e77dc9619d9&lt;/sys_id&gt;&lt;sys_mod_count&gt;79&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="default_ritm_list_template"&gt;53adb736db4593043d7958a8dc96191b&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the requested item {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Default Requested Item"&gt;a3e4cfa71312bf00a77d34228144b072&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-367972887</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9735eda91b20e4d42b58ec67bc4bcbc2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eaba8e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Default Requested Item</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>41c20661e0b384d4d1a8212f4af9cde5</update_guid><update_guid_history>41c20661e0b384d4d1a8212f4af9cde5:-367972887</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_c9deee1ddb2ad7004ed56be3ca961996</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="newhire_details_template"&gt;d29faa91db6ad7004ed56be3ca961999&lt;/card_template&gt;&lt;description&gt;New Hire Account Access&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001003&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sc_req_item^sysapproval.ref_sc_req_item.cat_item=c95758d4db75078023f75e77dc96192b^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sc_req_item"/&gt;&lt;item endquery="false" field="sysapproval.ref_sc_req_item.cat_item" goto="false" newquery="false" operator="=" or="false" value="c95758d4db75078023f75e77dc96192b"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'), gs.getDateTimeFormat());
var requested_date = {
    display_value: gdt.getLocalDate().getDisplayValue(),
    value: gdt.getNumericValue()
};

var variables = [];
var recordGR = new GlideRecord(current.source_table.toString());
recordGR.get(current.document_id.toString());
var catItem = recordGR.getValue("cat_item");

var varSet = [];
var varSetGR = new GlideRecord("io_set_item");
varSetGR.addQuery("sc_cat_item", catItem);
varSetGR.query();
while (varSetGR.next()) {
    varSet.push(varSetGR.variable_set.sys_id.toString());
}

var variableGR = new GlideRecord("item_option_new");
variableGR.orderBy("order");
variableGR.addNotNullQuery("question_text");
var orQuery = variableGR.addQuery("cat_item", catItem);
if (varSet.length != 0) {
    orQuery.addOrCondition("variable_set", "IN", varSet.toString());
}

variableGR.query();
while (variableGR.next()) {
    var varName = variableGR.name.toString();
    if (recordGR.variable_pool[varName] &amp;&amp; recordGR.variables[varName]) {
        variables.push({
            name: variableGR.name.toString(),
            label: variableGR.question_text.toString(),
            value: recordGR.variable_pool[varName].toString(),
            display_value: recordGR.variables[varName].getDisplayValue()
        });
    }
}

var varpool = {};
for (i = 0; i &lt; variables.length; i++) {
    //gs.addInfoMessage(variables[i].name);
    varpool[variables[i].name] = {};
    varpool[variables[i].name].value = variables[i].value;
    varpool[variables[i].name].display_value = variables[i].display_value;
}

answer = {
    number: {
        display_value: recordGR.number.toString(),
        value: recordGR.sys_id.toString()
    },
    approval_group: false,
    requester: recordGR.getDisplayValue("u_requested_for"),
    photo: recordGR.u_task_for.getDisplayValue("photo"),
    request_type: recordGR.getDisplayValue("cat_item"),
    short_description: recordGR.short_description.toString(),
    variables: variables,
    varpool: varpool,
    requested_date: requested_date,
    request_reason: current.getDisplayValue("u_request_reason"),
    source_table: current.source_table.toString(),
    document: current.document_id.toString(),
    cost_center: {
        display_value: recordGR.u_requested_for.department.cost_center.code,
        value: recordGR.u_requested_for.department.cost_center.code.toString()
    },
    job_title: {
        display_value: recordGR.u_requested_for.title,
        value: recordGR.u_requested_for.title.toString()
    },
    due_date: requested_date,
    task_type: recordGR.getDisplayValue("cat_item"),
    display_field: recordGR.number.toString(),
    title: recordGR.short_description.toString(),
    notActionable: current[inbox.state_field] != inbox.pending_state
};
if (current.group) {

    answer.approval_group = {
        display_value: current.group.assignment_group.getDisplayValue(),
        value: current.group.assignment_group.toString()
    };
}
answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;balamuru.balamurugan&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-06-06 14:58:13&lt;/sys_created_on&gt;&lt;sys_id&gt;c9deee1ddb2ad7004ed56be3ca961996&lt;/sys_id&gt;&lt;sys_mod_count&gt;43&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sc_req_item&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="newhire_list_template"&gt;ba8fee51db6ad7004ed56be3ca961900&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the requested item {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="New Hire Account Access"&gt;31f447e71312bf00a77d34228144b0ee&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_requested_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>960238866</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9735eda91b20e4d42b58ec67bc4bcbc5</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab5a10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>New Hire Account Access</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>78c2066153b384d4961a6ae41b654c6e</update_guid><update_guid_history>78c2066153b384d4961a6ae41b654c6e:960238866</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_3a900121db1c8700a0885e77dc961970</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="knowledge_details_template"&gt;abe4b9abdb41d7000d0e540adc961996&lt;/card_template&gt;&lt;description&gt;Knowledge&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001002&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=kb_knowledge^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="kb_knowledge"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[
var approvaltype = current.document_id.getDisplayValue().split(':');

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var gd = new GlideDate(); 
gd.setDisplayValue(gdt.getDisplayValue());
var requested_date = {
	display_value : gd.getDisplayValue(),
	value : gdt.getNumericValue()
};

var grKBA = new GlideRecord('kb_knowledge');
grKBA.get(current.document_id.toString());
var grKBADate = new GlideDateTime();
grKBADate.setDisplayValue(grKBA.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
gd.setDisplayValue(grKBADate.getDisplayValue());
var requested_date_grKBA = {
	display_value : gd.getDisplayValue(),
	value : grKBADate.getNumericValue()
};

var validGDT = new GlideDateTime();
validGDT.setDisplayValue(grKBA.getDisplayValue('valid_to'),gs.getDateFormat());
gd.setDisplayValue(validGDT.getDisplayValue());
var validTo = {
	display_value : gd.getDisplayValue(),
	value:validGDT.getNumericValue()
};

answer = {
	number:{
		display_value: grKBA.number.toString(),
		value: grKBA.sys_id.toString()
	},
	approval_type: approvaltype[0],
	requester: grKBA.author.getDisplayValue(),
	requested_date: requested_date,
	request_reason: current.u_request_reason.getDisplayValue(),
	knowledge_base:grKBA.kb_knowledge_base.getDisplayValue(),
	category:grKBA.kb_category.getDisplayValue(),
	created:requested_date_grKBA,
	valid_to:validTo,
	region:grKBA.u_region.getDisplayValue(),
	meta:grKBA.meta.getDisplayValue(),
	comment:current.comments,
	short_description:grKBA.short_description.getDisplayValue(),
	document: current.document_id.toString(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : grKBA.number.toString(),
	title : 'Created By: ' + grKBA.author.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state	
};

answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-07-31 09:02:41&lt;/sys_created_on&gt;&lt;sys_id&gt;3a900121db1c8700a0885e77dc961970&lt;/sys_id&gt;&lt;sys_mod_count&gt;71&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;kb_knowledge&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true},{"display":"Created By", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="knowledge_list_template"&gt;4d196372dbc193043d7958a8dc961915&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the knowledge article {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Knowledge"&gt;38f483e71312bf00a77d34228144b064&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;author&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>1551131312</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9b35eda91b20e4d42b58ec67bc4bcbc1</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab46c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Knowledge</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>fcc206616fb384d428ea82071c73ae64</update_guid><update_guid_history>fcc206616fb384d428ea82071c73ae64:1551131312</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_ac2056b8dbbfe300aefbeeb5ca961935</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="default_hi_details_template"&gt;deed802edb3b2b40ae4cdda5ca961936&lt;/card_template&gt;&lt;description&gt;HI Approvals - Roles&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001004&lt;/number&gt;&lt;query table="x_snc_uni_inbox_universal_box_external_approvals"&gt;state=requested^universal_inbox=ac2056b8dbbfe300aefbeeb5ca961935^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item display_table="universal_inbox" display_value="HI Approvals - Roles" endquery="false" field="universal_inbox" goto="false" newquery="false" operator="=" or="false" value="ac2056b8dbbfe300aefbeeb5ca961935"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
	
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example
/*
answer = {
	number:current.number,
	assigned_to:{
		display_value:current.assigned_to.getDisplayValue(),
		value:current.assigned_to.toString()
	},
	user_location:{
		display_value:current.caller_id.location.getDisplayValue(),
		value:current.caller_id.location.toString()
	}
}
 */

var hi_payload = JSON.parse(current.payload);

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};

var hi_instance = gs.getProperty('x_snc_uni_inbox.approval.central.hi.instance');
var redirect_url = hi_instance + hi_payload.source_table + '.do?sys_id='+hi_payload.source_record;

if(current.requestor){
	answer =  {
		number:{
			display_value: hi_payload.role,
			value: hi_payload.sys_id
		},
		requester:{
			display_value:current.requestor.getDisplayValue(),
			value:current.requestor.toString()
		},
		requested_date: requested_date,
		short_description: hi_payload.role,
		redirect_url: redirect_url.toString()
	};
}
else{
	answer = {
		number:{
			display_value: hi_payload.role,
			value: hi_payload.sys_id
		},
		requester:{
			display_value:hi_payload.requested_for,
			value:hi_payload.requested_for
		},
		requested_date: requested_date,
		short_description: hi_payload.role,
		redirect_url: redirect_url.toString()
	};
}




answer;

]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;probir.das&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-02-20 22:56:47&lt;/sys_created_on&gt;&lt;sys_id&gt;ac2056b8dbbfe300aefbeeb5ca961935&lt;/sys_id&gt;&lt;sys_mod_count&gt;66&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;x_snc_uni_inbox_universal_box_external_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;true&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;![CDATA[(function (eventGr, logUtil) {
	/**
 	* Usage of variables:
 	* eventGr - created event record to use from
 	* logUtil.debug - Debugging
 	* logUtil.info - Information
 	* logUtil.warn - Warning
 	* logUtil.error - Error
 	* result - Set result variable to the state and response you want to display on the event record
 	**/
	
	var payload = JSON.parse(eventGr.input_payload);
	
	if (payload) {
		if(payload.state){
			if (payload.approver &amp;&amp; payload.requested_for &amp;&amp; payload.sys_id &amp;&amp; payload.source_record) {
				
				var approver_id = getEmployee("user_name", payload.approver);
				var requestorStr = payload.requested_for_user_name.toString();
				var nameSplit = requestorStr.split(' ');
				var requested_for_id = getEmployee("name", nameSplit[0] + ' ' + nameSplit[1]);
				if (approver_id) {
					var appGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
					appGr.addQuery('external_approval_id',payload.sys_id);
					appGr.query();
					if(appGr.getRowCount() &gt; 0){
						if(payload.state == 'requested'){
							while(appGr.next()){
								if(appGr.getValue('state') == 'requested'){
									appGr.setValue('state','not_required');
									appGr.update();
								}
								// 								else{
									// 									generateExternalApproval(payload,nameSplit,eventGr,approver_id);
									// 									eventGr.state = 'processed';
									// 									gs.info('inside approval not in requested state');
									// 								}
								}
								generateExternalApproval(payload,requestorStr,eventGr,approver_id);
								eventGr.state = 'processed';
							}
							else if(payload.state != 'requested'){
								while(appGr.next()){
									if(appGr.getValue('state') == 'requested'){
										appGr.state = 'not_required';
										appGr.update();
										eventGr.state = 'processed';
									}
									else{
										eventGr.state = 'processed';
									}
								}
							}
						}
						else{
							if(payload.state == 'requested'){
								generateExternalApproval(payload,requestorStr,eventGr,approver_id);
								eventGr.state = 'processed';
							}
							else{
								eventGr.state = 'processed';
							}
						}
						
					}
					else {
						logUtil.error("Not able to identify approver in Surf.");
						eventGr.state = 'error';
					}
					
				}
				else {
					logUtil.error("Some mandatory attributes were not passed as part of the payload.");
					eventGr.state = 'error';
				}
			}
			else{
				logUtil.error("The approval record doesn't have state.");
				eventGr.state = 'error';
			}
			
		}
		else {
			logUtil.error("Payload is not passed as part of the event.");
			eventGr.state = 'error';
		}
		eventGr.setWorkflow(false);
		eventGr.update();
	})(eventGr, logUtil);
	
	
	function getEmployee(field, value) {
		var grEmp = new GlideRecord('u_employee');
		grEmp.addEncodedQuery('active=true^' + field + '=' + value);
		grEmp.query();
		if (grEmp.next()) {
			return grEmp.sys_id;
		}
		return '';
	}
	
	
	function generateExternalApproval(payload,requestorStr,eventGr,approver_id){
		var requested_for_id = getEmployee("user_name", requestorStr);
		
		var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
		approvalGr.initialize();
		approvalGr.requestor = requested_for_id;
		approvalGr.universal_inbox = eventGr.universal_inbox;
		approvalGr.external_case_number = payload.number;
		approvalGr.state = 'requested';
		approvalGr.payload = eventGr.input_payload;
		approvalGr.approver = approver_id;
		approvalGr.external_approval_id = payload.sys_id;
		approvalGr.custom_field_1 = payload.role;
		approvalGr.custom_field_2 = payload.requested_for;
		approvalGr.approval_summary = payload.role + " has been requested for "+payload.requested_for + " on HI";
		approvalGr.insert();
		
	}]]&gt;&lt;/x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;x_snc_uni_inbox_incident_template display_value="Approval Central - Hi Outbound failure"&gt;32141147dbbdf300beb1440805961907&lt;/x_snc_uni_inbox_incident_template&gt;&lt;x_snc_uni_inbox_list_details_template display_value="default_hi_list_template"&gt;23bd44eadb3b2b40ae4cdda5ca961980&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries&gt;3&lt;/x_snc_uni_inbox_maximum_retries&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the role {number} for {requester}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;![CDATA[(function(eventGr,logUtil){
	/**
	* Usage of variables:
	* eventGr - created event record to use from 
	* logUtil.debug - Debugging 
	* logUtil.info - Information 
	* logUtil.warn - Warning 
	* logUtil.error - Error 
	* result - Set result variable to the state and response you want to display on the event record 
	**/
	
	result = 'error';
	var payloadObj = JSON.parse(eventGr.getValue('input_payload'));
	var responseBody = '';
	var employeeGr = new GlideRecord('u_employee');
	employeeGr.get('user_name', eventGr.approval_record.sys_updated_by);
	
	
	var typeToComment = {
		'approved':"Approved in Surf : By " + employeeGr.getValue('name'),
		'rejected':"Rejected in Surf : By " + employeeGr.getValue('name')
	};
	
	var comment = global.JSUtil.notNil(eventGr.approval_record.comments) ? typeToComment[eventGr.getValue('event_type')] + '\n Reason : ' + eventGr.approval_record.comments : typeToComment[eventGr.getValue('event_type')];
	
	var reqBody = {
		"source_table": payloadObj.source_table.toString(),
		"source_record": payloadObj.source_record.toString(),
		"sys_id": payloadObj.sys_id.toString(),
		"approver": payloadObj.approver.toString(),
		"state": eventGr.event_type.toString(),
		"requested_for": payloadObj.requested_for.toString(),
		"updated_on": eventGr.sys_updated_on.toString(),
		"comments":comment
	};
	
	try {
		
		var instanceName = gs.getProperty('x_snc_uni_inbox.approval.central.hi.instance');
		var url = instanceName + 'api/snc/surf_approval_central_gateway/updateApproval';
		var r = new sn_ws.RESTMessageV2('Hi Approval Central API', 'updateApproval');
		r.setEndpoint(url);
		r.setRequestHeader('Content-Type', "application/json");
		r.setRequestHeader('Accept','application/json');
		var reqB = JSON.stringify(reqBody);
		r.setRequestBody(reqB);
		logUtil.info(r.getRequestBody());
		
		var response = r.executeAsync();
		
		responseBody = response.getBody();
		var httpStatus = response.getStatusCode();
		
		if (httpStatus == 200) {
			logUtil.info('_updateApproval:' + responseBody);
			result = 'processed';
		}
		else {
			logUtil.error('_updateApproval:' + responseBody);
			result = 'error';
		}
		
	} catch (err) {
		logUtil.error('Exception:' + err.getMessage());
	}
	
})(eventGr,logUtil);


function generateOutboundEvent(oldEventGr){
	var retry_count = 1;
	if(oldEventGr.retry_count){
		retry_count = oldEventGr.retry_count + retry_count;
	}
	var eventGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_events');
	eventGr.initialize();
	eventGr.universal_inbox = oldEventGr.universal_inbox;
	eventGr.event_type = oldEventGr.event_type;
	eventGr.type = 'outbound';
	eventGr.input_payload = oldEventGr.payload;
	eventGr.approval_record = oldEventGr.approval_record;
	eventGr.retry_count = retry_count;
	eventGr.insert();
}]]&gt;&lt;/x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Hi Approvals - Roles"&gt;44f403e71312bf00a77d34228144b0d5&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-2098524318</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9b35eda91b20e4d42b58ec67bc4bcbc4</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab6540000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>x_snc_uni_inbox_universal_box_external_approvals</table><target_name>HI Approvals - Roles</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>bcc2066135b384d462af416adde41875</update_guid><update_guid_history>bcc2066135b384d462af416adde41875:-2098524318</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_340c8c6adbe10300a3ab56a8dc961908</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="travel_request_details_template"&gt;d430dd70db915300300b575e5e961996&lt;/card_template&gt;&lt;description&gt;Travel Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001004&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=x_snc_my_travel_travel_request^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="x_snc_my_travel_travel_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
//var answer = false;
//var GApp = new GlideRecord(current.source_table);
//GApp.addQuery('assignment_group', '8a5055c9c61122780043563ef53438e3');
//GApp.addQuery('sys_id',current.document_id.toString());
//GApp.query();
var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};

answer = {
	number:{
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString()
	},
	approval_type: approvaltype[0],
	requester: current.sysapproval.requestor.getDisplayValue(),
	requested_for: current.sysapproval.requested_for.getDisplayValue(),
	requested_date: requested_date,
	request_reason: current.u_request_reason.getDisplayValue(),
	planned_travel_date:current.sysapproval.planned_travel_date.getDisplayValue(),
	project:current.sysapproval.project.getDisplayValue(),
	reason:current.sysapproval.reason.getDisplayValue(),
	airfare:current.sysapproval.airfare.getReferenceDisplayValue(),
	hotel:current.sysapproval.hotel.getReferenceDisplayValue(),
	rental:current.sysapproval.rental.getReferenceDisplayValue(),
	meals:current.sysapproval.meals.getReferenceDisplayValue(),
	others:current.sysapproval.others.getReferenceDisplayValue(),
	total:current.sysapproval.total.getReferenceDisplayValue(),
	short_description:current.sysapproval.short_description.getDisplayValue(),
	document: current.document_id.toString(),
	quarter:current.sysapproval.fiscal_year.getDisplayValue(),
	travel_location_from:current.sysapproval.travel_location_from.getDisplayValue(),
	travel_to:current.sysapproval.travel_to.getDisplayValue(),
	bizjustification: current.sysapproval.business_justification.getDisplayValue(),
	travelcostfundedflag:current.sysapproval.travel_cost_funded.getDisplayValue(),
	travelcostfundedreason:current.sysapproval.funded_reason.getDisplayValue(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : current.sysapproval.getDisplayValue(),
	title : 'Requested For: ' + current.sysapproval.requested_for.getDisplayValue(),
	notActionable: current[inbox.state_field] != inbox.pending_state
};

answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;amit.ruwali&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-10-04 11:05:19&lt;/sys_created_on&gt;&lt;sys_id&gt;340c8c6adbe10300a3ab56a8dc961908&lt;/sys_id&gt;&lt;sys_mod_count&gt;47&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;x_snc_my_travel_travel_request&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Requested For", "field_name": "requested_for", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="travel_request_list_template"&gt;46201d70db915300300b575e5e961913&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the travel request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Travel Request"&gt;53e48fa71312bf00a77d34228144b0ff&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;requested_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-158997492</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9f35eda91b20e4d42b58ec67bc4bcbc0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab67c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Travel Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>b8c20661e0b384d46e6a258137fbf777</update_guid><update_guid_history>b8c20661e0b384d46e6a258137fbf777:-158997492</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_8f4a7b05dbc7360004cef6c5ae9619f6</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="sales_quote_details_template"&gt;993c1468dbdd9f003d7958a8dc9619df&lt;/card_template&gt;&lt;description&gt;Sales Quote&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001007&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sales_quote^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sales_quote"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var grQUO = new GlideRecord('sales_quote');
grQUO.get(current.document_id.toString());
var approvaltype = current.document_id.getDisplayValue().split(':');
var approvalJSON = JSON.parse(grQUO.u_approval_json.toString());

var renewalInc = approvalJSON.renewalPercentACVInc;

var upsellInc = approvalJSON.upsellPercentIncInACV;

if (global.JSUtil.notNil(renewalInc)) {
	renewalInc = Math.round(renewalInc);
} else {
	renewalInc = 0;
}

if (global.JSUtil.notNil(upsellInc)) {
	upsellInc = Math.round(upsellInc);
} else {
	upsellInc = 0;
}

var renewal_amt = 0;
if (global.JSUtil.notNil(grQUO.opportunity.u_renewal_acv)) {
	var renewal = grQUO.opportunity.u_renewal_acv.split(' ');
	if (global.JSUtil.notNil(renewal[1])) {
		renewal_amt = renewal[1];
	}
}
var contractAcv = getACV(grQUO.opportunity.account.sys_id.toString());
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'), gs.getDateTimeFormat());
var requested_date = {
	display_value: gdt.getLocalDate().getDisplayValue(),
	value: gdt.getNumericValue()
};

var closeGDT = new GlideDateTime();
closeGDT.setDisplayValue(grQUO.opportunity.close_date.getDisplayValue(), gs.getDateFormat());
var close_date = {
	display_value: closeGDT.getLocalDate().getDisplayValue(),
	value: closeGDT.getNumericValue()
};
var ourUser = new GlideRecord('sys_user');
ourUser.get(grQUO.u_order_submitter.toString());

answer = {
	number: {
		display_value: grQUO.number.getDisplayValue(),
		value: grQUO.number.toString()
	},
	name: {
		display_value: grQUO.name.toString(),
		value: grQUO.name.toString()
	},
	approval_type: approvaltype[0],
	account: {
		display_value: grQUO.opportunity.account.getDisplayValue(),
		value: grQUO.opportunity.account.sys_id.toString(),
		table: "sales_account"
	},
	opportunity: {
		display_value: grQUO.opportunity.getDisplayValue(),
		value: grQUO.opportunity.sys_id.toString(),
		table: "sales_opportunity"
	},
	
	requested_date: requested_date,
	requester: ourUser.getDisplayValue(),
	
	owner: grQUO.opportunity.u_quote_owner.getDisplayValue(),
	territory: (grQUO.opportunity.u_forecast_type == '1' || grQUO.opportunity.u_forecast_type == '2') ? grQUO.opportunity.u_msp_territory.getDisplayValue() : grQUO.opportunity.u_territory.getDisplayValue(),
	sales_type: grQUO.sales_type.getDisplayValue(),
	reason_for_request: approvalJSON.commKey.toString(),

	
	type: grQUO.opportunity.type.getDisplayValue(),
	term: grQUO.opportunity.u_term_months_and_days.getDisplayValue(),
	close_date: grQUO.opportunity.close_date.getDisplayValue(),
	payment_terms: grQUO.payment_terms.getDisplayValue(),
	base_currency: grQUO.u_base_currency.getDisplayValue(),
	
	
	estimated_total: formatMoneyString((contractAcv.currentAcv + grQUO.u_ssa_rollup_netnewacv_usd_a).toFixed(2)),
	total_acv_base: formatMoneyString((contractAcv.currentAcvBase + grQUO.u_ssa_rollup_netnewacv_a).toFixed(2)),
	total_new_renewal_acv: grQUO.u_total_new_renewal_acv.getDisplayValue(),
	total_renewal_acv_base: renewal_amt,
	total_renewal_acv_usd: grQUO.opportunity.u_usd_renewal_acv.getDisplayValue() || 0,
	total_net_new_acv_base: grQUO.u_ssa_rollup_netnewacv_a.getDisplayValue(),
	total_net_new_acv_usd: grQUO.u_ssa_rollup_netnewacv_usd_a.getDisplayValue(),
	total_roll_up_acv_base: grQUO.u_ssa_rollup_acv_amount.getDisplayValue(),
	total_roll_up_acv_usd: grQUO.u_ssa_rollup_acv_usd_a.getDisplayValue(),
	total_ps_base: grQUO.u_ssa_rollup_serv_amount.getDisplayValue(),
	total_ps_usd: grQUO.u_ssa_rollup_serv_rev_usd_a.getDisplayValue(),
	annual_list_price_base: grQUO.u_total_annual_list_price.getDisplayValue(),
	annual_list_price_usd: grQUO.u_usd_total_annual_list_price.getDisplayValue(),
	data_center: grQUO.u_data_center.getDisplayValue(),
	price_band: grQUO.price_band.getDisplayValue(),
	highest_discount: grQUO.u_approval_discount.getDisplayValue(),
	current_acv: formatMoneyString(contractAcv.currentAcv.toFixed(2)),
	current_acv_base: formatMoneyString(contractAcv.currentAcvBase.toFixed(2)),
	current_price_increase: "Renewal " + renewalInc + "% ACV Increase / Upsell " + upsellInc + "%",
	//comment: current.comments,
	document: current.document_id.toString(),
	approval_list: getApprovals(current.document_id.toString()),
	product_list: getProductList(current.document_id.toString()),
	due_date:requested_date,
	task_type : 'Sales Quote',
	display_field : grQUO.opportunity.account.getDisplayValue(),
	title : 'ACV: '+ grQUO.u_ssa_rollup_acv_amount.getDisplayValue() + ' ('+grQUO.u_base_currency.getDisplayValue()+') / '+grQUO.u_ssa_rollup_acv_usd_a.getDisplayValue()+' (USD)',
	notActionable: current[inbox.state_field] != inbox.pending_state,
	reason: {
		display_value: current.u_request_reason.getDisplayValue()
	}
};

function getACV(accountID) {
	var currentACV = 0;
	var currentAcvBase = 0;
	var acv = {};
	var salesContractGR = new GlideRecord('sales_contract');
	salesContractGR.addQuery('account', accountID);
	salesContractGR.addNotNullQuery("u_usd_total_acv");
	salesContractGR.addActiveQuery();
	salesContractGR.query();

	while (salesContractGR.next()) {
		currentAcvBase = currentAcvBase + parseFloat(salesContractGR.u_ssa_rollup_acv_amount.toString());
		currentACV = currentACV + parseFloat(salesContractGR.u_usd_total_acv.toString());
	}
	acv.currentAcvBase = currentAcvBase;
	acv.currentAcv = currentACV;
	return acv;
}

function formatMoneyString(moneyString) { 
	if(global.JSUtil.notNil(moneyString)){
		var parts = moneyString.toString().split(".");
		parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		return parts.join(".");
	}
	return 0;
}

function getComments(comments){
	if(global.JSUtil.notNil(comments)){
		if(comments.indexOf('reply from:')&gt; -1 &amp;&amp; comments.indexOf('Ref:')&gt; -1 ){
			var employeeEmail = '@servicenow.com';
			if(comments.indexOf('@gmail.com')&gt; -1)
				employeeEmail = '@gmail.com';
			var parsedComm = comments.slice(comments.indexOf(employeeEmail) + employeeEmail.length +1,comments.indexOf('Ref:'));
			if(global.JSUtil.nil(parsedComm.trim())){
				parsedComm = comments.slice(comments.indexOf('Ref:'),comments.indexOf('Ref:')+251);
			}
			return parsedComm.slice(0,255);
		}
		if(comments.indexOf('Subject:') &gt; -1)
			return customComments(comments);
		else
			return comments.slice(0,255);
	}

}
function customComments(comments){
	var rows = comments.toString().split('\n');
	var newString = '';
	var subject = false;
	for(var i = 0; i &lt; rows.length; i++){
		if(subject){
			if(rows[i].indexOf('From') != -1){
				break;
			}
			newString += rows[i] +'  ';
		}
		if(rows[i].indexOf('Subject') != -1){
			subject = true;
		}
	}
	newString.trim();
	return newString.slice(0,255);
}


function getProductList(docID) {
	var products = [];
	var grProduct = new GlideRecord('sales_opportunity_item');
	grProduct.addQuery('u_quote', docID);
	grProduct.addQuery('quantity', '!=', 0);
	grProduct.orderByDesc('discount_percent');
	grProduct.query();
	while (grProduct.next()) {
		products.push({
			name: grProduct.getDisplayValue("u_product_price"),
			quantity: grProduct.quantity.toString(),
			sales_price: grProduct.getDisplayValue("u_sales_price_string"),
			partner_discount: grProduct.getDisplayValue("u_partner_discount"),
			discount_percent: grProduct.getDisplayValue("discount_percent"),
			acv: grProduct.getDisplayValue("u_annual_contract_value_string"),
			nnacv: grProduct.getDisplayValue("u_net_new_acv_string"),
			total_value: grProduct.getDisplayValue("u_total_value_string"),
			currency_code: grProduct.getDisplayValue("u_currency_code")
		});
	}
	return products;
}

function getApprovals(docID) {
	var approvals = [];
	var appMetricGR = new GlideRecord('u_quote_approval_metric');
	appMetricGR.addQuery('u_quote_id', docID);
	appMetricGR.addQuery('u_active', 'true');
	appMetricGR.orderBy('u_approval_order');
	appMetricGR.query();
	while (appMetricGR.next()) {
		var approverOrGroup = '';
		if(appMetricGR.u_approver != '')
			approverOrGroup = appMetricGR.getDisplayValue("u_approver");
		else if(appMetricGR.u_group_approver != '')
			approverOrGroup = appMetricGR.getDisplayValue("u_group_approver");
		var approval = {
			approver: approverOrGroup,
			title: appMetricGR.getDisplayValue("u_approval_required"),
			state: "Not Yet Requested",
			approved_on: appMetricGR.u_last_approved_on.nil() ? "" : appMetricGR.u_last_approved_on.getDisplayValue(),
			overridden: appMetricGR.u_override_reason.nil() ? "No" : "Yes",
			approval_name: "Business Monitoring",
			description: appMetricGR.u_approval_description.toString()
		};
		if (appMetricGR.getDisplayValue("u_approved_type") == 'Automated') {
			var descSplit = approval.description.split("-");
			approval.approval_name = descSplit[0];
			//approval.description = descSplit[1];
		}

		var approvalGR = new GlideRecord('sysapproval_approver');
		approvalGR.addQuery("document_id", docID);
		approvalGR.addQuery("state", "!=", "not_required");
		if(appMetricGR.u_group_approver != '')
			approvalGR.addQuery("group.assignment_group", appMetricGR.u_group_approver.sys_id.toString());
		else
			approvalGR.addQuery("approver", appMetricGR.u_approver.sys_id.toString());
		approvalGR.orderByDesc('sys_created_on');
		approvalGR.query();
		if (approvalGR.next()) {
			approval.state = approvalGR.getDisplayValue("state");
			approval.comments = getComments(approvalGR.comments);
		}
		approvals.push(approval);
	}
	return approvals;
}

answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-29 05:58:33&lt;/sys_created_on&gt;&lt;sys_id&gt;8f4a7b05dbc7360004cef6c5ae9619f6&lt;/sys_id&gt;&lt;sys_mod_count&gt;178&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)
]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"Account", "field_name": "account", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"ACV", "field_name": "total_net_new_acv_base", "default_filter" : false,"sort_by_value":true},{"display":"ID", "field_name": "number", "default_filter" : false,"sort_by_value":true},{"display":"Opportunity", "field_name": "opportunity", "default_filter" : false,"sort_by_value":true}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="sales_quote_list_template"&gt;713c54a8dbdd9f003d7958a8dc9619ef&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the sales quote {account}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Sales Quote"&gt;0df4c3e71312bf00a77d34228144b0a4&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>2052491351</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>9f35eda91b20e4d42b58ec67bc4bcbc3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab8700000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Sales Quote</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>41c2066182b384d4ab53ba01c18b7888</update_guid><update_guid_history>41c2066182b384d4ab53ba01c18b7888:2052491351</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_4fdfc238dbbfe300aefbeeb5ca96197b</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="default_hi_details_template"&gt;deed802edb3b2b40ae4cdda5ca961936&lt;/card_template&gt;&lt;description&gt;HI Approvals - Communities Forum&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001003&lt;/number&gt;&lt;query table="x_snc_uni_inbox_universal_box_external_approvals"&gt;state=requested^universal_inbox=4fdfc238dbbfe300aefbeeb5ca96197b^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item display_table="universal_inbox" display_value="HI Approvals - Communities Forum" endquery="false" field="universal_inbox" goto="false" newquery="false" operator="=" or="false" value="4fdfc238dbbfe300aefbeeb5ca96197b"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
	
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example
/*
	answer = {
		number:current.number,
		assigned_to:{
			display_value:current.assigned_to.getDisplayValue(),
			value:current.assigned_to.toString()
		},
		user_location:{
			display_value:current.caller_id.location.getDisplayValue(),
			value:current.caller_id.location.toString()
		}
	}
*/

var hi_payload = JSON.parse(current.payload);

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};
var hi_instance = gs.getProperty('x_snc_uni_inbox.approval.central.hi.instance');
var redirect_url = hi_instance + hi_payload.source_table + '.do?sys_id='+hi_payload.source_record;
answer = {
	number:{
		display_value: current.custom_field_2.toString(),
		value: hi_payload.sys_id
	},
	requester:{
		display_value:current.custom_field_1.toString(),
		value:current.custom_field_1.toString()
	},
	requested_date: requested_date,
	short_description: current.custom_field_2,
	redirect_url: redirect_url.toString()
};

answer;
]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;probir.das&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-02-20 22:55:35&lt;/sys_created_on&gt;&lt;sys_id&gt;4fdfc238dbbfe300aefbeeb5ca96197b&lt;/sys_id&gt;&lt;sys_mod_count&gt;29&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;x_snc_uni_inbox_universal_box_external_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;true&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;![CDATA[(function (eventGr, logUtil) {
	/**
 	* Usage of variables:
 	* eventGr - created event record to use from
 	* logUtil.debug - Debugging
 	* logUtil.info - Information
 	* logUtil.warn - Warning
 	* logUtil.error - Error
 	* result - Set result variable to the state and response you want to display on the event record
 	**/
	
	var payload = JSON.parse(eventGr.input_payload);

    if (payload) {
        if (payload.approver &amp;&amp; payload.requested_for &amp;&amp; payload.sys_id &amp;&amp; payload.source_record) {

            var approver_id = getEmployee("user_name", payload.approver);
			var requestorStr = payload.requested_for.toString();
			//var nameSplit = requestorStr.split(' ');
			
            if (approver_id) {
               var appGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
					appGr.addQuery('external_approval_id',payload.sys_id);
					appGr.query();
					if(appGr.getRowCount() &gt; 0){
						if(payload.state == 'requested'){
							while(appGr.next()){
								if(appGr.getValue('state') == 'requested'){
									appGr.setValue('state','not_required');
									appGr.update();
								}
// 								else{
// 									generateExternalApproval(payload,nameSplit,eventGr,approver_id);
// 									eventGr.state = 'processed';
// 									gs.info('inside approval not in requested state');
// 								}
							}
							var approval_record = generateExternalApproval(payload,requestorStr,eventGr,approver_id);
							eventGr.state = 'processed';
							eventGr.approval_record = approval_record;
						}
						else if(payload.state != 'requested'){
							while(appGr.next()){
								if(appGr.getValue('state') == 'requested'){
									appGr.state = 'not_required';
									appGr.update();
									eventGr.state = 'processed';
								}
								else{
									eventGr.state = 'processed';
								}
							}
						}
					}
					else{
						if(payload.state == 'requested'){
							var approval_recor = generateExternalApproval(payload,requestorStr,eventGr,approver_id);
							eventGr.state = 'processed';
							eventGr.approval_record = approval_recor;
						}
						else{
									eventGr.state = 'processed';
								}
					}
					
				}
            else {
                logUtil.error("Not able to identify approver in Surf.");
				eventGr.state = 'error';
            }

        }
        else {
            logUtil.error("Some mandatory attributes were not passed as part of the payload.");
			eventGr.state = 'error';
        }
    }
    else {
		logUtil.error("Payload is not passed as part of the event.");
		eventGr.state = 'error';
    }
	eventGr.setWorkflow(false);
    eventGr.update();
})(eventGr, logUtil);


function getEmployee(field, value) {
	var grEmp = new GlideRecord('u_employee');
	grEmp.addEncodedQuery('active=true^' + field + '=' + value);
	grEmp.query();
	if (grEmp.next()) {
		return grEmp.sys_id;
	}
	return '';
}

function generateExternalApproval(payload,requestorStr,eventGr,approver_id){
	var requestor = payload.requested_for.toString();
	
	var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
	approvalGr.initialize();
	approvalGr.universal_inbox = eventGr.universal_inbox;
	approvalGr.external_case_number = payload.source_record;
	approvalGr.state = 'requested';
	approvalGr.payload = eventGr.input_payload;
	approvalGr.approver = approver_id;
	approvalGr.external_approval_id = payload.sys_id;
	
	approvalGr.custom_field_1 = requestor;
	approvalGr.custom_field_2 = payload.forum;
	approvalGr.approval_summary = "Approval for "+payload.forum +" forum membership";
	approvalGr.insert();
}]]&gt;&lt;/x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;x_snc_uni_inbox_incident_template display_value="Approval Central - Hi Outbound failure"&gt;32141147dbbdf300beb1440805961907&lt;/x_snc_uni_inbox_incident_template&gt;&lt;x_snc_uni_inbox_list_details_template display_value="default_hi_list_template"&gt;23bd44eadb3b2b40ae4cdda5ca961980&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries&gt;3&lt;/x_snc_uni_inbox_maximum_retries&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the membership at {number} for {requester}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;![CDATA[(function(eventGr,logUtil){
	/**
	* Usage of variables:
	* eventGr - created event record to use from 
	* logUtil.debug - Debugging 
	* logUtil.info - Information 
	* logUtil.warn - Warning 
	* logUtil.error - Error 
	* result - Set result variable to the state and response you want to display on the event record 
	**/ 
	
	
	result = 'error';
	var payloadObj = JSON.parse(eventGr.getValue('input_payload'));
	var responseBody = '';
	var employeeGr = new GlideRecord('u_employee');
	employeeGr.get('user_name', eventGr.approval_record.sys_updated_by);
	
	
	var typeToComment = {
		'approved':"Approved in Surf : By " + employeeGr.getValue('name'),
		'rejected':"Rejected in Surf : By " + employeeGr.getValue('name')
	};
	
	var comment = global.JSUtil.notNil(eventGr.approval_record.comments) ? typeToComment[eventGr.getValue('event_type')] + '\n Reason : ' + eventGr.approval_record.comments : typeToComment[eventGr.getValue('event_type')];
	
	var reqBody = {
		"source_table": payloadObj.source_table.toString(),
		"source_record": payloadObj.source_record.toString(),
		"sys_id": payloadObj.sys_id.toString(),
		"approver": payloadObj.approver.toString(),
		"state": eventGr.event_type.toString(),
		"requested_for": payloadObj.requested_for.toString(),
		"updated_on": eventGr.sys_updated_on.toString(),
		"comments":comment
	};
	
	try {
		
		var instanceName = gs.getProperty('x_snc_uni_inbox.approval.central.hi.instance');
		var url = instanceName + 'api/snc/surf_approval_central_gateway/updateApproval';
		var r = new sn_ws.RESTMessageV2('Hi Approval Central API', 'updateApproval');
		r.setEndpoint(url);
		r.setRequestHeader('Content-Type', "application/json");
		r.setRequestHeader('Accept','application/json');
		var reqB = JSON.stringify(reqBody);
		r.setRequestBody(reqB);
		logUtil.info(r.getRequestBody());
		
		var response = r.executeAsync();
		
		responseBody = response.getBody();
		var httpStatus = response.getStatusCode();
		
		if (httpStatus == 200) {
			logUtil.info('_updateApproval:' + responseBody);
			result = 'processed';
		}
		else {
			logUtil.error('_updateApproval:' + responseBody);
			result = 'error';
		}
		
	} catch (err) {
		logUtil.error('Exception:' + err.getMessage());
	}
})(eventGr,logUtil);]]&gt;&lt;/x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Hi Approvals - Forum"&gt;31f487e71312bf00a77d34228144b02a&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>1432573613</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>d335eda91b20e4d42b58ec67bc4bcbc2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab5cb0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>x_snc_uni_inbox_universal_box_external_approvals</table><target_name>HI Approvals - Communities Forum</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>34c20661b4b384d4923d80fc834c5470</update_guid><update_guid_history>34c20661b4b384d4923d80fc834c5470:1432573613</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_c75e0638dbbfe300aefbeeb5ca9619ee</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="default_hi_details_template"&gt;deed802edb3b2b40ae4cdda5ca961936&lt;/card_template&gt;&lt;description&gt;HI Approvals - Catalog Items&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001002&lt;/number&gt;&lt;query table="x_snc_uni_inbox_universal_box_external_approvals"&gt;state=requested^universal_inbox=c75e0638dbbfe300aefbeeb5ca9619ee^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item display_table="universal_inbox" display_value="HI Approvals - Catalog Items" endquery="false" field="universal_inbox" goto="false" newquery="false" operator="=" or="false" value="c75e0638dbbfe300aefbeeb5ca9619ee"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
	
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example
/*
	answer = {
		number:current.number,
		assigned_to:{
			display_value:current.assigned_to.getDisplayValue(),
			value:current.assigned_to.toString()
		},
		user_location:{
			display_value:current.caller_id.location.getDisplayValue(),
			value:current.caller_id.location.toString()
		}
	}
*/

var hi_payload = JSON.parse(current.payload);
var item_variables = hi_payload.variables;

	if(hi_payload.cat_item == 'Request to Add/Update a group'){
		item_variables = getItemVariables(hi_payload.variables);
	}

var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};
var hi_instance = gs.getProperty('x_snc_uni_inbox.approval.central.hi.instance');
var redirect_url = hi_instance + hi_payload.source_table + '.do?sys_id='+hi_payload.source_record;

if(current.requestor){
	answer = {
	number:{
		display_value: current.external_case_number.toString(),
		value: hi_payload.sys_id
	},
	requester:{
		display_value:current.requestor.getDisplayValue(),
		value:current.requestor.toString()
	},
	requested_date: requested_date,
	short_description: hi_payload.cat_item,
	variables:item_variables,
	redirect_url: redirect_url.toString(),
	cat_item: hi_payload.cat_item
};
}
else{
	answer = {
	number:{
		display_value: current.external_case_number.toString(),
		value: hi_payload.sys_id
	},
	requester:{
		display_value:hi_payload.requested_for,
		value:current.hi_payload.requested_for
	},
	requested_date: requested_date,
	short_description: hi_payload.cat_item,
	variables:item_variables,
	redirect_url: redirect_url.toString(),
	cat_item: hi_payload.cat_item
};
}

answer;


function getItemVariables(payload){
	var payloadArray = payload;
	var resultArray = [];
	for(var i = 0; i &lt; payloadArray.length; i++){
		if(!payloadArray[i].name.toString().startsWith("loaded_")){
			resultArray.push(payloadArray[i]);
		}
	}
	return resultArray;
}

]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;probir.das&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-02-20 22:54:28&lt;/sys_created_on&gt;&lt;sys_id&gt;c75e0638dbbfe300aefbeeb5ca9619ee&lt;/sys_id&gt;&lt;sys_mod_count&gt;41&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;x_snc_uni_inbox_universal_box_external_approvals&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;true&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;![CDATA[(function (eventGr, logUtil) {
	/**
 	* Usage of variables:
 	* eventGr - created event record to use from
 	* logUtil.debug - Debugging
 	* logUtil.info - Information
 	* logUtil.warn - Warning
 	* logUtil.error - Error
 	* result - Set result variable to the state and response you want to display on the event record
 	**/

    var payload = JSON.parse(eventGr.input_payload);

    if (payload) {
        if (payload.approver &amp;&amp; payload.requested_for &amp;&amp; payload.sys_id &amp;&amp; payload.source_record &amp;&amp; payload.number) {

            var approver_id = getEmployee("user_name", payload.approver);
			var requestorStr = payload.requested_for_user_name.toString();
			//var nameSplit = requestorStr.split(' ');
			
            if (approver_id) {
               var appGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
					appGr.addQuery('external_approval_id',payload.sys_id);
					appGr.query();
					if(appGr.getRowCount() &gt; 0){
						if(payload.state == 'requested'){
							while(appGr.next()){
								if(appGr.getValue('state') == 'requested'){
									appGr.setValue('state','not_required');
									appGr.update();
								}
// 								else{
// 									generateExternalApproval(payload,nameSplit,eventGr,approver_id);
// 									eventGr.state = 'processed';
// 									gs.info('inside approval not in requested state');
// 								}
							}
							var approval_record = generateExternalApproval(payload,requestorStr,eventGr,approver_id);
							eventGr.state = 'processed';
							eventGr.approval_record = approval_record;
						}
						else if(payload.state != 'requested'){
							while(appGr.next()){
								if(appGr.getValue('state') == 'requested'){
									appGr.state = 'not_required';
									appGr.update();
									eventGr.state = 'processed';
								}
								else{
									eventGr.state = 'processed';
								}
							}
						}
					}
					else{
						if(payload.state == 'requested'){
							var approval_recor = generateExternalApproval(payload,requestorStr,eventGr,approver_id);
							eventGr.state = 'processed';
							eventGr.approval_record = approval_recor;
						}
						else{
									eventGr.state = 'processed';
								}
					}
					
				}
            else {
                logUtil.error("Not able to identify approver in Surf.");
				eventGr.state = 'error';
            }

        }
        else {
            logUtil.error("Some mandatory attributes were not passed as part of the payload.");
			eventGr.state = 'error';
        }
    }
    else {
		logUtil.error("Payload is not passed as part of the event.");
		eventGr.state = 'error';
    }
	eventGr.setWorkflow(false);
    eventGr.update();
})(eventGr, logUtil);


function getEmployee(field, value) {
    var grEmp = new GlideRecord('u_employee');
    grEmp.addEncodedQuery('active=true^' + field + '=' + value);
    grEmp.query();
    if (grEmp.next()) {
        return grEmp.sys_id;
    }
    return '';
}

function generateExternalApproval(payload,requestorStr,eventGr,approver_id){
	 var requested_for_id = getEmployee("user_name", requestorStr);

                var approvalGr = new GlideRecord('x_snc_uni_inbox_universal_box_external_approvals');
                approvalGr.initialize();
                approvalGr.requestor = requested_for_id;
                approvalGr.universal_inbox = eventGr.universal_inbox;
                approvalGr.external_case_number = payload.number;
                approvalGr.state = 'requested';
                approvalGr.payload = eventGr.input_payload;
                approvalGr.approver = approver_id;
				approvalGr.external_approval_id = payload.sys_id;
				approvalGr.custom_field_1 = payload.number;
				approvalGr.custom_field_2 = payload.cat_item;
				approvalGr.custom_field_3 = payload.requested_for;
				approvalGr.approval_summary = getVariableSummary(payload);
                var approval_record = approvalGr.insert();
		return approval_record;		
}

function getVariableSummary(payload){
	var summary = '';
	var variables = payload.variables;
	for(var i = 0; i &lt; variables.length; i++){
		if(payload.cat_item == 'Request to Add/Update a group'){
			if(!variables[i].name.toString().startsWith("loaded_")){
				summary += variables[i].label + ' : ' + variables[i].displayValue + '\n\n';
			}
		}
		else{
			summary += variables[i].label + ' : ' + variables[i].displayValue + '\n\n';
		}
	}
	return summary;
}]]&gt;&lt;/x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;x_snc_uni_inbox_incident_template display_value="Approval Central - Hi Outbound failure"&gt;32141147dbbdf300beb1440805961907&lt;/x_snc_uni_inbox_incident_template&gt;&lt;x_snc_uni_inbox_list_details_template display_value="default_hi_list_template"&gt;23bd44eadb3b2b40ae4cdda5ca961980&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries&gt;3&lt;/x_snc_uni_inbox_maximum_retries&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the requested item {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;![CDATA[(function(eventGr,logUtil){
	/**
 	* Usage of variables:
 	* eventGr - created event record to use from
 	* logUtil.debug - Debugging
 	* logUtil.info - Information
 	* logUtil.warn - Warning
 	* logUtil.error - Error
 	* result - Set result variable to the state and response you want to display on the event record
 	**/
	
	result = 'error';
	var payloadObj = JSON.parse(eventGr.getValue('input_payload'));
	var responseBody = '';
	var employeeGr = new GlideRecord('u_employee');
	employeeGr.get('user_name', eventGr.approval_record.sys_updated_by);
	
	
	var typeToComment = {
		'approved':"Approved in Surf : By " + employeeGr.getValue('name'),
		'rejected':"Rejected in Surf : By " + employeeGr.getValue('name')
	};
	
	var comment = global.JSUtil.notNil(eventGr.approval_record.comments) ? typeToComment[eventGr.getValue('event_type')] + '\n Reason : ' + eventGr.approval_record.comments : typeToComment[eventGr.getValue('event_type')];
	
	var reqBody = {
		"source_table": payloadObj.source_table.toString(),
		"source_record": payloadObj.source_record.toString(),
		"sys_id": payloadObj.sys_id.toString(),
		"approver": payloadObj.approver.toString(),
		"state": eventGr.event_type.toString(),
		"requested_for": payloadObj.requested_for.toString(),
		"updated_on": eventGr.sys_updated_on.toString(),
		"comments":comment
	};
	
	try {
		var instanceName = gs.getProperty('x_snc_uni_inbox.approval.central.hi.instance');
		var url = instanceName + 'api/snc/surf_approval_central_gateway/updateApproval';
		var r = new sn_ws.RESTMessageV2('Hi Approval Central API', 'updateApproval');
		r.setEndpoint(url);
		r.setRequestHeader('Content-Type', "application/json");
		r.setRequestHeader('Accept','application/json');
		var reqB = JSON.stringify(reqBody);
		r.setRequestBody(reqB);
		logUtil.info(r.getRequestBody());
		
		var response = r.executeAsync();
		
		responseBody = response.getBody();
		var httpStatus = response.getStatusCode();
		
		if (httpStatus == 200) {
			logUtil.info('_updateApproval:' + responseBody);
			result = 'processed';
		}
		else {
			logUtil.error('_updateApproval:' + responseBody);
			result = 'error';
		}
		
	} catch (err) {
		logUtil.error('Exception:' + err.getMessage());
	}
})(eventGr,logUtil);]]&gt;&lt;/x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="HI Approvals - Catalog"&gt;8af487e71312bf00a77d34228144b0ff&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>852809349</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>d335eda91b20e4d42b58ec67bc4bcbc5</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab4410000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>x_snc_uni_inbox_universal_box_external_approvals</table><target_name>HI Approvals - Catalog Items</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>f0c206613cb384d46acef2df2c7a3863</update_guid><update_guid_history>f0c206613cb384d46acef2df2c7a3863:852809349</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_3912aa421bbfb7c0b9b08622dd4bcbce</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="deal_registration_details_template"&gt;a4286e861bffb7c0b9b08622dd4bcb8e&lt;/card_template&gt;&lt;description&gt;Deal Registrations&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;false&lt;/no_request_field&gt;&lt;number&gt;UBOX0001002&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_prm_deal_registration^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_prm_deal_registration"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[try {
    // title,display_field,due_date &amp; task type are mandatory fields for My Work
    //var answer = false;
    //var GApp = new GlideRecord(current.source_table);
    //GApp.addQuery('assignment_group', '8a5055c9c61122780043563ef53438e3');
    //GApp.addQuery('sys_id',current.document_id.toString());
    //GApp.query();
    var approvaltype = current.document_id.getDisplayValue().split(':');
	var tempUser = gs.getUserID();
    var requested_date = current.sys_created_on.getDisplayValue().split(' ');
    var title = '';
    var due_date = new GlideDateTime();

    due_date.setDisplayValue(current.sys_created_on.getDisplayValue(), gs.getDateFormat());

    answer = {};

    answer.number = {
        display_value: current.document_id.u_deal_registration_number.getDisplayValue(),
        value: current.document_id.u_deal_registration_number.toString()
    };

    answer.requested_date = {
        display_value: due_date.getDisplayValue(),
        value: due_date.getDisplayValue()
    };

    answer.name = {
        display_value: current.document_id.u_name.getDisplayValue(),
        value: current.document_id.u_name.toString()
    };

    answer.partner_name = {
        display_value: current.document_id.u_sales_partner.name.getDisplayValue(),
        value: current.document_id.u_sales_partner.name.toString()
    };

    answer.deal_status = {
        display_value: current.document_id.u_lead_status.getDisplayValue(),
        value: current.document_id.u_lead_status.toString()
    };

    answer.customer_name = {
        display_value: current.document_id.u_account_name.getDisplayValue(),
        value: current.document_id.u_account_name.toString()
    };

    answer.deal_registration_type = {
        display_value: current.document_id.u_deal_registration_type.getDisplayValue(),
        value: current.document_id.u_deal_registration_type.toString()
    };

    answer.work_mobile_number = {
        display_value: current.document_id.u_primary_sales_rep.mobile_phone.getDisplayValue(),
        value: current.document_id.u_primary_sales_rep.mobile_phone.toString()
    };

    answer.new_net_acv = {
        display_value: current.document_id.u_surf_opportunity.u_ssa_rollup_netnewacv_usd_s.getDisplayValue(),
        value: current.document_id.u_surf_opportunity.u_ssa_rollup_netnewacv_usd_s.toString()
    };
	
    answer.jpp_check = {
        display_value: current.document_id.u_jpp_check ? 'Yes' : 'False',
        value: current.document_id.u_jpp_check ? 'Yes' : 'False'
    };

    answer.submission_date = {
        display_value: current.document_id.u_acceptance_date.getDisplayValue(),
        value: current.document_id.u_acceptance_date.toString()
    };

    answer.u_notes = {
        display_value: current.document_id.u_notes.getDisplayValue(),
        value: current.document_id.u_notes.toString()
    };

    answer.u_rejection_code = {
        display_value: current.document_id.u_rejection_code.getDisplayValue(),
        value: current.document_id.u_rejection_code.toString()
    };

    answer.u_partner_contact_name = {
        display_value: current.document_id.u_partner_contact_name.getDisplayValue(),
        value: current.document_id.u_partner_contact_name.toString()
    };

    answer.u_rejection_comments = {
        display_value: current.document_id.u_rejection_comments.getDisplayValue(),
        value: current.document_id.u_rejection_comments.toString()
    };

    answer.sys_created_on = {
        display_value: current.document_id.sys_created_on.getDisplayValue(),
        value: current.document_id.sys_created_on.toString()
    };
	
	//u_rejection_code

    answer.partner_sales_contact = {
        display_value: current.document_id.u_surf_contact.name.getDisplayValue(),
        value: current.document_id.u_surf_contact.name.toString()
    };

    answer.potential_acv = {
        display_value: current.document_id.u_potential_acv_value.getDisplayValue(),
        value: current.document_id.u_potential_acv_value.toString()
    };

    answer.sales_rep = {
        display_value: current.document_id.u_primary_sales_rep.getDisplayValue(),
        value: current.document_id.u_primary_sales_rep.toString()
    };

    answer.products = {
        display_value: current.document_id.u_products.getDisplayValue(),
        value: current.document_id.u_products.toString()
    };
	
	answer.sales_rep = {
        display_value: current.document_id.u_primary_sales_rep.getDisplayValue(),
        value: current.document_id.u_primary_sales_rep.toString()
    };
	
    answer.requester = current.document_id.u_accepted_by.getDisplayValue();
	answer.approvers = getApprovers(current.document_id.toString());
    answer;



} catch (e) {
    //gs.addInfoMessage(e.stack);
}

function getApprovers(deal_reg_Id){
		var approvalStatus = [];
		var appr = new GlideRecord('sysapproval_approver');
		appr.addEncodedQuery( 'document_id=' + deal_reg_Id +'^state!=not_required^state!=not requested^state!=cancelled^ORDERBYDESCsys_updated_on');
		appr.query();
		while(appr.next()){
			var approver = {};
			approver.approver = appr.getDisplayValue('approver');
			approver.state = appr.getDisplayValue('state');
			approver.assignment_group = appr.group.assignment_group.getDisplayValue();
			approver.comments = appr.getValue('comments');
			approvalStatus.push(approver);
		}
		return approvalStatus;
}]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;lucas.schirm&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-09-11 17:38:47&lt;/sys_created_on&gt;&lt;sys_id&gt;3912aa421bbfb7c0b9b08622dd4bcbce&lt;/sys_id&gt;&lt;sys_mod_count&gt;50&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;durgaprasad.kusuma&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-01-28 14:23:15&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;5aaaf5401b59c0103d2f65b82d4bcbb8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table/&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requested For", "field_name": "requester", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;![CDATA[(function(eventGr,logUtil){
	/**
	* Usage of variables:
	* eventGr - created event record to use from 
	* logUtil.debug - Debugging 
	* logUtil.info - Information 
	* logUtil.warn - Warning 
	* logUtil.error - Error 
	* result - Set result variable to the state and response you want to display on the event record 
	**/ 
})(eventGr,logUtil);]]&gt;&lt;/x_snc_uni_inbox_inbound_event_processing_script&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="deal_registration_template"&gt;42f3ae0a1bbfb7c0b9b08622dd4bcbdd&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the requested item {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;![CDATA[(function(eventGr,logUtil){
	/**
	* Usage of variables:
	* eventGr - created event record to use from 
	* logUtil.debug - Debugging 
	* logUtil.info - Information 
	* logUtil.warn - Warning 
	* logUtil.error - Error 
	* result - Set result variable to the state and response you want to display on the event record 
	**/ 
})(eventGr,logUtil);]]&gt;&lt;/x_snc_uni_inbox_outbound_event_processing_script&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Deal Registration"&gt;889dbcfadb37b300beb14408059619b4&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field/&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-2060298753</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>d735eda91b20e4d42b58ec67bc4bcbc1</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab4970000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Deal Registrations</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>f8c2066130b384d46f7ed663b5e3ef66</update_guid><update_guid_history>f8c2066130b384d46f7ed663b5e3ef66:-2060298753</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_a4ca56bedbf92b80aefbeeb5ca961907</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="hr_core_case_total_rewards_detail_template"&gt;3b8a3379dbb967404ed56be3ca9619fa&lt;/card_template&gt;&lt;description&gt;HR Case Approval Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001002&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_tableINsn_hr_core_case,sn_hr_core_case_relations,sn_hr_core_case_workforce_admin,sn_hr_core_case_operations,sn_hr_core_case_talent_management,sn_hr_le_case,sn_hr_core_case_total_rewards^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="IN" or="false" value="sn_hr_core_case,sn_hr_core_case_relations,sn_hr_core_case_workforce_admin,sn_hr_core_case_operations,sn_hr_core_case_talent_management,sn_hr_le_case,sn_hr_core_case_total_rewards"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getDisplayValue('sys_created_on'), gs.getDateTimeFormat());

var requested_date = {
	display_value: gdt.getLocalDate().getDisplayValue(),
	value: gdt.getNumericValue()
};

answer = {
	number: {
		display_value: current.sysapproval.getDisplayValue(),
		value: current.sysapproval.toString()
	},
	opened_for:{
		display_value:current.sysapproval.opened_for.getDisplayValue(),
		value:current.sysapproval.opened_for.toString()
	},
	requested_date: requested_date,
	short_description: current.sysapproval.short_description.getDisplayValue(),
};]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;probir.das&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-11-19 18:48:47&lt;/sys_created_on&gt;&lt;sys_id&gt;a4ca56bedbf92b80aefbeeb5ca961907&lt;/sys_id&gt;&lt;sys_mod_count&gt;13&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sn_hr_core_case&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Requester", "field_name": "opened_for", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="hr_core_case_total_rewards_list_template"&gt;1ef73375dbb967404ed56be3ca961960&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the HR total rewards {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="HR Case Approval Request"&gt;86f4c7e71312bf00a77d34228144b064&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;opened_for&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-1724534752</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>d735eda91b20e4d42b58ec67bc4bcbc4</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab3fd0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>HR Case Approval Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>b4c2c261b9b384d4c463100cc18ff068</update_guid><update_guid_history>b4c2c261b9b384d4c463100cc18ff068:-1724534752</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_3346e83fdb0a0b80a3ab56a8dc961951</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="marketing_activity_details_template"&gt;4db77163db81d7000d0e540adc96199f&lt;/card_template&gt;&lt;description&gt;Marketing Activity Planning&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001009&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_plan_marketing_event^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_plan_marketing_event"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var approvaltype;
var currentDocument = current.document_id ? current.document_id.getDisplayValue() + '' : '';

if (currentDocument) {
	var grMkt = new GlideRecord('u_plan_marketing_event');
	grMkt.get(current.document_id.toString());
	var activityName = grMkt.getValue('u_activity_name_new');

	approvaltype = currentDocument.split(':');

	var description = grMkt.u_description_field + '';
	description = description.replace(/(&lt;([^&gt;]+)&gt;)/ig, ''); // replacing the html tags in the text
	if(approvaltype.length &gt; 0) {

		var gdt = new GlideDateTime();
		gdt.setDisplayValue(current.getDisplayValue('sys_created_on'),gs.getDateTimeFormat());
		var requested_date = {
			display_value : gdt.getLocalDate().getDisplayValue(),
			value : gdt.getNumericValue()
		};
		
		var startGDT = new GlideDateTime();
		startGDT.setDisplayValue(grMkt.getDisplayValue('u_start_date'),gs.getDateFormat());
		var startDate = {
			display_value : startGDT.getLocalDate().getDisplayValue(),
			value : startGDT.getNumericValue()
		};
		
		var endGDT = new GlideDateTime();
		endGDT.setDisplayValue(grMkt.getDisplayValue('u_end_date'),gs.getDateFormat());
		var endDate = {
			display_value : endGDT.getLocalDate().getDisplayValue(),
			value : endGDT.getNumericValue()
		};

		answer = {
			number:{
				display_value: grMkt.u_number.toString(),
				value: grMkt.u_number.toString()
			},

			activity_name: activityName,
			campaign: grMkt.u_campaign_ref.getDisplayValue(),
			requester: grMkt.u_reference_1.getDisplayValue(),
			program: grMkt.u_program_ref.getDisplayValue(),
			business_unit_p1: grMkt.u_business_unit_p1.getDisplayValue(),
			eloquaCampaign: grMkt.u_string_1.getDisplayValue(),
			business_unit_p2: grMkt.u_business_unit_p2.getDisplayValue(),
			activityType: grMkt.u_g_l_number.getDisplayValue(),
			industry: grMkt.u_vertical.getDisplayValue(),
			startDate: startDate,
			endDate: endDate,
			glNumber: grMkt.u_gl_number.toString(),
			costCenter: grMkt.u_cost_center.getDisplayValue(),
			description: description,
			targetLevelP1: grMkt.u_choice_2.getDisplayValue(),
			country: grMkt.u_country1.getDisplayValue(),
			targetRoleP1: grMkt.u_target_role_p1.getDisplayValue(),
			marketingRegion: grMkt.u_marketing_region.getDisplayValue(),
			primaryTargetSegment: grMkt.u_choice_4.getDisplayValue(),
			bucket: grMkt.u_bucket.getDisplayValue(),
			driveTrain: grMkt.u_drive_train.getDisplayValue(),
			u_currency: grMkt.u_currency.getDisplayValue(),
			u_notes : grMkt.u_notes.getDisplayValue(),
			approval_type: approvaltype[0],
			requested_date: requested_date,
			document:current.document_id + '',
			due_date:requested_date,
			task_type : approvaltype[0],
			display_field : grMkt.u_number.toString(),
			title : activityName,
			notActionable: current[inbox.state_field] != inbox.pending_state
		};
	}
}]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;manoj.batula&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-11-02 06:44:01&lt;/sys_created_on&gt;&lt;sys_id&gt;3346e83fdb0a0b80a3ab56a8dc961951&lt;/sys_id&gt;&lt;sys_mod_count&gt;55&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:47&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject);]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;u_plan_marketing_event&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Name", "field_name": "activity_name", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="marketing_activity_list_template"&gt;6f5d7736db4593043d7958a8dc9619ac&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the marketing activity planning {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Marketing Activity Planning"&gt;18f443e71312bf00a77d34228144b04c&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_reference_1&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>-2034426565</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>db35eda91b20e4d42b58ec67bc4bcbc0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab95f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Marketing Activity Planning</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>09c206618db384d49f0c2e4b197f7db4</update_guid><update_guid_history>09c206618db384d49f0c2e4b197f7db4:-2034426565</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_86ce0012dba3f600a3ab56a8dc961987</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;Approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;true&lt;/advanced_update_script&gt;&lt;assigned_field&gt;user.manager&lt;/assigned_field&gt;&lt;cancel_state&gt;Cancelled&lt;/cancel_state&gt;&lt;card_template display_value="timesheet_details_template"&gt;f454422bdbc1d7000d0e540adc961960&lt;/card_template&gt;&lt;description&gt;Timesheet&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001001&lt;/number&gt;&lt;query table="time_sheet"&gt;state=Submitted^EQ&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;Rejected&lt;/rejected_state&gt;&lt;requested_field/&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[var wkoGDT = new GlideDateTime();
wkoGDT.setDisplayValue(current.week_starts_on.getDisplayValue(),gs.getDateFormat());

answer = {
	week_starts_on:{
		display_value:wkoGDT.getDate().getByFormat("MM/dd/yyyy"),
		value:wkoGDT.getNumericValue()
	},
	total_hours:{
		display_value:current.total_hours.getDisplayValue(),
		value:current.total_hours.toString()
	},
	user:{
		display_value:current.user.getDisplayValue(),
		value:current.user.toString()
	},
	cost_center:{
		display_value:current.user.department.cost_center.getDisplayValue(),
		value:current.user.department.cost_center.toString()
	},
	notes : '&lt;br /&gt;' + current.notes.toString().replace(/\n/g, "&lt;br /&gt;"),
	monday:0,
	tuesday:0,
	wednesday:0,
	thursday:0,
	friday:0,
	saturday:0,
	sunday:0,
	time_cards:[],
	document:current.getUniqueValue(),
	due_date:'',
	task_type : 'Timesheet',
	display_field : current.user.getDisplayValue()	
};

wkoGDT.addWeeksLocalTime(1);
answer.week_ends_on = {
	display_value:wkoGDT.getDate().getByFormat("MM/dd/yyyy"),
	value:wkoGDT.getNumericValue()
};
answer.week = {
	display_value:answer.week_starts_on.display_value + " - " + answer.week_ends_on.display_value,
	value : answer.week_starts_on.value + " - " + answer.week_ends_on.value
};
answer.title = 'Week: ' + answer.week.display_value;
var timecards = []; var i=0;
var grTC = new GlideRecord('time_card');
grTC.addQuery('time_sheet',current.sys_id);
grTC.query();
while (grTC.next()){
	answer.monday += parseInt(grTC.monday.toString());
	answer.tuesday += parseInt(grTC.tuesday.toString());
	answer.wednesday += parseInt(grTC.wednesday.toString());
	answer.thursday += parseInt(grTC.thursday.toString());
	answer.friday += parseInt(grTC.friday.toString());
	answer.saturday += parseInt(grTC.saturday.toString());
	answer.sunday += parseInt(grTC.sunday.toString());

	answer.time_cards.push({
		task_number: grTC.task.nil() ? false : grTC.task.number.toString(),
		task_name: grTC.task.nil() ? false : grTC.task.short_description.toString(),
		category: grTC.category.getDisplayValue(),
		sunday:grTC.sunday.getDisplayValue(),
		monday:grTC.monday.getDisplayValue(),
		tuesday:grTC.tuesday.getDisplayValue(),
		wednesday:grTC.wednesday.getDisplayValue(),
		thursday:grTC.thursday.getDisplayValue(),
		friday:grTC.friday.getDisplayValue(),
		saturday:grTC.saturday.getDisplayValue(),
		total: grTC.total.getDisplayValue(),
		notes : '&lt;br /&gt;' + grTC.notes.getDisplayValue().replace(/\n/g, "&lt;br /&gt;")
	});
}
answer;



]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-06-26 06:38:26&lt;/sys_created_on&gt;&lt;sys_id&gt;86ce0012dba3f600a3ab56a8dc961987&lt;/sys_id&gt;&lt;sys_mod_count&gt;102&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:46&lt;/sys_updated_on&gt;&lt;table&gt;time_sheet&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){
	var stateValue = updateObject[updateObject['state_field']];
	if (stateValue.toLowerCase() == 'approved') {
		newValue.state = 'accepted_state';
		oldValue.state = 'Submitted';
		var timeSheetId = current.getUniqueValue();
		var timeSheet = new global.TimeSheet(timeSheetId);
		var exceedingMaxHours = timeSheet.validateMaxHours();
		if (!exceedingMaxHours) {
			var count = timeSheet.approveTimeCards();
		}
		//current.u_approver = gs.getUserID();
		current.update();
	}
	if (stateValue.toLowerCase() =='rejected') {
		newValue.state = 'rejected_state';
		oldValue.state = 'Submitted';
		var timeSheetId_reject = current.getUniqueValue();
		var timeSheet_reject = new global.TimeSheet(timeSheetId_reject);
		timeSheet_reject.rejectTimeCards();
	}
})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;time_sheet&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"User", "field_name": "user", "default_filter" : false},{"display":"Week", "field_name": "week", "default_filter" : true},{"display":"Total Hours", "field_name": "total_hours", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="timesheet_list_template"&gt;d5e82372dbc193043d7958a8dc96190b&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the timesheet from {user} for the week {week_starts_on} - {week_ends_on}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Submitted&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Time Sheet - OLD"&gt;1cf443e71312bf00a77d34228144b008&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;user&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>261410487</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>db35eda91b20e4d42b58ec67bc4bcbc3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab3c20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>time_sheet</table><target_name>Timesheet</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>b8c2c261deb384d4649e2a1593e87066</update_guid><update_guid_history>b8c2c261deb384d4649e2a1593e87066:261410487</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>DELETE</action><application display_value="Approval Central">ca26b59bdb612b0094c2f7731d9619b1</application><category>customer</category><comments/><name>sys_atf_schedule_run_96d376ab1b734010f0f077f58d4bcb20</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_atf_schedule_run"&gt;&lt;sys_atf_schedule_run action="DELETE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;browser_name&gt;any&lt;/browser_name&gt;&lt;browser_version/&gt;&lt;description&gt;Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&lt;/description&gt;&lt;order&gt;100&lt;/order&gt;&lt;os_name&gt;any&lt;/os_name&gt;&lt;os_version/&gt;&lt;schedule display_value=""&gt;1ad376ab1b734010f0f077f58d4bcb1c&lt;/schedule&gt;&lt;sys_class_name&gt;sys_atf_schedule_run&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:25&lt;/sys_created_on&gt;&lt;sys_id&gt;96d376ab1b734010f0f077f58d4bcb20&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;100&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_atf_schedule_run_96d376ab1b734010f0f077f58d4bcb20&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:25&lt;/sys_updated_on&gt;&lt;test_suite display_value="ARCommunication Suite"&gt;94488a49db278410e76ddb85ca961990&lt;/test_suite&gt;&lt;watch_list/&gt;&lt;/sys_atf_schedule_run&gt;&lt;sys_update_version action="INSERT_OR_UPDATE"&gt;&lt;action&gt;INSERT_OR_UPDATE&lt;/action&gt;&lt;application display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/application&gt;&lt;file_path/&gt;&lt;instance_id&gt;098c0d52db194cd02f68c59705961960&lt;/instance_id&gt;&lt;instance_name&gt;surfgitdev1&lt;/instance_name&gt;&lt;name&gt;sys_atf_schedule_run_96d376ab1b734010f0f077f58d4bcb20&lt;/name&gt;&lt;payload&gt;&lt;![CDATA[&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_atf_schedule_run"&gt;&lt;sys_atf_schedule_run action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;browser_name&gt;any&lt;/browser_name&gt;&lt;browser_version/&gt;&lt;description&gt;Run suite 'ARCommunication Suite' on a system with this configuration:
Any browser on any version
Any operating system on any version&lt;/description&gt;&lt;order&gt;100&lt;/order&gt;&lt;os_name&gt;any&lt;/os_name&gt;&lt;os_version/&gt;&lt;schedule display_value="CICD adhoc schedule"&gt;1ad376ab1b734010f0f077f58d4bcb1c&lt;/schedule&gt;&lt;sys_class_name&gt;sys_atf_schedule_run&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:25&lt;/sys_created_on&gt;&lt;sys_id&gt;96d376ab1b734010f0f077f58d4bcb20&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;100&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_atf_schedule_run_96d376ab1b734010f0f077f58d4bcb20&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:25&lt;/sys_updated_on&gt;&lt;test_suite display_value="ARCommunication Suite"&gt;94488a49db278410e76ddb85ca961990&lt;/test_suite&gt;&lt;watch_list/&gt;&lt;/sys_atf_schedule_run&gt;&lt;/record_update&gt;]]&gt;&lt;/payload&gt;&lt;payload_hash&gt;788021196&lt;/payload_hash&gt;&lt;record_name&gt;100&lt;/record_name&gt;&lt;reverted_from/&gt;&lt;source&gt;e6347ff81bb380942b58ec67bc4bcb2c&lt;/source&gt;&lt;source_table&gt;sys_update_set&lt;/source_table&gt;&lt;state&gt;current&lt;/state&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:26&lt;/sys_created_on&gt;&lt;sys_id&gt;12d37e6f1b734010f0f077f58d4bcba8&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_recorded_at&gt;17139af0e810000001&lt;/sys_recorded_at&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:26&lt;/sys_updated_on&gt;&lt;type&gt;Scheduled Suite Run&lt;/type&gt;&lt;update_guid&gt;5ad37e6f58734010b7b4ced7b2774ba7&lt;/update_guid&gt;&lt;update_guid_history&gt;5ad37e6f58734010b7b4ced7b2774ba7:788021196&lt;/update_guid_history&gt;&lt;/sys_update_version&gt;&lt;sys_metadata_delete action="INSERT_OR_UPDATE"&gt;&lt;sys_audit_delete/&gt;&lt;sys_class_name&gt;sys_metadata_delete&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-04-02 06:58:26&lt;/sys_created_on&gt;&lt;sys_db_object display_value="" name="sys_atf_schedule_run"&gt;sys_atf_schedule_run&lt;/sys_db_object&gt;&lt;sys_id&gt;38aa0faf0f9f48ebaf79cadfbb1b8119&lt;/sys_id&gt;&lt;sys_metadata&gt;96d376ab1b734010f0f077f58d4bcb20&lt;/sys_metadata&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;100&lt;/sys_name&gt;&lt;sys_package display_value="Approval Central" source="x_snc_approval_cen"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_package&gt;&lt;sys_parent/&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Approval Central"&gt;ca26b59bdb612b0094c2f7731d9619b1&lt;/sys_scope&gt;&lt;sys_scope_delete display_value=""&gt;c2527724e6664664b3ecf0c7a3924710&lt;/sys_scope_delete&gt;&lt;sys_update_name&gt;sys_atf_schedule_run_96d376ab1b734010f0f077f58d4bcb20&lt;/sys_update_name&gt;&lt;sys_update_version display_value="sys_atf_schedule_run_96d376ab1b734010f0f077f58d4bcb20"&gt;12d37e6f1b734010f0f077f58d4bcba8&lt;/sys_update_version&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-04-02 06:58:26&lt;/sys_updated_on&gt;&lt;/sys_metadata_delete&gt;&lt;/record_update&gt;</payload><payload_hash>2131048216</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>df35eda91b20e4d42b58ec67bc4bcb74</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17139af12360000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table/><target_name>100</target_name><type>Scheduled Suite Run</type><update_domain>global</update_domain><update_guid>66d37e6fef73401020bb9e8c3ddebdd2</update_guid><update_guid_history>66d37e6fef73401020bb9e8c3ddebdd2:2131048216,5ad37e6f58734010b7b4ced7b2774ba7:788021196</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_74b25152dbf48b44a3ab56a8dc9619e4</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="control_request_detail_template"&gt;c517b867db8597000d0e540adc961902&lt;/card_template&gt;&lt;description&gt;Control Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001004&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=sn_compliance_control^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="sn_compliance_control"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[// title,display_field,due_date &amp; task type are mandatory fields for My Work
var answer = false;
var GApp = new GlideRecord(current.source_table);
GApp.get(current.document_id.toString());
var approvaltype = current.document_id.getDisplayValue().split(':');
var gdt = new GlideDateTime();
gdt.setDisplayValue(current.getValue('sys_created_on'),gs.getDateTimeFormat());
var requested_date = {
	display_value : gdt.getLocalDate().getDisplayValue(),
	value : gdt.getNumericValue()
};

answer = {
	number:{
		display_value: GApp.number.toString(),
		value : GApp.number.toString()
	},
	approval_group:false,
	approval_type: approvaltype[0],
	name: GApp.getDisplayValue('name'),
	profile: GApp.getDisplayValue('profile'),
	classification: GApp.getDisplayValue('classification'),
	policy_statement: GApp.getDisplayValue('content'),
	category: GApp.getDisplayValue('category'),
	owner: GApp.getDisplayValue('owner'),
	type: GApp.getDisplayValue('type'),
	weighting: GApp.getDisplayValue('weighting'),
	risk_rating: GApp.getDisplayValue('u_risk_rating'),
	frequency: GApp.getDisplayValue('frequency'),
	description: GApp.getDisplayValue('description'),
	detail_desc: GApp.getDisplayValue('u_detail_description'),
	requested_date: requested_date,
	request_reason: current.getDisplayValue('u_request_reason'),
	notes: GApp.getDisplayValue("u_comments"),
	source_table: current.source_table,
	document:current.document_id.toString(),
	due_date:requested_date,
	task_type : approvaltype[0],
	display_field : GApp.number.toString(),
	title : GApp.getDisplayValue('content'),
	notActionable: current[inbox.state_field] != inbox.pending_state
};
if (current.group)
{
	answer.approval_group = {
		display_value: current.group.assignment_group.getDisplayValue(),
		value: current.group.assignment_group.toString()
	};
}
answer;


]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;abhishek.gupta&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-27 14:48:35&lt;/sys_created_on&gt;&lt;sys_id&gt;74b25152dbf48b44a3ab56a8dc9619e4&lt;/sys_id&gt;&lt;sys_mod_count&gt;35&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;probir.das&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-02-10 17:58:48&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;sn_compliance_control&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[{"display":"ID", "field_name": "number", "default_filter" : false},{"display":"Submitted", "field_name": "requested_date", "default_filter" : true,"sort_by_value":true},{"display":"Report", "field_name": "policy_statement", "default_filter" : false}]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="control_request_list_template"&gt;1f39efbedb8193043d7958a8dc961910&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the control request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen display_value="Control Request"&gt;69f447e71312bf00a77d34228144b0a5&lt;/x_snc_uni_inbox_screen&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_requested_by&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>405697967</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>df35eda91b20e4d42b58ec67bc4bcbc2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eab6310000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Control Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>f0c20661dbb384d4649306411b434674</update_guid><update_guid_history>f0c20661dbb384d4649306411b434674:405697967</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>universal_inbox_dfb38426db1b4010beb1440805961999</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="universal_inbox"&gt;&lt;universal_inbox action="INSERT_OR_UPDATE"&gt;&lt;accepted_state&gt;approved&lt;/accepted_state&gt;&lt;acknowledge_inbox&gt;false&lt;/acknowledge_inbox&gt;&lt;active&gt;true&lt;/active&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;advanced_requested&gt;false&lt;/advanced_requested&gt;&lt;advanced_update_script&gt;false&lt;/advanced_update_script&gt;&lt;assigned_field&gt;approver&lt;/assigned_field&gt;&lt;cancel_state&gt;cancelled&lt;/cancel_state&gt;&lt;card_template display_value="investment_request_details_template"&gt;581494eadb1f4010beb14408059619ec&lt;/card_template&gt;&lt;description&gt;Investment Request&lt;/description&gt;&lt;fields/&gt;&lt;journal_field&gt;comments&lt;/journal_field&gt;&lt;no_journal_field&gt;false&lt;/no_journal_field&gt;&lt;no_request_field&gt;true&lt;/no_request_field&gt;&lt;number&gt;UBOX0001011&lt;/number&gt;&lt;query table="sysapproval_approver"&gt;state=requested^source_table=u_investment_request^EQ&lt;item display_value="Requested" endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="requested"/&gt;&lt;item endquery="false" field="source_table" goto="false" newquery="false" operator="=" or="false" value="u_investment_request"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/query&gt;&lt;rejected_state&gt;rejected&lt;/rejected_state&gt;&lt;requested_field&gt;sysapproval&lt;/requested_field&gt;&lt;requested_script&gt;&lt;![CDATA[answer = {
	table:"sc_request",
	field:"requested_for",
	query:false,
	data:false
};
if(current){
}]]&gt;&lt;/requested_script&gt;&lt;script&gt;&lt;![CDATA[//Whatever object you would like to be used, have it as the last argument;
//Example



answer = {
    number: {
        display_value: current.document_id.getDisplayValue(),
        value: current.document_id.toString()
    },
    customer_name: current.document_id.u_customer_name.getDisplayValue(),
    document_status: current.document_id.u_document_status.getDisplayValue(),
	service_executive: current.document_id.u_service_executive.getDisplayValue(),
    account_executive: current.document_id.u_account_executive.getDisplayValue(),
    investment_value: current.document_id.u_investment_value.getDisplayValue(),
    program_name: current.document_id.u_program_name.getDisplayValue(),
    geo: current.document_id.u_geo.getDisplayValue(),
    status: current.document_id.u_status.getDisplayValue(),
    cacv: current.document_id.u_cacv.getDisplayValue(),
    amount_1: current.document_id.u_amount1.getDisplayValue(),
    amount_2: current.document_id.u_amount_2.getDisplayValue(),
    amount_3: current.document_id.u_amount_3.getDisplayValue(),
    amount_4: current.document_id.u_amount4.getDisplayValue(),
    investment_proposal: current.document_id.u_investment_proposal.getDisplayValue(),
    requestor_name: current.document_id.u_requestor_name.getDisplayValue(),
	geo_t_account: current.document_id.u_geo_t_account.getDisplayValue()
};

answer;]]&gt;&lt;/script&gt;&lt;state_field&gt;state&lt;/state_field&gt;&lt;sys_created_by&gt;priyarajan.nayak&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-03-04 19:27:45&lt;/sys_created_on&gt;&lt;sys_id&gt;dfb38426db1b4010beb1440805961999&lt;/sys_id&gt;&lt;sys_mod_count&gt;29&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;priyarajan.nayak&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-03-12 18:06:49&lt;/sys_updated_on&gt;&lt;table&gt;sysapproval_approver&lt;/table&gt;&lt;update_script&gt;&lt;![CDATA[//current is the current record on the above selected table
(function(current, updateObject){

})(current, updateObject)]]&gt;&lt;/update_script&gt;&lt;x_snc_uni_inbox_actions&gt;ed371836db8140101e4d5ad3ca9619a8,0617d0fedb4140101e4d5ad3ca961924,12b610b2db8140101e4d5ad3ca9619ce&lt;/x_snc_uni_inbox_actions&gt;&lt;x_snc_uni_inbox_approval_source_table&gt;u_investment_request&lt;/x_snc_uni_inbox_approval_source_table&gt;&lt;x_snc_uni_inbox_exclude_delegation&gt;false&lt;/x_snc_uni_inbox_exclude_delegation&gt;&lt;x_snc_uni_inbox_external_inbox&gt;false&lt;/x_snc_uni_inbox_external_inbox&gt;&lt;x_snc_uni_inbox_failure_notification_preference&gt;Notification&lt;/x_snc_uni_inbox_failure_notification_preference&gt;&lt;x_snc_uni_inbox_filterable_fields&gt;[
    {
        "display": "ID",
        "field_name": "number",
        "default_filter": false
    }, 
    {
        "display": "Created By",
        "field_name": "requestor_name",
        "default_filter": false
    }
]&lt;/x_snc_uni_inbox_filterable_fields&gt;&lt;x_snc_uni_inbox_hide_in_web&gt;false&lt;/x_snc_uni_inbox_hide_in_web&gt;&lt;x_snc_uni_inbox_inbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_incident_template/&gt;&lt;x_snc_uni_inbox_list_details_template display_value="investment_request_list_template"&gt;da7258e6db1f4010beb144080596195f&lt;/x_snc_uni_inbox_list_details_template&gt;&lt;x_snc_uni_inbox_maximum_retries/&gt;&lt;x_snc_uni_inbox_modal_response_message&gt;You've {action_taken} the investment request {number}&lt;/x_snc_uni_inbox_modal_response_message&gt;&lt;x_snc_uni_inbox_outbound_event_processing_script/&gt;&lt;x_snc_uni_inbox_pending_state&gt;Requested&lt;/x_snc_uni_inbox_pending_state&gt;&lt;x_snc_uni_inbox_screen/&gt;&lt;x_snc_uni_inbox_scripted_query/&gt;&lt;x_snc_uni_inbox_show_attachments&gt;false&lt;/x_snc_uni_inbox_show_attachments&gt;&lt;x_snc_uni_inbox_source_requester_field&gt;u_requestor_name&lt;/x_snc_uni_inbox_source_requester_field&gt;&lt;x_snc_uni_inbox_source_table/&gt;&lt;/universal_inbox&gt;&lt;/record_update&gt;</payload><payload_hash>969407483</payload_hash><remote_update_set display_value="System Administrator">5735eda91b20e4d42b58ec67bc4bcb74</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-11-17 23:05:21</sys_created_on><sys_id>df35eda91b20e4d42b58ec67bc4bcbc5</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>17118eaba040000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-11-17 23:05:21</sys_updated_on><table>sysapproval_approver</table><target_name>Investment Request</target_name><type>Universal Inbox</type><update_domain>global</update_domain><update_guid>49c2066191b384d4fc1aca3cc1b813df</update_guid><update_guid_history>49c2066191b384d4fc1aca3cc1b813df:969407483</update_guid_history><update_set/><view/></sys_update_xml></unload>